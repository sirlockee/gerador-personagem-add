
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <title>Advanced Dungeon & Dragons</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="img/favicon.gif">
    <style>
      html {
        width: 100%;
        box-sizing: border-box;
      }
      body {
        padding: 10px;
        margin: 0;
        border: 0;
        width: 100%;
        box-sizing: border-box;

        font-family: Consolas, "Lucida Console", Courier, mono !important;
        font-size: 12px !important;
        color: rgb(34, 34, 34) !important;
      }
      header {
        width: 100%;
        display: block;
        box-sizing: border-box;
      }
      header img {
        max-width: 300px;
        display: block;
        margin: 0 auto;
      }
      div {
        width: auto !important;
        display: block;
        box-sizing: border-box;
      }
      table {
        width: auto !important;
      }
      thead tr th {
        display: none;
      }
      td {
        font-size: 0.9em !important;
      }
      tbody tr td:first-child {
        font-weight: bold;
        width: auto !important;
        border: 0 !important;
      }
      tbody tr td tbody tr td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
      }
      tbody tr:nth-child(4) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
      }
      tbody tr:nth-child(5) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
      }
      tbody tr:nth-child(7) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(8) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(9) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(10) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(11) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(12) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(13) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(14) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      td {
        max-width: 320px !important;
      }
      #botao {
        padding: 5px;
        margin-bottom: 10px;
        background-color: #eee;
        width: 100% !important;
      }
      #botao::after {
        content: '';
        display: block;
        height: 0;
        clear: both;
      }
      #ficha {
        margin-bottom: 30px;
      }
      button {
        background-color: #ddd;
      }
      label {
        display: block;
        float: left;
        margin-top: 1px;
        margin-right: 5px;
      }
      input[type=radio] {
        margin-top: 1px;
        margin-bottom: 5px;
        display: block;
        float: left;
      }
    </style>
  </head>
  <body>

    <header>
      <img src="img/logo.gif" />
    </header>
    <div id="botao">
      Force a rolagem para um tipo específico de classe:
      <br style="clear: both" />
      <form>
        <label for="Todas"><input type="radio" id="Todas" name="forcar_classe" value="Todas" checked="checked">Todas</label>
        <label for="Guerreiro"><input type="radio" id="Guerreiro" name="forcar_classe" value="Guerreiro">Guerreiro</label>
        <label for="Paladino"><input type="radio" id="Paladino" name="forcar_classe" value="Paladino">Paladino</label>
        <label for="Ranger"><input type="radio" id="Ranger" name="forcar_classe" value="Ranger">Ranger</label>
        <label for="Mago"><input type="radio" id="Mago" name="forcar_classe" value="Mago">Mago</label>
        <label for="Abjurante"><input type="radio" id="Abjurante" name="forcar_classe" value="Abjurante">Abjurante</label>
        <label for="Conjurador"><input type="radio" id="Conjurador" name="forcar_classe" value="Conjurador">Conjurador</label>
        <label for="Adivinho"><input type="radio" id="Adivinho" name="forcar_classe" value="Adivinho">Adivinho</label>
        <label for="Feiticeiro"><input type="radio" id="Feiticeiro" name="forcar_classe" value="Feiticeiro">Feiticeiro</label>
        <label for="Ilusionista"><input type="radio" id="Ilusionista" name="forcar_classe" value="Ilusionista">Ilusionista</label>
        <label for="Invocador"><input type="radio" id="Invocador" name="forcar_classe" value="Invocador">Invocador</label>
        <label for="Necromante"><input type="radio" id="Necromante" name="forcar_classe" value="Necromante">Necromante</label>
        <label for="Transmutador"><input type="radio" id="Transmutador" name="forcar_classe" value="Transmutador">Transmutador</label>
        <label for="Clérigo"><input type="radio" id="Clérigo" name="forcar_classe" value="Clérigo">Clérigo</label>
        <label for="Clérigo da Agricultura"><input type="radio" id="Clérigo da Agricultura" name="forcar_classe" value="Clérigo da Agricultura">Clérigo da Agricultura</label>
        <label for="Clérigo dos Ferreiros"><input type="radio" id="Clérigo dos Ferreiros" name="forcar_classe" value="Clérigo dos Ferreiros">Clérigo dos Ferreiros</label>
        <label for="Clérigo da Morte"><input type="radio" id="Clérigo da Morte" name="forcar_classe" value="Clérigo da Morte">Clérigo da Morte</label>
        <label for="Clérigo da Doença"><input type="radio" id="Clérigo da Doença" name="forcar_classe" value="Clérigo da Doença">Clérigo da Doença</label>
        <label for="Clérigo da Terra"><input type="radio" id="Clérigo da Terra" name="forcar_classe" value="Clérigo da Terra">Clérigo da Terra</label>
        <label for="Clérigo da Cura"><input type="radio" id="Clérigo da Cura" name="forcar_classe" value="Clérigo da Cura">Clérigo da Cura</label>
        <label for="Clérigo da Caça"><input type="radio" id="Clérigo da Caça" name="forcar_classe" value="Clérigo da Caça">Clérigo da Caça</label>
        <label for="Clérigo do Relâmpago"><input type="radio" id="Clérigo do Relâmpago" name="forcar_classe" value="Clérigo do Relâmpago">Clérigo do Relâmpago</label>
        <label for="Clérigo do Amor"><input type="radio" id="Clérigo do Amor" name="forcar_classe" value="Clérigo do Amor">Clérigo do Amor</label>
        <label for="Clérigo da Natureza"><input type="radio" id="Clérigo da Natureza" name="forcar_classe" value="Clérigo da Natureza">Clérigo da Natureza</label>
        <label for="Clérigo dos Oceanos"><input type="radio" id="Clérigo dos Oceanos" name="forcar_classe" value="Clérigo dos Oceanos">Clérigo dos Oceanos</label>
        <label for="Clérigo da Paz"><input type="radio" id="Clérigo da Paz" name="forcar_classe" value="Clérigo da Paz">Clérigo da Paz</label>
        <label for="Clérigo da Força"><input type="radio" id="Clérigo da Força" name="forcar_classe" value="Clérigo da Força">Clérigo da Força</label>
        <label for="Clérigo do Trovão"><input type="radio" id="Clérigo do Trovão" name="forcar_classe" value="Clérigo do Trovão">Clérigo do Trovão</label>
        <label for="Clérigo da Guerra"><input type="radio" id="Clérigo da Guerra" name="forcar_classe" value="Clérigo da Guerra">Clérigo da Guerra</label>
        <label for="Clérigo dos Ventos"><input type="radio" id="Clérigo dos Ventos" name="forcar_classe" value="Clérigo dos Ventos">Clérigo dos Ventos</label>
        <label for="Druida"><input type="radio" id="Druida" name="forcar_classe" value="Druida">Druida</label>
        <label for="Ladrão"><input type="radio" id="Ladrão" name="forcar_classe" value="Ladrão">Ladrão</label>
        <label for="Bardo"><input type="radio" id="Bardo" name="forcar_classe" value="Bardo">Bardo</label>
        <br style="clear: both" />
        <button type="submit">Rolar</button>
      </form>
    </div>
    <div id="ficha"></div>

    <script src="scripts/prettyprint.js"></script>
    <script type="text/javascript">

      /* debug */
      const DEBUG = false;
      function debug(texto) {
        if (DEBUG) {
          console.log(texto);
        }
      }

      let forcar_classe = 'Todas';
      //forcar_classe = 'Clérigo';

      document.querySelector("div#botao > form").addEventListener("submit", evento => {
        evento.preventDefault();
        var radios = document.getElementsByName('forcar_classe');
        for (var i = 0, length = radios.length; i < length; i++) {
          if (radios[i].checked) {
            forcar_classe = radios[i].value;
            render();
            break;
          }
        }
      });

      const PERICIAS = {
        "Rastrear": {}
      };

      const RACAS = {
        "Humano": {
          "Força": { minimo: 3, maximo: 18 },
          "Destreza": { minimo: 3, maximo: 18 },
          "Constituição": { minimo: 3, maximo: 18 },
          "Inteligência": { minimo: 3, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 3, maximo: 18 },
          ajustes: {},
          detalhes: [
            'Humanos podem ser de qualquer classe e alcançar qualquer nível na classe escolhida'
          ],
          altura: { "Masculino": { minimo: 1.52, maximo: 2.02 }, "Feminino": { minimo: 1.5, maximo: 2.0 }},
          idade: { minimo: 15, maximo: 130 },
          peso: { "Masculino": { minimo: 70, maximo: 100 }, "Feminino": { minimo: 50, maximo: 80 }},
          linguas_importantes: [ "comum" ],
          linguas: [ 'élfico', 'do anões', 'dos gnomos', 'dos halflings', 'dos goblins', 'dos robgoblins', 'dos orcs', 'dos gnolls' ],
          armas_importantes: [],
          talentos: {
            'Furtar Bolsos': 0,
            'Abrir Fechaduras': 0,
            'Achar/Desarmar Armadilhas': 0,
            'Mover-se em Silêncio': 0,
            'Esconder-se nas Sombras': 0,
            'Ouvir Ruídos': 0,
            'Escalar Muros': 0,
            'Decifrar Linguagens': 0,
            'Ataque pelas Costas': '',
            'Gíria dos ladrões': '',
            'Usar Pergaminhos': 0,
            'Identificar Item Mágico': 0
          }
        },
        "Anão": {
          "Força": { minimo: 8, maximo: 18 },
          "Destreza": { minimo: 3, maximo: 17 },
          "Constituição": { minimo: 11, maximo: 18 },
          "Inteligência": { minimo: 3, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 3, maximo: 17 },
          ajustes: { "Constituição": 1, "Carisma": -1 },
          detalhes: [
            'Possuem um bônus de resistência (+1 para cada 3½ pontos de Constituição) contra ataques de varinhas de condão, bastão mágicos, cajados e outras magias.',
            'Possuem resistência excepcional a substâncias tóxicas. Seus testes de resistência contra veneno possuem bônus +1 para cada 3½ pontos de Constituição.',
            'Itens mágicos que não forem especificamente compatíveis com a classe do personagem têm 20% de chance falhar quando usados por um anão. O teste de falha aplica-se a bastões, varinhas, anéis, amuletos, poções, trombetas e todos os outros tipos de ltens mágicos, exceto armas, escudos, armaduras, manoplas e faixas. Esta penalidade não se aplica a anões clérigos usando itens de sua classe. Se falhar, é possível perceber se o item é amaldiçoado.',
            'Em combate corpo a corpo, os anões adicionam 1 à jogada de ataque feita contra ogros, meio-ogros, goblins e robgoblins.',
            'Quando ogros, trolls, ogros magos, gigantes ou titãs atacam os anões, estes monstros precisam subtrair 4 pontos de suas jogadas de ataque.',
            'A infravisão dos anões tem um alcance de 20 metros no escuro.',
            'Estando a 3 metros, o Anão pode detectar (1-5 em 1d6) desnível ou Inclinação numa passagem.',
            'Estando a 3 metros, o Anão pode detectar (1-5 em 1d6) novo túnel/construção de passagem.',
            'Estando a 3 metros, o Anão pode detectar (1-4 em 1d6) deslizamento/deslocamento de paredes ou salas.',
            'Estando a 3 metros, o Anão pode detectar (1-3 em 1d6) armadilhas de pedra, fossos e fossos camuflados.',
            'O Anão pode determinar (1-3 em 1d6) profundidade aproximada em relação à superficie.'
          ],
          altura: { "Masculino": { minimo: 1.09, maximo: 1.33 }, "Feminino": { minimo: 1.04, maximo: 1.28 }},
          idade: { minimo: 40, maximo: 450 },
          peso: { "Masculino": { minimo: 65, maximo: 85 }, "Feminino": { minimo: 52, maximo: 72 }},
          linguas_importantes: [ "comum", "dos anões" ],
          linguas: [ "dos gnomos", "dos goblins", "dos kobolds", "dos ogros" ],
          armas_importantes: [],
          talentos: {
            'Furtar Bolsos': 0,
            'Abrir Fechaduras': 10,
            'Achar/Desarmar Armadilhas': 15,
            'Mover-se em Silêncio': 0,
            'Esconder-se nas Sombras': 0,
            'Ouvir Ruídos': 0,
            'Escalar Muros': -10,
            'Decifrar Linguagens': -5,
            'Ataque pelas Costas': '',
            'Gíria dos ladrões': '',
            'Usar Pergaminhos': 0,
            'Identificar Item Mágico': 0
          }
        },
        "Elfo": {
          "Força": { minimo: 3, maximo: 18 },
          "Destreza": { minimo: 6, maximo: 18 },
          "Constituição": { minimo: 7, maximo: 18 },
          "Inteligência": { minimo: 8, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 8, maximo: 18 },
          ajustes: { "Destreza": 1, "Constituição": -1 },
          detalhes: [
            'Elfos têm 90% de proteção contra magias relacionadas ao sono e magias de Encantar.',
            'Quando utilizam um arco de qualquer tipo (mas não bestas) ou quando empregam espadas (curtas ou longas) os elfos ganham um bônus de +1 em suas jogadas de ataque.',
            'Um elfo pode obter bônus de Surpresa contra seus oponentes, mas somente se não estiver usando armadura de metal. Mesmo assim, o elfo precisa estar sozinho, ou num grupo formado só de elfos ou halflings (que também não podem usar armaduras de metal), ou, no mínimo, a 30 metros de seus companheiros para ganhar o bônus. Se o elfo cumprir essas condições, os oponentes sofrerão uma penalidade de -4 em testes de Surpresa. Se uma porta ou um obstáculo precisar ser transposto, a penalidade reduz-se para -2.',
            'A infravisão permite aos elfos enxergar a 20 metros no escuro.',
            'Se estiver a 3 mestros, elfos podem localizar (1 em 1d6) portas ocultas (escondidas por uma tela, cortina ou algo parecido).',
            'Se procurar intencionalmente por uma porta secreta (construidas para não serem notadas), o elfo terá uma chance de 1-2 em 1d6 de encontrá-la.',
            'Se procurar intencionalmente por uma porta oculta (escondidas por uma tela, cortina ou algo parecido), o elfo terá uma chance de 1-3 em 1d6 de encontrá-la.'
          ],
          altura: { "Masculino": { minimo: 1.4, maximo: 1.64 }, "Feminino": { minimo: 1.27, maximo: 1.51 }},
          idade: { minimo: 100, maximo: 750 },
          peso: { "Masculino": { minimo: 45, maximo: 61 }, "Feminino": { minimo: 35, maximo: 51 }},
          linguas_importantes: [ "comum", 'élfico' ],
          linguas: [ 'dos gnomos', 'dos halflings', 'dos goblins', 'dos robgoblins', 'dos orcs', 'dos gnolls' ],
          armas_importantes: [ 'Arco Longo Composto', 'Arco Curto Composto', 'Arco Longo', 'Arco Curto', 'Espada Longa', 'Espada Curta' ],
          talentos: {
            'Furtar Bolsos': 5,
            'Abrir Fechaduras': -5,
            'Achar/Desarmar Armadilhas': 0,
            'Mover-se em Silêncio': 5,
            'Esconder-se nas Sombras': 10,
            'Ouvir Ruídos': 5,
            'Escalar Muros': 0,
            'Decifrar Linguagens': 0,
            'Ataque pelas Costas': '',
            'Gíria dos ladrões': '',
            'Usar Pergaminhos': 0,
            'Identificar Item Mágico': 0
          }
        },
        "Gnomo": {
          "Força": { minimo: 6, maximo: 18 },
          "Destreza": { minimo: 3, maximo: 18 },
          "Constituição": { minimo: 8, maximo: 18 },
          "Inteligência": { minimo: 6, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 3, maximo: 18 },
          ajustes: { "Inteligência": 1, "Sabedoria": -1 },
          detalhes: [
            'Possuem um bônus de resistência (+1 para cada 3½ pontos de Constituição) contra ataques de varinhas de condão, bastão mágicos, cajados e outras magias.',
            'Gnomos têm 20% de chance de falhar toda vez que usam itens mágicos, exceto armas, armaduras, escudos, instrumentos de ilusionismo e (se o personagem é um ladrão) instrumentos que concedam ou aumentem os talentos para o roubo. Se falhar, é possível perceber se o item é amaldiçoado.',
            'Em corpo a corpo, o personagem gnomo soma 1 à sua jogada de ataque para acertar kobolds ou goblins.',
            'Quando ogros, trolls, ogros magos, gigantes ou titãs atacam os gnomos, estes monstros precisam subtrair 4 pontos de suas jogadas de ataque.',
            'A infravisão permite aos gnomos enxergar a 20 metros no escuro.',
            'Estando a 3 metros, o gnomo pode detectar (1-5 em 1d6) desnível ou Inclinação numa passagem.',
            'Estando a 3 metros, o gnomo pode detectar (1-7 em 1d10) paredes, teto e piso perigosos.',
            'O gnomo pode determinar (1-3 em 1d6) direção aproximada no subsolo.',
            'O gnomo pode determinar (1-4 em 1d6) profundidade aproximada em relação à superficie.'
          ],
          altura: { "Masculino": { minimo: 0.97, maximo: 1.13 }, "Feminino": { minimo: 0.91, maximo: 1.07 }},
          idade: { minimo: 60, maximo: 500 },
          peso: { "Masculino": { minimo: 36, maximo: 56 }, "Feminino": { minimo: 34, maximo: 54 }},
          linguas_importantes: [ "comum", "dos gnomos" ],
          linguas: [ "dos anões", "dos halflings", "dos goblins", "dos kobolds", "linguagem simples dos mamíferos que vivem em tocas (esquilos terrestres, texugos, musaranhos, doninhas, etc.)" ],
          armas_importantes: [],
          talentos: {
            'Furtar Bolsos': 0,
            'Abrir Fechaduras': 5,
            'Achar/Desarmar Armadilhas': 10,
            'Mover-se em Silêncio': 5,
            'Esconder-se nas Sombras': 5,
            'Ouvir Ruídos': 10,
            'Escalar Muros': -15,
            'Decifrar Linguagens': 0,
            'Ataque pelas Costas': '',
            'Gíria dos ladrões': '',
            'Usar Pergaminhos': 0,
            'Identificar Item Mágico': 0
          }
        },
        "Meio-Elfo": {
          "Força": { minimo: 3, maximo: 18 },
          "Destreza": { minimo: 6, maximo: 18 },
          "Constituição": { minimo: 6, maximo: 18 },
          "Inteligência": { minimo: 4, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 3, maximo: 18 },
          ajustes: {},
          detalhes: [
            'Meio-elfos tem 30% de proteção contra Sono e magias de Encantar.',
            'A infravisão dos meio-elfos permite-lhes enxergar a 20 metros na escuridão.',
            'Estar a 3 metros de distância de uma porta oculta (escondida por cortinas, etc.) dá ao meio-eito uma chance em seis (1 em 1d6) de localizá-la.',
            'Ao se esforçar para descobrir, ele terá uma chance em três (1-2 em 1d6) de localizar uma porta secreta (construida para ser indetectável) e uma chance em duas (1-3 em 1d6) de encontrar uma porta oculta (escondida por cortinas, etc.).'
          ],
          altura: { "Masculino": { minimo: 1.52, maximo: 1.82 }, "Feminino": { minimo: 1.47, maximo: 1.77 }},
          idade: { minimo: 15, maximo: 185 },
          peso: { "Masculino": { minimo: 55, maximo: 73 }, "Feminino": { minimo: 42, maximo: 60 }},
          linguas_importantes: [ "comum", "élfico" ],
          linguas: [ "dos gnomos", "dos halflings", "dos goblins", "dos hobgloblins", "dos orcs", "dos gnolls" ],
          armas_importantes: [],
          talentos: {
            'Furtar Bolsos': 10,
            'Abrir Fechaduras': 0,
            'Achar/Desarmar Armadilhas': 0,
            'Mover-se em Silêncio': 0,
            'Esconder-se nas Sombras': 5,
            'Ouvir Ruídos': 0,
            'Escalar Muros': 0,
            'Decifrar Linguagens': 0,
            'Ataque pelas Costas': '',
            'Gíria dos ladrões': '',
            'Usar Pergaminhos': 0,
            'Identificar Item Mágico': 0
          }
        },
        "Halfling": {
          "Força": { minimo: 7, maximo: 18 },
          "Destreza": { minimo: 7, maximo: 18 },
          "Constituição": { minimo: 10, maximo: 18 },
          "Inteligência": { minimo: 6, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 17 },
          "Carisma": { minimo: 3, maximo: 18 },
          ajustes: { "Destreza": 1, "Força": -1 },
          detalhes: [
            'Halflings não jogam os dados para obter Força Extraordinária.',
            'Halflings têm uma grande resistência à magia. Para cada 33½  pontos de Constituição, o personagem ganha um bônus de resistência de +1 contra varinhas de condão, bastões, cajados e magias.',
            'Possuem resistência contra venenos. Seus testes de resistência contra veneno possuem bônus +1 para cada 3½ pontos de Constituição.',
            'Halflings ganham um bônus de +l em suas jogadas de ataque sempre que estiverem usando armas de arremesso e fundas.',
            'Um halfling pode obter bônus de Surpresa contra seus oponentes, mas somente se não estiver usando armadura de metal. Mesmo assim, o halfling precisa estar sozinho, ou num grupo formado só de elfos ou halflings (que também não podem usar armaduras de metal), ou, no mínimo, a 30 metros de seus companheiros para ganhar o bônus. Se o halfling cumprir essas condições, os oponentes sofrerão uma penalidade de -4 em testes de Surpresa. Se uma porta ou um obstáculo precisar ser transposto, a penalidade reduz-se para -2.',
          ],
          altura: { "Masculino": { minimo: 0.81, maximo: 1.21 }, "Feminino": { minimo: 0.76, maximo: 1.16 }},
          idade: { minimo: 20, maximo: 200 },
          peso: { "Masculino": { minimo: 26, maximo: 46 }, "Feminino": { minimo: 24, maximo: 44 }},
          linguas_importantes: [ "comum", "dos halflings" ],
          linguas: [ "dos anões", "élfico", "dos gnomos", "dos goblins", "dos orcs" ],
          armas_importantes: [ 'Funda', 'Dardo', 'Arco Curto', 'Zarabatana' ],
          talentos: {
            'Furtar Bolsos': 5,
            'Abrir Fechaduras': 5,
            'Achar/Desarmar Armadilhas': 5,
            'Mover-se em Silêncio': 10,
            'Esconder-se nas Sombras': 15,
            'Ouvir Ruídos': 5,
            'Escalar Muros': -15,
            'Decifrar Linguagens': -5,
            'Ataque pelas Costas': '',
            'Gíria dos ladrões': '',
            'Usar Pergaminhos': 0,
            'Identificar Item Mágico': 0
          }
        }
      };

      const TENDENCIAS = [
        "Justo (bom e leal)",
        "Ordeiro (neutro e leal)",
        "Vil (maligno e leal)",
        "Bondoso (bom e neutro)",
        "Neutro",
        "Egoista (neutro e maligno)",
        "Honrado (caótico e bom)",
        "Inconstante (neutro e caótico)",
        "Cruel (caótico e maligno)"
      ];

      const ESCUDOS = [
        { nome: 'Escudo de Corpo', ca: 1, preco: { quantidade: 10, moeda: 'po' }, peso: 7.5, ataques_por_rodada: 0, detalhes: [ "O Escudo de Corpo fornece +1 de Categoria de Armadura para ataques à distância." ] },
        { nome: 'Broquei (escudo)', ca: 1, preco: { quantidade: 1, moeda: 'po' }, peso: 1.5, ataques_por_rodada: 1, detalhes: [] },
        { nome: 'Escudo Médio', ca: 1, preco: { quantidade: 7, moeda: 'po' }, peso: 5, ataques_por_rodada: 0, detalhes: [] },
        { nome: 'Escudo Pequeno', ca: 1, preco: { quantidade: 3, moeda: 'po' }, peso: 2.5, ataques_por_rodada: 2, detalhes: [] }
      ];

      const ARMADURAS = [
        { nome: 'Corselete de Couro Simples', ca: 8, preco: { quantidade: 5, moeda: 'po' }, peso: 7.5 },
        { nome: 'Corselete de Couro Acolchoado', ca: 8, preco: { quantidade: 4, moeda: 'po' }, peso: 5 },
        { nome: 'Corselete de Couro Batido', ca: 7, preco: { quantidade: 20, moeda: 'po' }, peso: 12.5 },
        { nome: 'Loriga', ca: 7, preco: { quantidade: 100, moeda: 'po' }, peso: 15 },
        { nome: 'Brigandina', ca: 6, preco: { quantidade: 120, moeda: 'po' }, peso: 17.5 },
        { nome: 'Brunea', ca: 6, preco: { quantidade: 120, moeda: 'po' }, peso: 20 },
        { nome: 'Gibão de Peles', ca: 6, preco: { quantidade: 15, moeda: 'po' }, peso: 15 },
        { nome: 'Cota de Malha', ca: 5, preco: { quantidade: 75, moeda: 'po' }, peso: 20 },
        { nome: 'Cota de Malha Élfica', ca: 5, preco: { quantidade: 200, moeda: 'po' }, peso: 10 },
        { nome: 'Cota de Talas', ca: 4, preco: { quantidade: 80, moeda: 'po' }, peso: 20 },
        { nome: 'Loriga Segmentada', ca: 4, preco: { quantidade: 200, moeda: 'po' }, peso: 17.5 },
        { nome: 'Armadura de Bronze', ca: 4, preco: { quantidade: 400 , moeda: 'po' }, peso: 22.5 },
        { nome: 'Armadura Simples', ca: 3, preco: { quantidade: 600, moeda: 'po' }, peso: 25 },
        { nome: 'Armadura de Batalha', ca: 2, preco: { quantidade: 2000, moeda: 'po' }, peso: 30 },
        { nome: 'Armadura Completa', ca: 1, preco: { quantidade: 4000, moeda: 'po' }, peso: 35 },
        { nome: 'Elmo Grande', ca: 0, preco: { quantidade: 30, moeda: 'po' }, peso: 5 },
        { nome: 'Basinet', ca: 0, preco: { quantidade: 8, moeda: 'po' }, peso: 2.5 }
      ];

      const MISSEIS = {
        "Dardo Farpado": { quantidade: 20, preco: { quantidade: 20, moeda: 'pp' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 0, dano_p: '1d3', dano_mg: '1d3', cadencia: '2/1' },
        "Dardo Agulha": { quantidade: 20, preco: { quantidade: 40, moeda: 'pc' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 0, dano_p: '1', dano_mg: '1', cadencia: '2/1' },
        "Flecha de Caça": { quantidade: 20, preco: { quantidade: 5, moeda: 'pp' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 0, dano_p: '1d6', dano_mg: '1d6', cadencia: '2/1' },
        "Flecha da Guerra": { quantidade: 20, preco: { quantidade: 10, moeda: 'pp' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 0, dano_p: '1d8', dano_mg: '1d8', cadencia: '2/1' },
        "Quadrelo de Mão": { quantidade: 20, preco: { quantidade: 20, moeda: 'po' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 0, dano_p: '1d3', dano_mg: '1d2', cadencia: '1/1' },
        "Quadrelo Grande": { quantidade: 20, preco: { quantidade: 40, moeda: 'pp' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 0, dano_p: '1d4+1', dano_mg: '1d6+1', cadencia: '1/1' },
        "Quadrelo Pequeno": { quantidade: 20, preco: { quantidade: 20, moeda: 'pp' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 0, dano_p: '1d4', dano_mg: '1d4', cadencia: '1/2' },
        "Chumbo de Funda": { quantidade: 20, preco: { quantidade: 20, moeda: 'pc' }, peso: 0.25, tamanho: 'Pequeno', tipo: 'Concussão', velocidade: 0, dano_p: '1d4+1', dano_mg: '1d6+1', cadencia: '2/1' },
        "Pedra de Funda": { quantidade: 20, preco: { quantidade: 0, moeda: 'po' }, peso: 0.25, tamanho: 'Pequeno', tipo: 'Concussão', velocidade: 4, dano_p: '1d4', dano_mg: '1d4', cadencia: '2/1' }
      };

      const ARMAS = {
        "Arcabuz": { preco: { quantidade: 500, moeda: 'po' }, peso: 5, tamanho: 'Médio', tipo: 'Perfurante', velocidade: 15, dano_p: '1d10', dano_mg: '1d10', dano: 10, detalhes: [] },
        "Machado de Guerra": { preco: { quantidade: 5, moeda: 'po' }, peso: 3.5, tamanho: 'Médio', tipo: 'Cortante', velocidade: 7, dano_p: '1d8', dano_mg: '1d8', dano: 8, detalhes: [] },
        "Zarabatana": { preco: { quantidade: 5, moeda: 'po' }, peso: 1, tamanho: 'Grande', tipo: '', velocidade: 5, dano_p: '', dano_mg: '', dano: 3, detalhes: [] },
        "Arco Longo Composto": { preco: { quantidade: 100, moeda: 'po' }, peso: 1.5, tamanho: 'Grande', tipo: '', velocidade: 7, dano_p: '', dano_mg: '', dano: 8, detalhes: [] },
        "Arco Curto Composto": { preco: { quantidade: 75, moeda: 'po' }, peso: 1, tamanho: 'Médio', tipo: '', velocidade: 6, dano_p: '', dano_mg: '', dano: 6, detalhes: [] },
        "Arco Longo": { preco: { quantidade: 75, moeda: 'po' }, peso: 1.5, tamanho: 'Grande', tipo: '', velocidade: 8, dano_p: '', dano_mg: '', dano: 8, detalhes: [] },
        "Arco Curto": { preco: { quantidade: 30, moeda: 'po' }, peso: 1, tamanho: 'Médio', tipo: '', velocidade: 7, dano_p: '', dano_mg: '', dano: 6, detalhes: [] },
        "Clava": { preco: { quantidade: 0, moeda: 'po' }, peso: 1.5, tamanho: 'Médio', tipo: 'Concussão', velocidade: 4, dano_p: '1d6', dano_mg: '1d3', dano: 3, detalhes: [] },
        "Besta de Mão": { preco: { quantidade: 300, moeda: 'po' }, peso: 1.5, tamanho: 'Pequeno', tipo: '', velocidade: 5, dano_p: '', dano_mg: '', dano: 2, detalhes: [] },
        "Besta Pesada": { preco: { quantidade: 50, moeda: 'po' }, peso: 7, tamanho: 'Médio', tipo: '', velocidade: 10, dano_p: '', dano_mg: '', dano: 7, detalhes: [] },
        "Besta Leve": { preco: { quantidade: 35, moeda: 'po' }, peso: 3.5, tamanho: 'Médio', tipo: '', velocidade: 7, dano_p: '', dano_mg: '', dano: 4, detalhes: [] },
        "Adaga": { preco: { quantidade: 2, moeda: 'po' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 2, dano_p: '1d4', dano_mg: '1d3', dano: 3, detalhes: [] },
        "Punhal": { preco: { quantidade: 2, moeda: 'po' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 2, dano_p: '1d4', dano_mg: '1d3', dano: 3, detalhes: [] },
        "Dardo": { preco: { quantidade: 5, moeda: 'pp' }, peso: 0.25, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 2, dano_p: '1d3', dano_mg: '1d2', dano: 2, detalhes: [] },
        "Mangual de Infantaria": { preco: { quantidade: 15, moeda: 'po' }, peso: 7.5, tamanho: 'Médio', tipo: 'Concussão', velocidade: 7, dano_p: '1d6+1', dano_mg: '2d4', dano: 8, detalhes: [] },
        "Mangual": { preco: { quantidade: 10, moeda: 'po' }, peso: 5, tamanho: 'Médio', tipo: 'Concussão', velocidade: 7, dano_p: '1d6', dano_mg: '2d4', dano: 8, detalhes: [] },
        "Maça de Infantaria": { preco: { quantidade: 8, moeda: 'po' }, peso: 5, tamanho: 'Médio', tipo: 'Concussão', velocidade: 7, dano_p: '1d6+1', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Maça": { preco: { quantidade: 6, moeda: 'po' }, peso: 4, tamanho: 'Médio', tipo: 'Concussão', velocidade: 7, dano_p: '1d6', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Alvião de Infantaria": { preco: { quantidade: 8, moeda: 'po' }, peso: 3, tamanho: 'Médio', tipo: 'Perfurante', velocidade: 7, dano_p: '1d6+1', dano_mg: '2d4', dano: 8, detalhes: [] },
        "Alvião": { preco: { quantidade: 7, moeda: 'po' }, peso: 3, tamanho: 'Médio', tipo: 'Perfurante', velocidade: 7, dano_p: '1d6', dano_mg: '2d4', dano: 9, detalhes: [] },
        "Machadinha": { preco: { quantidade: 1, moeda: 'po' }, peso: 2.5, tamanho: 'Médio', tipo: 'Cortante', velocidade: 4, dano_p: '1d6', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Arpão": { preco: { quantidade: 20, moeda: 'po' }, peso: 3, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 7, dano_p: '2d4', dano_mg: '2d6', dano: 13, detalhes: [] },
        "Mangual de Cavalaria": { preco: { quantidade: 8, moeda: 'po' }, peso: 2.5, tamanho: 'Médio', tipo: 'Concussão', velocidade: 6, dano_p: '1d4+1', dano_mg: '1d4', dano: 4, detalhes: [] },
        "Maça de Cavalaria": { preco: { quantidade: 5, moeda: 'po' }, peso: 3, tamanho: 'Médio', tipo: 'Concussão', velocidade: 6, dano_p: '1d6', dano_mg: '1d4', dano: 4, detalhes: [] },
        "Alvião de Cavalaria": { preco: { quantidade: 7, moeda: 'po' }, peso: 2, tamanho: 'Médio', tipo: 'Perfurante', velocidade: 5, dano_p: '1d4+1', dano_mg: '1d4', dano: 4, detalhes: [] },
        "Azagaia": { preco: { quantidade: 5, moeda: 'pp' }, peso: 1, tamanho: 'Médio', tipo: 'Perfurante', velocidade: 4, dano_p: '1d6', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Faca": { preco: { quantidade: 5, moeda: 'pp' }, peso: 0.25, tamanho: 'Pequeno', tipo: 'Perfurante/Cortante', velocidade: 2, dano_p: '1d3', dano_mg: '1d2', dano: 2, detalhes: [] },
        "Lança de Cavalaria Pesada": { preco: { quantidade: 15, moeda: 'po' }, peso: 7.5, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 8, dano_p: '1d8+1', dano_mg: '3d6', dano: 20, detalhes: [ "A Lança de Cavalaria Pesada inflige dano duplo quando usada por atacante em montaria." ] },
        "Lança de Cavalaria": { preco: { quantidade: 6, moeda: 'po' }, peso: 2.5, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 6, dano_p: '1d6', dano_mg: '1d8', dano: 8, detalhes: [ "A Lança de Cavalaria Leve inflige dano duplo quando usada por atacante em montaria." ] },
        "Lança de Tornoio": { preco: { quantidade: 20, moeda: 'po' }, peso: 20, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 10, dano_p: '1d3-1', dano_mg: '1d2-1', dano: 1, detalhes: [ "A Lança de Tornoio inflige dano duplo quando usada por atacante em montaria." ] },
        "Lança de Cavalaria Média": { preco: { quantidade: 10, moeda: 'po' }, peso: 5, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 7, dano_p: '1d6+1', dano_mg: '2d6', dano: 13, detalhes: [ "A Lança de Cavalaria Média inflige dano duplo quando usada por atacante em montaria." ] },
        "Aprisionador": { preco: { quantidade: 30, moeda: 'po' }, peso: 4, tamanho: 'Grande', tipo: '', velocidade: 7, dano_p: '', dano_mg: '', dano: 1, detalhes: [ "O Aprisionador pode derrubar um cavaleiro num golpe bem sucedido." ] },
        "Maça-Estrela": { preco: { quantidade: 10, moeda: 'po' }, peso: 6, tamanho: 'Médio', tipo: 'Concussão', velocidade: 7, dano_p: '2d4', dano_mg: '1d6+1', dano: 7, detalhes: [] },
        "Pique": { preco: { quantidade: 5, moeda: 'po' }, peso: 6, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 13, dano_p: '1d6', dano_mg: '1d12', dano: 12, detalhes: [ "O Pique inflige dano duplo quando firmemente presa para receber ataque." ] },
        "Bardiche": { preco: { quantidade: 7, moeda: 'po' }, peso: 6, tamanho: 'Grande', tipo: 'Cortante', velocidade: 9, dano_p: '2d4', dano_mg: '2d6', dano: 13, detalhes: [] },
        "Bec de Corbin": { preco: { quantidade: 8, moeda: 'po' }, peso: 5, tamanho: 'Grande', tipo: 'Perfurante/Concussão', velocidade: 9, dano_p: '1d8', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Bill-Guisarme": { preco: { quantidade: 7, moeda: 'po' }, peso: 7.5, tamanho: 'Grande', tipo: 'Perfurante/Cortante', velocidade: 10, dano_p: '2d4', dano_mg: '1d10', dano: 10, detalhes: [] },
        "Fauchard": { preco: { quantidade: 5, moeda: 'po' }, peso: 3.5, tamanho: 'Grande', tipo: 'Perfurante/Cortante', velocidade: 8, dano_p: '1d6', dano_mg: '1d8', dano: 8, detalhes: [] },
        "Bordona": { preco: { quantidade: 8, moeda: 'po' }, peso: 3.5, tamanho: 'Grande', tipo: 'Perfurante/Cortante', velocidade: 8, dano_p: '1d8', dano_mg: '1d10', dano: 10, detalhes: [] },
        "Glaive": { preco: { quantidade: 6, moeda: 'po' }, peso: 4, tamanho: 'Grande', tipo: 'Cortante', velocidade: 8, dano_p: '1d6', dano_mg: '1d10', dano: 10, detalhes: [ "A Glaive inflige dano duplo se usada contra atacantes de tamanho G ou maiores." ] },
        "Glaive Guisarme": { preco: { quantidade: 10, moeda: 'po' }, peso: 5, tamanho: 'Grande', tipo: 'Perfurante/Cortante', velocidade: 9, dano_p: '2d4', dano_mg: '2d6', dano: 13, detalhes: [ "A Glaive Guisarme inflige dano duplo se usada contra atacantes de tamanho G ou maiores." ] },
        "Guisarme": { preco: { quantidade: 5, moeda: 'po' }, peso: 4, tamanho: 'Grande', tipo: 'Cortante', velocidade: 8, dano_p: '2d4', dano_mg: '1d8', dano: 8, detalhes: [] },
        "Guisarme Voulge": { preco: { quantidade: 8, moeda: 'po' }, peso: 7.5, tamanho: 'Grande', tipo: 'Perfurante/Cortante', velocidade: 10, dano_p: '2d4', dano_mg: '2d4', dano: 9, detalhes: [] },
        "Alabarda": { preco: { quantidade: 10, moeda: 'po' }, peso: 7.5, tamanho: 'Grande', tipo: 'Perfurante/Cortante', velocidade: 9, dano_p: '1d10', dano_mg: '2d6', dano: 13, detalhes: [] },
        "Fauchard Gancho": { preco: { quantidade: 10, moeda: 'po' }, peso: 4, tamanho: 'Grande', tipo: 'Perfurante/Cortante', velocidade: 9, dano_p: '1d4', dano_mg: '1d4', dano: 4, detalhes: [] },
        "Martelo Lucerno": { preco: { quantidade: 7, moeda: 'po' }, peso: 7.5, tamanho: 'Grande', tipo: 'Perfurante/Concussão', velocidade: 9, dano_p: '2d4', dano_mg: '1d6', dano: 6, detalhes: [ "O Martelo Lucerno inflige dano duplo quando firmemente presa para receber ataque." ] },
        "Bidente": { preco: { quantidade: 5, moeda: 'po' }, peso: 3.5, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 7, dano_p: '1d8', dano_mg: '2d4', dano: 9, detalhes: [] },
        "Partisan": { preco: { quantidade: 10, moeda: 'po' }, peso: 4, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 9, dano_p: '1d6', dano_mg: '1d6+1', dano: 7, detalhes: [ "O Partisan inflige dano duplo quando firmemente presa para receber ataque." ] },
        "Ranseur": { preco: { quantidade: 6, moeda: 'po' }, peso: 3.5, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 8, dano_p: '2d4', dano_mg: '2d4', dano: 9, detalhes: [ "O Ranseur inflige dano duplo quando firmemente presa para receber ataque." ] },
        "Spetum": { preco: { quantidade: 5, moeda: 'po' }, peso: 3.5, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 8, dano_p: '1d6+1', dano_mg: '2d6', dano: 13, detalhes: [ "O Spetum inflige dano duplo quando firmemente presa para receber ataque." ] },
        "Voulge": { preco: { quantidade: 5, moeda: 'po' }, peso: 6, tamanho: 'Grande', tipo: 'Cortante', velocidade: 10, dano_p: '2d4', dano_mg: '2d4', dano: 9, detalhes: [] },
        "Bordão": { preco: { quantidade: 0, moeda: 'po' }, peso: 2, tamanho: 'Grande', tipo: 'Concussão', velocidade: 4, dano_p: '1d6', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Açoite": { preco: { quantidade: 1, moeda: 'po' }, peso: 1, tamanho: 'Pequeno', tipo: '', velocidade: 5, dano_p: '1d4', dano_mg: '1d2', dano: 2, detalhes: [] },
        "Foice": { preco: { quantidade: 6, moeda: 'pp' }, peso: 1.5, tamanho: 'Pequeno', tipo: 'Cortante', velocidade: 4, dano_p: '1d4+1', dano_mg: '1d4', dano: 4, detalhes: [] },
        "Funda": { preco: { quantidade: 5, moeda: 'pc' }, peso: 0, tamanho: 'Pequeno', tipo: '', velocidade: 6, dano_p: '', dano_mg: '', dano: 7, detalhes: [] },
        "Lança": { preco: { quantidade: 8, moeda: 'pp' }, peso: 2.5, tamanho: 'Médio', tipo: 'Perfurante', velocidade: 6, dano_p: '1d6', dano_mg: '1d8', dano: 8, detalhes: [] },
        "Cajado-Funda": { preco: { quantidade: 2, moeda: 'pp' }, peso: 1, tamanho: 'Médio', tipo: '', velocidade: 11, dano_p: '', dano_mg: '', dano: 7, detalhes: [] },
        "Espada Bastarda": { preco: { quantidade: 25, moeda: 'po' }, peso: 5, tamanho: 'Médio', tipo: 'Cortante', velocidade: 6, dano_p: '1d8', dano_mg: '1d12', dano: 12, detalhes: [ "Quando usada com duas mãos, a Espada Bastarda possui velocidade 8, dano a personagens P de 2d4 e personagens M ou G de 2d8." ] },
        "Espada Larga": { preco: { quantidade: 10, moeda: 'po' }, peso: 2, tamanho: 'Médio', tipo: 'Cortante', velocidade: 5, dano_p: '2d4', dano_mg: '1d6+1', dano: 7, detalhes: [] },
        "Khopesh": { preco: { quantidade: 10, moeda: 'po' }, peso: 3.5, tamanho: 'Médio', tipo: 'Cortante', velocidade: 9, dano_p: '2d4', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Espada Longa": { preco: { quantidade: 15, moeda: 'po' }, peso: 2, tamanho: 'Médio', tipo: 'Cortante', velocidade: 5, dano_p: '1d8', dano_mg: '1d12', dano: 12, detalhes: [] },
        "Cimitarra": { preco: { quantidade: 15, moeda: 'po' }, peso: 2, tamanho: 'Médio', tipo: 'Cortante', velocidade: 5, dano_p: '1d8', dano_mg: '1d8', dano: 8, detalhes: [] },
        "Espada Curta": { preco: { quantidade: 10, moeda: 'po' }, peso: 1.5, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 3, dano_p: '1d6', dano_mg: '1d8', dano: 8, detalhes: [] },
        "Montante": { preco: { quantidade: 50, moeda: 'po' }, peso: 7.5, tamanho: 'Grande', tipo: 'Cortante', velocidade: 10, dano_p: '1d10', dano_mg: '3d6', dano: 20, detalhes: [] },
        "Tridente": { preco: { quantidade: 15, moeda: 'po' }, peso: 3.5, tamanho: 'Grande', tipo: 'Perfurante', velocidade: 7, dano_p: '1d6+1', dano_mg: '3d4', dano: 14, detalhes: [] },
        "Martelo de Batalha": { preco: { quantidade: 10, moeda: 'po' }, peso: 4, tamanho: 'Médio', tipo: 'Concussão', velocidade: 4, dano_p: '1d6', dano_mg: '1d6+1', dano: 7, detalhes: [] },
        "Martelo": { preco: { quantidade: 1, moeda: 'po' }, peso: 2, tamanho: 'Médio', tipo: 'Concussão', velocidade: 3, dano_p: '1d4', dano_mg: '1d4', dano: 4, detalhes: [] },
        "Chicote": { preco: { quantidade: 1, moeda: 'pp' }, peso: 1, tamanho: 'Médio', tipo: '', velocidade: 8, dano_p: '1d2', dano_mg: '1', dano: 1, detalhes: [] },
        "Rapieira": { preco: { quantidade: 10, moeda: 'po' }, peso: 1.5, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 3, dano_p: '1d6', dano_mg: '1d8', dano: 8, detalhes: [] },
        "Flamberge": { preco: { quantidade: 10, moeda: 'po' }, peso: 2, tamanho: 'Médio', tipo: 'Cortante', velocidade: 5, dano_p: '2d4', dano_mg: '1d6+1', dano: 7, detalhes: [] },
        "Gládio": { preco: { quantidade: 12, moeda: 'po' }, peso: 1.5, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 3, dano_p: '1d6', dano_mg: '1d6+1', dano: 7, detalhes: [] },
        "Falchion": { preco: { quantidade: 12, moeda: 'po' }, peso: 1, tamanho: 'Pequeno', tipo: 'Cortante', velocidade: 3, dano_p: '1d4', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Alfange": { preco: { quantidade: 10, moeda: 'po' }, peso: 3.5, tamanho: 'Médio', tipo: 'Cortante', velocidade: 9, dano_p: '2d4', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Claymore": { preco: { quantidade: 50, moeda: 'po' }, peso: 7.5, tamanho: 'Grande', tipo: 'Cortante', velocidade: 10, dano_p: '1d10', dano_mg: '3d6', dano: 20, detalhes: [] },
        "Machete": { preco: { quantidade: 5, moeda: 'po' }, peso: 1, tamanho: 'Pequeno', tipo: 'Cortante', velocidade: 2, dano_p: '1d4', dano_mg: '1d4+1', dano: 5, detalhes: [] },
        "Sabre": { preco: { quantidade: 10, moeda: 'po' }, peso: 3.5, tamanho: 'Médio', tipo: 'Cortante', velocidade: 9, dano_p: '2d4', dano_mg: '1d6', dano: 6, detalhes: [] },
        "Zweihander": { preco: { quantidade: 25, moeda: 'po' }, peso: 5, tamanho: 'Médio', tipo: 'Cortante', velocidade: 6, dano_p: '1d8', dano_mg: '1d12', dano: 12, detalhes: [ "Quando usada com duas mãos, a Zweihander possui velocidade 8, dano a personagens P de 2d4 e personagens M ou G de 2d8." ] },
        "Wakizashi": { preco: { quantidade: 20, moeda: 'po' }, peso: 1, tamanho: 'Pequeno', tipo: 'Cortante', velocidade: 2, dano_p: '1d6+1', dano_mg: '1d8+1', dano: 9, detalhes: [] },
        "Katana": { preco: { quantidade: 25, moeda: 'po' }, peso: 2, tamanho: 'Médio', tipo: 'Cortante', velocidade: 4, dano_p: '1d8+1', dano_mg: '1d12+1', dano: 13, detalhes: [] },
        "Tachi": { preco: { quantidade: 15, moeda: 'po' }, peso: 1.5, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 3, dano_p: '1d6', dano_mg: '1d8', dano: 8, detalhes: [] },
        "Tanto": { preco: { quantidade: 10, moeda: 'pp' }, peso: 0.25, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 2, dano_p: '1d3', dano_mg: '1d3', dano: 3, detalhes: [] },
        "Shuriken": { preco: { quantidade: 5, moeda: 'pp' }, peso: 0.25, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 2, dano_p: '1d2', dano_mg: '1d2', dano: 2, detalhes: [] },
        "Corrente": { preco: { quantidade: 1, moeda: 'pp' }, peso: 1, tamanho: 'Médio', tipo: '', velocidade: 8, dano_p: '1d2', dano_mg: '1', dano: 1, detalhes: [] },
        "Cajado": { preco: { quantidade: 10, moeda: 'pp' }, peso: 1, tamanho: 'Grande', tipo: 'Concussão', velocidade: 3, dano_p: '1d4', dano_mg: '1d4', dano: 4, detalhes: [] },
        "Cetro": { preco: { quantidade: 1, moeda: 'po' }, peso: 1, tamanho: 'Grande', tipo: 'Concussão', velocidade: 5, dano_p: '1d4', dano_mg: '1d4+1', dano: 5, detalhes: [] },
        "Cajado Pequeno": { preco: { quantidade: 5, moeda: 'pp' }, peso: 1, tamanho: 'Médio', tipo: 'Concussão', velocidade: 3, dano_p: '1d3', dano_mg: '1d3', dano: 3, detalhes: [] },
        "Bastão": { preco: { quantidade: 5, moeda: 'pp' }, peso: 1, tamanho: 'Médio', tipo: 'Concussão', velocidade: 3, dano_p: '1d3', dano_mg: '1d3', dano: 3, detalhes: [] },
        "Laço": { preco: { quantidade: 1, moeda: 'pp' }, peso: 1, tamanho: 'Médio', tipo: '', velocidade: 8, dano_p: '1d2', dano_mg: '1', dano: 1, detalhes: [] }
      };

      const ESCUDOS_DRUIDA = [
        ESCUDOS[1],
        ESCUDOS[2],
        ESCUDOS[3]
      ];

      const ESCUDOS_LADRAO = [
        ESCUDOS[1],
        ESCUDOS[2],
        ESCUDOS[3]
      ];

      const ARMADURAS_DRUIDA = [
        ARMADURAS[0],
        ARMADURAS[1],
        ARMADURAS[2],
        ARMADURAS[6]
      ];

      const ARMADURAS_LADRAO = [
        ARMADURAS[0],
        ARMADURAS[1],
        ARMADURAS[2],
        ARMADURAS[8]
      ];

      const ARMADURAS_BARDO = [
        ARMADURAS[0],
        ARMADURAS[1],
        ARMADURAS[2],
        ARMADURAS[3],
        ARMADURAS[4],
        ARMADURAS[5],
        ARMADURAS[6],
        ARMADURAS[7],
        ARMADURAS[8]
      ];

      const CLASSES = {
        "Guerreiro": {
          "Grupo": "Homem de Armas",
          "Habilidades Exigidas": { "Força": 9, "Destreza": 0, "Constituição": 0, "Inteligência": 0, "Sabedoria": 0, "Carisma": 0 },
          "Pré-Requisitos": [ "Força" ],
          "Raças Permitidas": [ "Humano", "Anão", "Elfo", "Gnomo", "Meio-Elfo", "Halfling" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 10,
          detalhes: [
            'Um guerreiro com pontuação de 16 ou mais na Força ganha um bônus de 10% para sua experiência em pontos.',
            'Como um mestre dos diferentes tipos de armamento, o guerreiro é o único capaz de ter uma especialízação em armas.'
          ],
          armas: [],
          armaduras: ARMADURAS,
          escudos: ESCUDOS
        },
        "Paladino": {
          "Grupo": "Homem de Armas",
          "Habilidades Exigidas": { "Força": 12, "Destreza": 0, "Constituição": 9, "Inteligência": 0, "Sabedoria": 13, "Carisma": 17 },
          "Pré-Requisitos": [ "Força", "Carisma" ],
          "Raças Permitidas": [ "Humano" ],
          tendencias: [ "Justo (bom e leal)" ],
          dado_de_vida: 10,
          detalhes: [
            'Um paladino que tenha valores de Força e Carisma iguais ou maiores que 16 ganha um bônus de 10% em sua experiência em pontos.',
            'O paladino deve ter e manter tendência justa. Um paladino que mude sua tendência, deliberada ou inadvertidamente, perde todos os poderes especiais.',
            'Um paladino pode detectar uma intenção maligna até a 20 metros de distância, ao se concentrar numa direção específica. Duração: uma rodada. Este poder detecta monstros e personagens malignos.',
            'Um paladino recebe um bônus de +2 em todos os testes de resistência.',
            'Um paladino é imune a todas as formas de doença',
            'Um paladino pode curar pela imposição das mãos. O paladino restaura 2 pontos de vida por nível de experiência. Ele pode curar-se ou a outra pessoa, mas somente uma vez ao dia.',
            'Um paladino pode curar doenças de todos os tipos. Isto só pode ser feito uma vez por semana para cada cinco níveis de experiência.',
            'Um paladino é envolto por uma aura de proteção de 3 metros de raio. Neste espaço, todas as criaturas convocadas por magia, especialmente as malignas, sofrem uma penalidade de -1 em suas jogadas de ataque. Criaturas afetadas por essa aura podem detectar facilmente sua origem, mesmo que o paladino esteja disfarçado.',
            'Um paladino usando uma espada sagrada projeta um círculo de poder de 20 metros de diâmetro quando a espada é desembainhada e erguida. Esse poder neutraliza magias hostis de círculos menores ou iguais ao nível de experiência do paladino.',
            'Um paladino pode usar o poder de sua fé contra mortos-vivos e demônios a partir do 3º nível. Ele afeta esses monstros da mesma forma que um clérigo dois níveis abaixo.',
            'Um paladino pode chamar seu cavalo de batalha a partir do 4º nível.',
            'Um paladino pode lançar magias divinas uma vez que tenha atingido o 9º nível. Ele pode utilizar somente magias das esferas de combate, adivinhação, cura e proteção.',
            'Diferente dos sacerdotes, o paladino não recebe magias extras por um valor alto de Sabedoria.',
            'Este personagem não pode lançar magias de pergaminhos clericais ou druídicos, nem fazer uso de itens mágicos exclusivos de sacerdotes, arcanos ou ladinos.',
            'Um paladino não pode possuir mais de 10 itens mágicos. Além disso, entre os objetos mágicos do paladino não pode haver mais do que uma armadura, um escudo e quatro armas (flechas e dardos não contam), além de outros quatro itens diversos.',
            'Um paladino nunca acumula riquezas.',
            'Um paladino deve pagar o dízimo para a instituição religiosa de tendência justa à qual ele serve. O dízimo representa 10% da renda do paladino.',
            'Um paladino não forma um grupo de seguidores ao alcançar o 9º nível ou construir um castelo. Todavia, ele pode contratar soldados e especialistas, embora esses homens devam ter tendência justa.',
            'Um paladino só pode empregar aliados justos'
          ],
          armas: [],
          armaduras: ARMADURAS,
          escudos: ESCUDOS
        },
        "Ranger": {
          "Grupo": "Homem de Armas",
          "Habilidades Exigidas": { "Força": 13, "Destreza": 13, "Constituição": 14, "Inteligência": 0, "Sabedoria": 14, "Carisma": 0 },
          "Pré-Requisitos": [ "Força", "Destreza", "Sabedoria" ],
          "Raças Permitidas": [ "Humano", "Elfo", "Meio-Elfo" ],
          tendencias: [
            "Justo (bom e leal)",
            "Ordeiro (neutro e leal)",
            "Vil (maligno e leal)",
            "Neutro",
            "Honrado (caótico e bom)"
          ],
          dado_de_vida: 10,
          detalhes: [
            'Um ranger que tenha valores de Força, Destreza e Sabedoria iguais ou maiores que 16 ganha um bônus de 10% na experiência em pontos.',
            'Quando estiver vestindo um corselete de couro batido (ou alguma armadura ainda mais leve) um ranger poderá lutar com ambas as mãos sem sofrer penalidades em sua jogada de ataque.',
            'O ranger possui a perícia rastrear. Além disso, este talento melhora em +1 a cada três níveis',
            'Enquanto estiver usando o corselete de couro batido ou uma armadura mais leve, o ranger pode mover-se silenciosamente e ocultar-se nas sombras. Quando o ranger tenta utilizar esses talentos em ambientes artificiais (numa cripta abafada ou nas ruas da cidade), a chance de sucesso diminui pela metade.',
            'Antes de avançar para o 2º nível, todo ranger deve selecionar uma espécie inimiga (bônus de +4 em sua jogada de ataque; penalidade de -4 nos testes de reação em encontros com essa criatura).',
            'Rangers sabem lídar com criaturas treinadas ou treinadas.',
            'Quando lida com animais domésticos ou pacíficos. o ranger pode se aproximar da criatura e fazer amizade instantaneamente.',
            'Quando o ranger aproxima-se de animais selvagens, ou de animais treinados para atacar, a criatura deve fazer um teste de Resistência contra Bastões contra bastões para resistir à oferta de amizade do ranger. O personagem impõe uma penalidade de -1 ao resuldado para cada três níveis de experiência.',
            'Um ranger pode aprender magias divinas, mas somente aquelas das esferas animal e vegetal, e apenas a partir do 8º nível.',
            'O ranger não ganha magias extras graças a um alto valor de Sabedoria, nem está apto a usar pergaminhos clericais ou itens mágicos, a não ser que a especificação do item diga o contrário.',
            'Rangers podem construir castelos ou fortalezas, mas não ganham seguidores por isso.',
            'No 10º nível, um ranger atrai 2d6 seguidores. Esses seguidores podem ser seres humanos normais, mas geralmente são animais ou estranhos habitantes do lugar.',
            'Um ranger sempre deve manter uma tendência inclinada para o bem.',
            'Rangers tendem a ser figuras solitárias, sempre com o pé na estrada. Eles não podem ter aliados, empregados, mercenários ou mesmo servos até que alcancem o 8º nível.'
          ],
          armas: [],
          armaduras: ARMADURAS,
          escudos: ESCUDOS
        },
        "Mago": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 0, "Inteligência": 9, "Sabedoria": 0, "Carisma": 0 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Elfo", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um mago com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Abjurante": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 0, "Inteligência": 9, "Sabedoria": 15, "Carisma": 0 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Abjurante (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            'Um especialista ganha uma magia adicional por círculo, desde que seja de sua escola de especialização.',
            'Os especialistas recebem um bônus de +1 nos testes de resistência contra magias dessa escola que sejam lançadas por outros arcanos. Do mesmo modo, outros personagens sofrem uma penalidade de -1 nos testes de resistência contra um especialista que esteja lançando magias de sua escola.',
            'Especialistas recebem um bônus de +15% quando tentam aprender magias de sua própria escola, e uma penalidade de -15% na tentativa de aprender magias de outras escolas.',
            'Toda vez que um especialista atinge um novo círculo, ele automaticamente recebe uma magia de sua escola. Não é necessário fazer um teste para verificar se o personagem consegue aprendê-la.',
            'Quando um arcano especialista tenta criar uma nova magia dentro de sua própria escola de especialização, o Mestre, ao determinar a dificuldade da tarefa, deve considerar a nova magia como sendo de um círculo interior ao real.',
            'Um Abjurante não pode aprender magias das escolas de Alteração e Ilusão.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Conjurador": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 15, "Inteligência": 9, "Sabedoria": 0, "Carisma": 0 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Conjurador (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            'Um especialista ganha uma magia adicional por círculo, desde que seja de sua escola de especialização.',
            'Os especialistas recebem um bônus de +1 nos testes de resistência contra magias dessa escola que sejam lançadas por outros arcanos. Do mesmo modo, outros personagens sofrem uma penalidade de -1 nos testes de resistência contra um especialista que esteja lançando magias de sua escola.',
            'Especialistas recebem um bônus de +15% quando tentam aprender magias de sua própria escola, e uma penalidade de -15% na tentativa de aprender magias de outras escolas.',
            'Toda vez que um especialista atinge um novo círculo, ele automaticamente recebe uma magia de sua escola. Não é necessário fazer um teste para verificar se o personagem consegue aprendê-la.',
            'Quando um arcano especialista tenta criar uma nova magia dentro de sua própria escola de especialização, o Mestre, ao determinar a dificuldade da tarefa, deve considerar a nova magia como sendo de um círculo interior ao real.',
            'Um Conjurador não pode aprender magias das escolas de Profecia e Invocação'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Adivinho": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 0, "Inteligência": 9, "Sabedoria": 16, "Carisma": 0 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Elfo", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Adivinho (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            'Um especialista ganha uma magia adicional por círculo, desde que seja de sua escola de especialização.',
            'Os especialistas recebem um bônus de +1 nos testes de resistência contra magias dessa escola que sejam lançadas por outros arcanos. Do mesmo modo, outros personagens sofrem uma penalidade de -1 nos testes de resistência contra um especialista que esteja lançando magias de sua escola.',
            'Especialistas recebem um bônus de +15% quando tentam aprender magias de sua própria escola, e uma penalidade de -15% na tentativa de aprender magias de outras escolas.',
            'Toda vez que um especialista atinge um novo círculo, ele automaticamente recebe uma magia de sua escola. Não é necessário fazer um teste para verificar se o personagem consegue aprendê-la.',
            'Quando um arcano especialista tenta criar uma nova magia dentro de sua própria escola de especialização, o Mestre, ao determinar a dificuldade da tarefa, deve considerar a nova magia como sendo de um círculo interior ao real.',
            'Um Adivinho não pode aprender magias da escola de Conjuração/Convocação'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Feiticeiro": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 0, "Inteligência": 9, "Sabedoria": 0, "Carisma": 16 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Elfo", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Feiticeiro (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            'Um especialista ganha uma magia adicional por círculo, desde que seja de sua escola de especialização.',
            'Os especialistas recebem um bônus de +1 nos testes de resistência contra magias dessa escola que sejam lançadas por outros arcanos. Do mesmo modo, outros personagens sofrem uma penalidade de -1 nos testes de resistência contra um especialista que esteja lançando magias de sua escola.',
            'Especialistas recebem um bônus de +15% quando tentam aprender magias de sua própria escola, e uma penalidade de -15% na tentativa de aprender magias de outras escolas.',
            'Toda vez que um especialista atinge um novo círculo, ele automaticamente recebe uma magia de sua escola. Não é necessário fazer um teste para verificar se o personagem consegue aprendê-la.',
            'Quando um arcano especialista tenta criar uma nova magia dentro de sua própria escola de especialização, o Mestre, ao determinar a dificuldade da tarefa, deve considerar a nova magia como sendo de um círculo interior ao real.',
            'Um Feiticeiro não pode aprender magias das escolas de Invocação/Evocação e Necromancia'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Ilusionista": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 16, "Constituição": 0, "Inteligência": 9, "Sabedoria": 0, "Carisma": 0 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Gnomo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Ilusionista (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            'Um especialista ganha uma magia adicional por círculo, desde que seja de sua escola de especialização.',
            'Os especialistas recebem um bônus de +1 nos testes de resistência contra magias dessa escola que sejam lançadas por outros arcanos. Do mesmo modo, outros personagens sofrem uma penalidade de -1 nos testes de resistência contra um especialista que esteja lançando magias de sua escola.',
            'Especialistas recebem um bônus de +15% quando tentam aprender magias de sua própria escola, e uma penalidade de -15% na tentativa de aprender magias de outras escolas.',
            'Toda vez que um especialista atinge um novo círculo, ele automaticamente recebe uma magia de sua escola. Não é necessário fazer um teste para verificar se o personagem consegue aprendê-la.',
            'Quando um arcano especialista tenta criar uma nova magia dentro de sua própria escola de especialização, o Mestre, ao determinar a dificuldade da tarefa, deve considerar a nova magia como sendo de um círculo interior ao real.',
            'Um Ilusionista não pode aprender magias das escolas de Necromancia, Invocação/Evocação e Abjuração'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Invocador": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 16, "Inteligência": 9, "Sabedoria": 0, "Carisma": 0 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Invocador (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            'Um especialista ganha uma magia adicional por círculo, desde que seja de sua escola de especialização.',
            'Os especialistas recebem um bônus de +1 nos testes de resistência contra magias dessa escola que sejam lançadas por outros arcanos. Do mesmo modo, outros personagens sofrem uma penalidade de -1 nos testes de resistência contra um especialista que esteja lançando magias de sua escola.',
            'Especialistas recebem um bônus de +15% quando tentam aprender magias de sua própria escola, e uma penalidade de -15% na tentativa de aprender magias de outras escolas.',
            'Toda vez que um especialista atinge um novo círculo, ele automaticamente recebe uma magia de sua escola. Não é necessário fazer um teste para verificar se o personagem consegue aprendê-la.',
            'Quando um arcano especialista tenta criar uma nova magia dentro de sua própria escola de especialização, o Mestre, ao determinar a dificuldade da tarefa, deve considerar a nova magia como sendo de um círculo interior ao real.',
            'Um Invocador não pode aprender magias das escolas de Encantamento/Feitiço e Conjuração/Convocação'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Necromante": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 0, "Inteligência": 9, "Sabedoria": 16, "Carisma": 0 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Necromante (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            'Um especialista ganha uma magia adicional por círculo, desde que seja de sua escola de especialização.',
            'Os especialistas recebem um bônus de +1 nos testes de resistência contra magias dessa escola que sejam lançadas por outros arcanos. Do mesmo modo, outros personagens sofrem uma penalidade de -1 nos testes de resistência contra um especialista que esteja lançando magias de sua escola.',
            'Especialistas recebem um bônus de +15% quando tentam aprender magias de sua própria escola, e uma penalidade de -15% na tentativa de aprender magias de outras escolas.',
            'Toda vez que um especialista atinge um novo círculo, ele automaticamente recebe uma magia de sua escola. Não é necessário fazer um teste para verificar se o personagem consegue aprendê-la.',
            'Quando um arcano especialista tenta criar uma nova magia dentro de sua própria escola de especialização, o Mestre, ao determinar a dificuldade da tarefa, deve considerar a nova magia como sendo de um círculo interior ao real.',
            'Um Necromante não pode aprender magias das escolas de Ilusão e Encantamento/Feitiço'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Transmutador": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 15, "Constituição": 0, "Inteligência": 9, "Sabedoria": 0, "Carisma": 0 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Transmutador (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            'Um especialista ganha uma magia adicional por círculo, desde que seja de sua escola de especialização.',
            'Os especialistas recebem um bônus de +1 nos testes de resistência contra magias dessa escola que sejam lançadas por outros arcanos. Do mesmo modo, outros personagens sofrem uma penalidade de -1 nos testes de resistência contra um especialista que esteja lançando magias de sua escola.',
            'Especialistas recebem um bônus de +15% quando tentam aprender magias de sua própria escola, e uma penalidade de -15% na tentativa de aprender magias de outras escolas.',
            'Toda vez que um especialista atinge um novo círculo, ele automaticamente recebe uma magia de sua escola. Não é necessário fazer um teste para verificar se o personagem consegue aprendê-la.',
            'Quando um arcano especialista tenta criar uma nova magia dentro de sua própria escola de especialização, o Mestre, ao determinar a dificuldade da tarefa, deve considerar a nova magia como sendo de um círculo interior ao real.',
            'Um Transmutador não pode aprender magias das escolas de Abjuração e Necromancia'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"],
          armaduras: [],
          escudos: []
        },
        "Clérigo": {
          "Grupo": "Sacerdote",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 0, "Inteligência": 0, "Sabedoria": 9, "Carisma": 0 },
          "Pré-Requisitos": [ "Sabedoria" ],
          "Raças Permitidas": [ "Humano", "Anão", "Elfo", "Gnomo", "Meio-Elfo", "Halfling" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 8,
          detalhes: [
            'O clérigo com 16 ou mais de Sabedoria ganha um bônus de 10% em sua experiência.',
            'Um clérigo de um mito específico deve possuir uma tendência aceitável para a divindade',
            'Os sacerdotes ganham um dado de vida de 8 faces por nível, desde o 1º até o 9º. Depois. recebem 2 pontos de vida por nível, e não têm mais direito a bônus de pontos de vida por alta Constituição.',
            'Um sacerdote pode utilizar todas as magias de suas esferas de maior acesso, mas apenas as magias de 1º, 2º e 3º círculos das esferas de acesso menor. Um clérigo tem acesso maior a todas as esferas de influência, exceto Vegetal, Animal, Clima e Elemental (ele tem um acesso menor à esfera Elemental e não pode usar magias das outras três esferas).',
            'Clérigos podem usar qualquer tipo de armadura ou escudo.',
            'Clérigos têm acesso a uma boa quantidade de itens mágicos, incluindo pergaminhos clericais, a maioria das poções e anéis, algumas varinhas e bastões, cajados, armaduras, escudos e as versões mágicas de qualquer arma permitida por sua ordem.',
            'Clérigos comuns, relutantes em derramar sangue ou semear violência, só podem usar armas sem corte, de impacto.',
            'O poder da fé permite que o personagem afugente ou destrua mortos-vivos. Um clérigo maligno pode fazer com que os mortos-vivos obedeçam a seus comandos.',
            'Ao alcançar o 8° nível, o clérigo automaticamente atrai um grupo de seguidores fanaticamente leais, contanto que o personagem tenha estabelecido um local de adoração de bom tamanho.',
            'No 9º nível, o clérigo pode receber autorização oficial para construir uma fortaleza religiosa, seja um mosteiro fortificado ou um convento isolado.'
          ],
          armas: ["Mangual", "Martelo de Batalha", "Açoite", "Chicote", "Alvião", "Aprisionador", "Bordão", "Arco Curto", "Azagaia", "Lança de Cavalaria", "Funda", "Dardo", "Lança", "Clava", "Arpão", "Tridente", "Martelo", "Maça", "Maça-Estrela", "Zarabatana"],
          armaduras: ARMADURAS,
          escudos: ESCUDOS,
          armas_divindade: []
        },
        "Druida": {
          "Grupo": "Sacerdote",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 0, "Constituição": 0, "Inteligência": 0, "Sabedoria": 12, "Carisma": 15 },
          "Pré-Requisitos": [ "Sabedoria", "Carisma" ],
          "Raças Permitidas": [ "Humano", "Meio-Elfo" ],
          tendencias: ["Neutro"],
          dado_de_vida: 8,
          detalhes: [
            'Um druida com pontuação de 16 ou mais em Sabedoria e Carisma ganha um bônus de 10% para sua experiência em pontos.',
            'Os sacerdotes ganham um dado de vida de 8 faces por nível, desde o 1º até o 9º. Depois. recebem 2 pontos de vida por nível, e não têm mais direito a bônus de pontos de vida por alta Constituição.',
            'Diferente do clérigo, o druida pode usar somente armaduras naturais. Exemplo: Corselete de Couro ou Escudos de Madeira, incluindo aqueles com poderes mágicos.',
            'Os Druidas têm maior acesso às seguintes esferas: Todas, Animal, Elemental, Cura, Vegetal e Clima. Eles têm menor acesso à esfera de Adivinhação.',
            'Druidas podem usar todos os itens mágicos normalmente permitidos aos sacerdotes, exceto os textos (livros e pergaminhos), e as armaduras e armas normalmente proibidas à classe.',
            'Um druida recebe um bônus de +2 em todos os testes de resistência contra ataques de fogo ou elétricos.',
            'Todos os druidas podem usar urna linguagem secreta, além de outras línguas normais que tenham aprendido. O vocabulário da língua druídica limita-se a questões relacionadas à natureza e a eventos naturais. Os druidas protegem zelosamente esta língua; é um método infalível para os druidas reconhecerem-se entre si.',
            'Ele identifica plantas, animais, água potável com absoluta precisão após atingir o 3º nível.',
            'Ele passa por áreas de vegetação densa sem deixar rastro e com sua taxa de movimentação normal, a partir do 3º nível.',
            'Ele aprende as línguas das criaturas da mata. Isso inclui centauros, dríades, elfos, faunos, gnomos, nixies, pixies, sprites e entes. O druida pode adquirir uma dessas línguas ao atingir o 3º nível, e mais uma cada vez que avançar um nível acima do 3º (fica a cargo do druida gastar ou não 1 ponto de perícia numa ou mais dessas línguas).',
            'Ele toma-se imune à magias de Encantar lançadas por criaturas da floreste depois que atinge o 7º nível.',
            'Ele ganha 1 habilidade de se metamorfosear em um réptil, ave ou mamífero até três vezes por dia após atingir o 7º nível. Quando o druida assume uma nova forma, ele cura de 1d6x10% de todo o dano que porventura tenha sofrido.',
            'Um Druida não pode usar o poder da fé contra mortos-vivos.',
            'O visco é um importante símbolo sagrado para os druidas, e é um componente necessário (símbolo sagrado) para algumas magias. Para ser realmente eficiente, o visco deve ser colhido sob a luz da lua cheia, com uma foice de prata especialmente feita para este propósito. Visco obtido por outros meios reduz em 50% a eficiência de uma magia, se ela causar dano ou tiver uma área de efeito, e concede ao alvo um bônus de +2 em seu teste de resistência.',
            'Os druidas, como uma classe, não moram permanentemente em castelos, cidades ou vilas. Eles preferem viver em bosques sagrados, onde erguem pequenas cabanas de tronco, pedras ou relva.',
            'No 12º nível, o personagem adquire o título oficial de druida (nível inferior ao 12º são conhecidos como iniciados).',
            'Quando um personagem ascende ao 12° nível, ele ganha três subalternos, cujos níveis dependem da posição do novo druida entre os nove druidas da região. O druida com mais pontos de experiência é servido por três iniciados do 9° nível; o segundo com mais experiência é servido por três iniciados do 8° nível, e assim por diante, até que o druida menos experiente é servido por três iniciados do 1º nível.',
            'Apenas três arquidruidas (13° nível) podem operar na mesma região geográfica. Para tornar-se um arquidruida, um druida do 12° nível deve derrotar um deles ou avançar para essa posição, caso ela esteja vaga. Cada um dos três arquidruidas é servido por três iniciados do 10º nível.',
            'Dentre os arquidruidas de todo o mundo, três são escolhidos para servir ao Druida Venerável.',
            'Há apenas um grande druida (14º nível) em uma área geográfica. Ele, por sua vez, ganhou sua posição derrotando o grande druida anterior. O grande druida é servido por três iniciados do 11° nível.',
            'O druida de maior poder é o Druida Venerável (15º nível). Apenas uma pessoa em todo o mundo pode possuir o título de Druida Venerável.',
            'O Druida Venerável conhece seis magias de cada círculo, além de possuir seis círculos de magia adicionais, que podem ser lançados como se fossem uma só, ou várias magias cujos círculos totalizem seis (uma magia do 6º círculo, duas do 3º, seis do 1º, etc).',
            'O Druida Venerável é servido por nove outros druidas que estão sujeitos apenas a ele, e não têm nada a ver com a hierarquia de uma área especlfíca.',
            'Depois do 15º nível, um druida não ganha mais magias (ignore a tabela de progressão de magias de clérigo a partir deste ponto).',
            'No 16º nivel o druida ganha: Imunidade a todos os venenos naturais (venenos vegetais e animais, ingeridos ou injetados, incluindo os venenos de monstros, mas não venenos minerais de qualquer espécie ou gás venenoso)',
            'No 16º nivel o druida ganha: Capacidade de mudar sua aparência à vontade. Cada transformação leva uma rodada para se completar. Um mudança de peso e altura de até 50% é possível, e a idade aparente pode ir da infância à velhice. O corpo e as feições podem espelhar qualquer criatura humana ou humanóide. Tal mudança não é mágica e só pode ser detectada pela Visão da Verdade ou método similar.',
            'No 16º nivel o druida ganha: Impressionante vigor físico para a idade. O druida não é mais alvo dos ajustes de habilidade devido ao envelhecimento.',
            'No 17º nivel o druida ganha: O personagem ganha a capacidade biológica de hibernar. As suas funções corporais diminuem ao ponto dele parecer morto para um observador casual, e o envelhecimento cessa. O druida fica totalmente inconsciente durante a hibernação e desperta numa hora pré-determinada (Eu hibernarei por 20 dias), ou quando houver uma mudança significativa no ambiente (o tempo ficar frio, alguém bater no personagem com um bastão, etc).',
            'No 17º nivel o druida pode também entrar no plano elemental da Terra à vontade. A transferência leva uma rodada para ocorrer. Este poder também fornece meios para a sobrevivência no outro plano, para movimentar-se lá e retornar ao plano Material Primário quando desejar. Ele não confere proteções semelhantes no plano Material.',
            'No 18º nivel o druida ganha o poder de  entrar e sobreviver no plano elemental do Fogo.',
            'No 19º nivel o druida ganha o poder de entrar e sobreviver no plano elemental da Agua.',
            'No 20º nivel o druida ganha o poder entrar e sobreviver no plano elemental do Ar.'
          ],
          armas: ["Clava", "Foice", "Dardo", "Lança", "Adaga", "Cimitarra", "Funda", "Cajado"],
          armaduras: ARMADURAS_DRUIDA,
          escudos: ESCUDOS_DRUIDA
        },
        "Ladrão": {
          "Grupo": "Ladino",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 9, "Constituição": 0, "Inteligência": 0, "Sabedoria": 0, "Carisma": 0 },
          "Pré-Requisitos": [ "Destreza" ],
          "Raças Permitidas": [ "Humano", "Anão", "Elfo", "Gnomo", "Meio-Elfo", "Halfling" ],
          tendencias: [
            "Ordeiro (neutro e leal)",
            "Vil (maligno e leal)",
            "Bondoso (bom e neutro)",
            "Neutro",
            "Egoista (neutro e maligno)",
            "Honrado (caótico e bom)",
            "Inconstante (neutro e caótico)",
            "Cruel (caótico e maligno)"
          ],
          dado_de_vida: 6,
          detalhes: [
            'O ladrão com 16 ou mais de Destreza ganha um bônus de 10% em sua experiência.',
            'Se o ladrão vestir uma armadura que não seja o corselete de couro simples, seus talentos especiais sofrerão penalidades.',
            'Cada vez que o ladrão subir de nível, o jogador ganhará outros 30 pontos percentuais como um bõnus para distribuir aos números básicos dos talentos, sendo que no máximo 15 poderão ser somados a um único item, e nenhum dos talentos pode chegar a mais de 95%, incluindo todos os ajustes feitos por Destreza, raça e armadura.',
            'Uma falha no uso do talento Furtar Bolsos indica que o personagem não obteve o item, mas não significa que a tentativa foi notada pela vítima. Para determinar se isso ocorreu, subtraia o triplo do nlvel da vítima de 100. Se o resultado do lance de dados do ladrão tiver sido maior ou igual a esse número, então a tentalíva de roubo foi notada.',
            'Abrir Fechaduras requer ferramentas. Usar as ferramentas trpicas do ladrão garante as chances normais de sucesso. Usar ferramentas improvisadas (arames, garfos, gravetos, etc.) provoca uma penalida. O Mestre determina a penalidade baseado na situação: de -5 para uma ferramenta improvisada, mas adequada, até -60 por itens desajeitados e inadequados (como um graveto).',
            'O tempo necessário para um arrombamento (Abrir Fechaduras), Achar Armadilhas e Desarmar Armadilhas é de 1d10 rodadas.',
            'O ladrão pode tentar abrir uma fechadura em particular apenas uma vez por nível.',
            'O talento Achar/Desarmar Armadilhas não serve para encontrar tetos que desabam, paredes que deslizam para esmagar a vítima ou outras grandes armadilhas mecânicas similares.',
            'Um ladrão pode procurar por armadilhas em um determinado item uma vez por nível.',
            'Ao usar o taleto Desarmar Armadilhas, se o resultado dos dados ficar entre 96 e 100, o ladrão aciona acidentalmente a armadilha e sofre as conseqüências.',
            'Os ladrões podem tentar Desarmar Armadilhas mágicas, mas suas chances de sucesso são apenas metade da porcentagem normal.',
            'Enquanto utilizar o talento Mover-se em Silêncio, o personagem terá sua movimentação reduzida a 1/3 da normal.',
            'O ladrão não pode Esconder-se nas Sombras enquanto estiver sendo observado.',
            'No 4° nível, o ladrão já teve contato com um número suficiente de linguagens para ser capaz de decifrar a maioria das inscrições não-mágicas com o talento Decifrar Linguagens.',
            'Ao usar o talento Decifrar Linguagens, o nível de compreensão é aproximadamente igual à chance percentual de sucesso na leitura: uma chance de 20% indica que, caso consiga ler o documento, o ladrão compreenderá cerca de 20% do significado.',
            'Apenas um teste de Decifrar Linguagens pode ser feito para um documento em particular por nível.',
            'Quando estiver atacando alguém de surpresa, e pelas costas, o personagem recebe um bônus que aumenta a sua chance de acerto (um modificador de +4, e a anulação dos benefícios de escudo e de Destreza do alvo) e que também amplia o dano causado.',
            'O Ataque pelas Costas multiplica o dano da arma (sem somar força e bônus de armas mágicas) por: x2 nos níveis de 1 a 4; x3 nos níveis de 5 a 8; x4 nos níveis de 9 a 12; e x5 a partir do nível 13. Após multiplicar, soma-se os bônus de Força e arma mágica.',
            'O multiplicador de dano do Ataque pelas Costas só se aplica ao primeiro golpe desferido pelo ladrão, mesmo que ele tenha múltiplos ataques.',
            'A partir do 10º nível, o ladrão ganha uma capacidade limitada de usar pergaminhos, arcanos ou sacerdotais. O personagem tem uma chance de 25% de ler incorretamente o pergaminho.',
            'Quando um ladrão atinge o 10º nível, sua reputação é tão grande que ele atrai 4d6 seguidores.'
          ],
          armas: ['Clava', 'Adaga', 'Besta de Mão', 'Espada Longa', 'Dardo', 'Faca', 'Laço', 'Arco Curto', 'Funda', 'Espada Larga', 'Espada Curta', 'Cajado'],
          armaduras: ARMADURAS_LADRAO,
          escudos: ESCUDOS_LADRAO,
          talentos: {
            'Furtar Bolsos': 15,
            'Abrir Fechaduras': 10,
            'Achar/Desarmar Armadilhas': 5,
            'Mover-se em Silêncio': 10,
            'Esconder-se nas Sombras': 5,
            'Ouvir Ruídos': 15,
            'Escalar Muros': 60,
            'Decifrar Linguagens': 0,
            'Ataque pelas Costas': 'Vide detalhes',
            'Gíria dos ladrões': 'Vide detalhes',
            'Usar Pergaminhos': 0
          }
        },
        "Bardo": {
          "Grupo": "Ladino",
          "Habilidades Exigidas": { "Força": 0, "Destreza": 12, "Constituição": 0, "Inteligência": 13, "Sabedoria": 0, "Carisma": 15 },
          "Pré-Requisitos": [ "Destreza", "Carisma" ],
          "Raças Permitidas": [ "Humano", "Meio-Elfo" ],
          tendencias: [
            "Ordeiro (neutro e leal)",
            "Bondoso (bom e neutro)",
            "Neutro",
            "Egoista (neutro e maligno)",
            "Inconstante (neutro e caótico)"
          ],
          dado_de_vida: 6,
          detalhes: [
            'O bardo com 16 ou mais de Destreza e Carisma ganha um bônus de 10% em sua experiência.',
            'O bardo poderá aprender dois instrumentos musicais por ponto de perícia empregado.',
            'Durante suas viagens, um bardo aprende algumas magias arcanas. Igual a um arcano, sua Inteligência determinará o número permitido e a chance que ele tem de aprender magias. O personagem anota as fórmulas em um grimoire e, para utilizá-las deve obedecer a todas as restrições impostas aos arcanos, como a regra de memorização e a impossibilidade de usar armadura durante a conjuração.',
            'Cada vez que o bardo subir de nível, o jogador ganhará 15 pontos percentuais como um bõnus para distribuir aos números básicos dos talentos.',
            'Uma falha no uso do talento Furtar Bolsos indica que o personagem não obteve o item, mas não significa que a tentativa foi notada pela vítima. Para determinar se isso ocorreu, subtraia o triplo do nlvel da vítima de 100. Se o resultado do lance de dados do bardo tiver sido maior ou igual a esse número, então a tentalíva de roubo foi notada.',
            'Ao usar o talento Decifrar Linguagens, o nível de compreensão é aproximadamente igual à chance percentual de sucesso na leitura: uma chance de 20% indica que, caso consiga ler o documento, o ladrão compreenderá cerca de 20% do significado.',
            'Apenas um teste de Decifrar Linguagens pode ser feito para um documento em particular por nível.',
            'O bardo pode influenciar as reações de grupos de PdMs. Quando atua diante de um grupo que não esteja em ataque (e que não pretenda atacar nos próximos segundos), o bardo pode tentar influenciar o humor dos ouvintes, tanto para melhor como para pior. Todos aqueles no grupo ouvinte devem fazer um teste de resistência contra paralisação. O teste é modificado em -1 para cada três níveis de experiência do bardo (arredonde as frações para baixo).',
            'O bardo pode inspirar amigos e aliados, concedendo um bônus de +1 nas jogadas de ataque, ou um bônus de + 1nos testes de resislência, ou um bônus de +2 na moral (particularmente útil em grandes batalhas) para aqueles que estiverem envolvidos em combate corpo a corpo. O bardo deve passar pelo menos três rodadas completas cantando ou recitando antes que a batalha comece. Isto afeta aqueles dentro de um raio de 3 metros por nível do personagem.',
            'O efeito da inspiração do aliados dura uma rodada por nível do bardo. Uma vez que tenha se dissipado, o efeito não pode ser renovado enquanto os receptores ainda estiverem em batalha.',
            'Bardos também podem anular os efeitos de canções e poesias usados como ataques mágicos. Personagens a até 10 metros do bardo são imunes a ataques desse tipo, desde que ele cante uma canção para anulara magia. Para obter sucesso, o bardo deve passar em um teste de resistência contra magias. O bardo pode usar essa capacidade uma vez por encontro ou batalha.',
            'Todos os bardos podem ler e escrever em sua língua nativa.',
            'Bardos têm uma chance de 5% por nível para identificar o propósito geral e a função de qualquer item mágico. A função exata do item não é revelada, apenas a sua natureza geral.',
            'O bardo pode construir uma fortaleza e atrair 10d6 soldados de nível 0 quando atingir o 9º nível.',
            'A partir do 10º nível, o bardo ganha uma capacidade limitada de usar pergaminhos, arcanos ou sacerdotais. O personagem tem uma chance de 15% de ler incorretamente o pergaminho.'
          ],
          armas: [],
          armaduras: ARMADURAS_BARDO,
          escudos: [],
          talentos: {
            'Escalar Muros': 50,
            'Ouvir Ruídos': 20,
            'Furtar Bolsos': 10,
            'Decifrar Linguagens': 5,
            'Identificar Item Mágico': 5
          }
        }
      };

      function rolar1d6(callback) {
        let resultado = Math.floor(Math.random() * 6) + 1;
        callback(resultado);
      }

      function rolar1d100(callback) {
        let resultado = Math.floor(Math.random() * 100) + 1;
        callback(resultado);
      }

      function rolar3d6(callback) {
        rolar1d6(dado1 => {
          rolar1d6(dado2 => {
            rolar1d6(dado3 => {
              let resultado = dado1 + dado2 + dado3;
              callback(resultado);
            })
          })
        })
      }

      function atributos_forca(atributo, forca, forca_extraordinaria) {
        if ( forca == 1 ) {
          if (atributo == "Chance de Acertar") {
            return -5;
          } else if (atributo == "Ajuste de Dano") {
            return -4;
          } else if (atributo == "Carga Permitida") {
            return (0.5).toFixed(2);
          } else if (atributo == "Sustentação") {
            return (1.5).toFixed(2);
          } else if (atributo == "Abrir Portas") {
            return 1;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( forca == 2 ) {
          if (atributo == "Chance de Acertar") {
            return -3;
          } else if (atributo == "Ajuste de Dano") {
            return -2;
          } else if (atributo == "Carga Permitida") {
            return (0.5).toFixed(2);
          } else if (atributo == "Sustentação") {
            return (2.5).toFixed(2);
          } else if (atributo == "Abrir Portas") {
            return 1;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( forca == 3 ) {
          if (atributo == "Chance de Acertar") {
            return -3;
          } else if (atributo == "Ajuste de Dano") {
            return -1;
          } else if (atributo == "Carga Permitida") {
            return (2.5).toFixed(2);
          } else if (atributo == "Sustentação") {
            return 5;
          } else if (atributo == "Abrir Portas") {
            return 2;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( (forca >= 4) && (forca <= 5) ) {
          if (atributo == "Chance de Acertar") {
            return -2;
          } else if (atributo == "Ajuste de Dano") {
            return -1;
          } else if (atributo == "Carga Permitida") {
            return 5;
          } else if (atributo == "Sustentação") {
            return 13;
          } else if (atributo == "Abrir Portas") {
            return 3;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( (forca >= 6) && (forca <= 7) ) {
          if (atributo == "Chance de Acertar") {
            return -1;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 10;
          } else if (atributo == "Sustentação") {
            return 28;
          } else if (atributo == "Abrir Portas") {
            return 4;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( (forca >= 8) && (forca <= 9) ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 18;
          } else if (atributo == "Sustentação") {
            return 45;
          } else if (atributo == "Abrir Portas") {
            return 5;
          } else if (atributo == "Barras/Portais") {
            return "1%";
          }
        } else if ( (forca >= 10) && (forca <= 11) ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 20;
          } else if (atributo == "Sustentação") {
            return 58;
          } else if (atributo == "Abrir Portas") {
            return 6;
          } else if (atributo == "Barras/Portais") {
            return "2%";
          }
        } else if ( (forca >= 12) && (forca <= 13) ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 23;
          } else if (atributo == "Sustentação") {
            return 70;
          } else if (atributo == "Abrir Portas") {
            return 7;
          } else if (atributo == "Barras/Portais") {
            return "4%";
          }
        } else if ( (forca >= 14) && (forca <= 15) ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 28;
          } else if (atributo == "Sustentação") {
            return 85;
          } else if (atributo == "Abrir Portas") {
            return 8;
          } else if (atributo == "Barras/Portais") {
            return "7%";
          }
        } else if ( forca == 16 ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 1;
          } else if (atributo == "Carga Permitida") {
            return 35;
          } else if (atributo == "Sustentação") {
            return 98;
          } else if (atributo == "Abrir Portas") {
            return 9;
          } else if (atributo == "Barras/Portais") {
            return "10%";
          }
        } else if ( forca == 17 ) {
          if (atributo == "Chance de Acertar") {
            return 1;
          } else if (atributo == "Ajuste de Dano") {
            return 1;
          } else if (atributo == "Carga Permitida") {
            return 43;
          } else if (atributo == "Sustentação") {
            return 110;
          } else if (atributo == "Abrir Portas") {
            return 10;
          } else if (atributo == "Barras/Portais") {
            return "13%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria == 0) ) {
          if (atributo == "Chance de Acertar") {
            return 1;
          } else if (atributo == "Ajuste de Dano") {
            return 2;
          } else if (atributo == "Carga Permitida") {
            return 55;
          } else if (atributo == "Sustentação") {
            return 128;
          } else if (atributo == "Abrir Portas") {
            return 11;
          } else if (atributo == "Barras/Portais") {
            return "16%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria >= 1) && (forca_extraordinaria <= 50) ) {
          if (atributo == "Chance de Acertar") {
            return 1;
          } else if (atributo == "Ajuste de Dano") {
            return 3;
          } else if (atributo == "Carga Permitida") {
            return 68;
          } else if (atributo == "Sustentação") {
            return 140;
          } else if (atributo == "Abrir Portas") {
            return 12;
          } else if (atributo == "Barras/Portais") {
            return "20%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria >= 51) && (forca_extraordinaria <= 75) ) {
          if (atributo == "Chance de Acertar") {
            return 2;
          } else if (atributo == "Ajuste de Dano") {
            return 3;
          } else if (atributo == "Carga Permitida") {
            return 80;
          } else if (atributo == "Sustentação") {
            return 153;
          } else if (atributo == "Abrir Portas") {
            return 13;
          } else if (atributo == "Barras/Portais") {
            return "25%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria >= 76) && (forca_extraordinaria <= 90) ) {
          if (atributo == "Chance de Acertar") {
            return 2;
          } else if (atributo == "Ajuste de Dano") {
            return 4;
          } else if (atributo == "Carga Permitida") {
            return 93;
          } else if (atributo == "Sustentação") {
            return 165;
          } else if (atributo == "Abrir Portas") {
            return 14;
          } else if (atributo == "Barras/Portais") {
            return "30%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria >= 91) && (forca_extraordinaria <= 99) ) {
          if (atributo == "Chance de Acertar") {
            return 2;
          } else if (atributo == "Ajuste de Dano") {
            return 5;
          } else if (atributo == "Carga Permitida") {
            return 118;
          } else if (atributo == "Sustentação") {
            return 190;
          } else if (atributo == "Abrir Portas") {
            return "15(3)";
          } else if (atributo == "Barras/Portais") {
            return "35%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria == 100) ) {
          if (atributo == "Chance de Acertar") {
            return 3;
          } else if (atributo == "Ajuste de Dano") {
            return 6;
          } else if (atributo == "Carga Permitida") {
            return 168;
          } else if (atributo == "Sustentação") {
            return 240;
          } else if (atributo == "Abrir Portas") {
            return "16(6)";
          } else if (atributo == "Barras/Portais") {
            return "40%";
          }
        } else if ( forca == 19 ) {
          if (atributo == "Chance de Acertar") {
            return 3;
          } else if (atributo == "Ajuste de Dano") {
            return 7;
          } else if (atributo == "Carga Permitida") {
            return 243;
          } else if (atributo == "Sustentação") {
            return 320;
          } else if (atributo == "Abrir Portas") {
            return "16(8)";
          } else if (atributo == "Barras/Portais") {
            return "50%";
          }
        } else if ( forca == 20 ) {
          if (atributo == "Chance de Acertar") {
            return 3;
          } else if (atributo == "Ajuste de Dano") {
            return 8;
          } else if (atributo == "Carga Permitida") {
            return 268;
          } else if (atributo == "Sustentação") {
            return 350;
          } else if (atributo == "Abrir Portas") {
            return "17(10)";
          } else if (atributo == "Barras/Portais") {
            return "60%";
          }
        } else if ( forca == 21 ) {
          if (atributo == "Chance de Acertar") {
            return 4;
          } else if (atributo == "Ajuste de Dano") {
            return 9;
          } else if (atributo == "Carga Permitida") {
            return 318;
          } else if (atributo == "Sustentação") {
            return 405;
          } else if (atributo == "Abrir Portas") {
            return "17(12)";
          } else if (atributo == "Barras/Portais") {
            return "70%";
          }
        } else if ( forca == 22 ) {
          if (atributo == "Chance de Acertar") {
            return 4;
          } else if (atributo == "Ajuste de Dano") {
            return 10;
          } else if (atributo == "Carga Permitida") {
            return 393;
          } else if (atributo == "Sustentação") {
            return 485;
          } else if (atributo == "Abrir Portas") {
            return "18(14)";
          } else if (atributo == "Barras/Portais") {
            return "80%";
          }
        } else if ( forca == 23 ) {
          if (atributo == "Chance de Acertar") {
            return 5;
          } else if (atributo == "Ajuste de Dano") {
            return 11;
          } else if (atributo == "Carga Permitida") {
            return 468;
          } else if (atributo == "Sustentação") {
            return 565;
          } else if (atributo == "Abrir Portas") {
            return "18(16)";
          } else if (atributo == "Barras/Portais") {
            return "90%";
          }
        } else if ( forca == 24 ) {
          if (atributo == "Chance de Acertar") {
            return 6;
          } else if (atributo == "Ajuste de Dano") {
            return 12;
          } else if (atributo == "Carga Permitida") {
            return 618;
          } else if (atributo == "Sustentação") {
            return 720;
          } else if (atributo == "Abrir Portas") {
            return "19(17)";
          } else if (atributo == "Barras/Portais") {
            return "95%";
          }
        } else if ( forca == 25 ) {
          if (atributo == "Chance de Acertar") {
            return 7;
          } else if (atributo == "Ajuste de Dano") {
            return 14;
          } else if (atributo == "Carga Permitida") {
            return 768;
          } else if (atributo == "Sustentação") {
            return 875;
          } else if (atributo == "Abrir Portas") {
            return "19(18)";
          } else if (atributo == "Barras/Portais") {
            return "99%";
          }
        }
      }

      function atributos_destreza(atributo, destreza) {
        if ( destreza == 1 ) {
          if (atributo == "Ajuste de Reação") {
            return -6;
          } else if (atributo == "Ataque à Distância") {
            return -6;
          } else if (atributo == "Ajuste Defensivo") {
            return 5;
          }
        } else if ( destreza == 2 ) {
          if (atributo == "Ajuste de Reação") {
            return -4;
          } else if (atributo == "Ataque à Distância") {
            return -4;
          } else if (atributo == "Ajuste Defensivo") {
            return 5;
          }
        } else if ( destreza == 3 ) {
          if (atributo == "Ajuste de Reação") {
            return -3;
          } else if (atributo == "Ataque à Distância") {
            return -3;
          } else if (atributo == "Ajuste Defensivo") {
            return 4;
          }
        } else if ( destreza == 4 ) {
          if (atributo == "Ajuste de Reação") {
            return -2;
          } else if (atributo == "Ataque à Distância") {
            return -2;
          } else if (atributo == "Ajuste Defensivo") {
            return 3;
          }
        } else if ( destreza == 5 ) {
          if (atributo == "Ajuste de Reação") {
            return -1;
          } else if (atributo == "Ataque à Distância") {
            return -1;
          } else if (atributo == "Ajuste Defensivo") {
            return 2;
          }
        } else if ( destreza == 6 ) {
          if (atributo == "Ajuste de Reação") {
            return 0;
          } else if (atributo == "Ataque à Distância") {
            return 0;
          } else if (atributo == "Ajuste Defensivo") {
            return 1;
          }
        } else if ( (destreza >= 7) && (destreza <= 14) ) {
          if (atributo == "Ajuste de Reação") {
            return 0;
          } else if (atributo == "Ataque à Distância") {
            return 0;
          } else if (atributo == "Ajuste Defensivo") {
            return 0;
          }
        } else if ( destreza == 15 ) {
          if (atributo == "Ajuste de Reação") {
            return 0;
          } else if (atributo == "Ataque à Distância") {
            return 0;
          } else if (atributo == "Ajuste Defensivo") {
            return -1;
          }
        } else if ( destreza == 16 ) {
          if (atributo == "Ajuste de Reação") {
            return 1;
          } else if (atributo == "Ataque à Distância") {
            return 1;
          } else if (atributo == "Ajuste Defensivo") {
            return -2;
          }
        } else if ( destreza == 17 ) {
          if (atributo == "Ajuste de Reação") {
            return 2;
          } else if (atributo == "Ataque à Distância") {
            return 2;
          } else if (atributo == "Ajuste Defensivo") {
            return -3;
          }
        } else if ( destreza == 18 ) {
          if (atributo == "Ajuste de Reação") {
            return 2;
          } else if (atributo == "Ataque à Distância") {
            return 2;
          } else if (atributo == "Ajuste Defensivo") {
            return -4;
          }
        } else if ( destreza == 19 ) {
          if (atributo == "Ajuste de Reação") {
            return 3;
          } else if (atributo == "Ataque à Distância") {
            return 3;
          } else if (atributo == "Ajuste Defensivo") {
            return -4;
          }
        } else if ( destreza == 20 ) {
          if (atributo == "Ajuste de Reação") {
            return 3;
          } else if (atributo == "Ataque à Distância") {
            return 3;
          } else if (atributo == "Ajuste Defensivo") {
            return -4;
          }
        } else if ( destreza == 21 ) {
          if (atributo == "Ajuste de Reação") {
            return 4;
          } else if (atributo == "Ataque à Distância") {
            return 4;
          } else if (atributo == "Ajuste Defensivo") {
            return -5;
          }
        } else if ( destreza == 22 ) {
          if (atributo == "Ajuste de Reação") {
            return 4;
          } else if (atributo == "Ataque à Distância") {
            return 4;
          } else if (atributo == "Ajuste Defensivo") {
            return -5;
          }
        } else if ( destreza == 23 ) {
          if (atributo == "Ajuste de Reação") {
            return 4;
          } else if (atributo == "Ataque à Distância") {
            return 4;
          } else if (atributo == "Ajuste Defensivo") {
            return -5;
          }
        } else if ( destreza == 24 ) {
          if (atributo == "Ajuste de Reação") {
            return 5;
          } else if (atributo == "Ataque à Distância") {
            return 5;
          } else if (atributo == "Ajuste Defensivo") {
            return -6;
          }
        } else if ( destreza == 25 ) {
          if (atributo == "Ajuste de Reação") {
            return 5;
          } else if (atributo == "Ataque à Distância") {
            return 5;
          } else if (atributo == "Ajuste Defensivo") {
            return -6;
          }
        }
      }

      function atributos_constituicao(atributo, constituicao, classe) {
        if (constituicao == 1) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -3;
          } else if (atributo == "Colapso") {
            return "25%";
          } else if (atributo == "Chance de Ressurreição") {
            return "30%";
          } else if (atributo == "Resistência contra Veneno") {
            return -2;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 2) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -2;
          } else if (atributo == "Colapso") {
            return "30%";
          } else if (atributo == "Chance de Ressurreição") {
            return "35%";
          } else if (atributo == "Resistência contra Veneno") {
            return -1;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 3) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -2;
          } else if (atributo == "Colapso") {
            return "35%";
          } else if (atributo == "Chance de Ressurreição") {
            return "40%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 4) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -1;
          } else if (atributo == "Colapso") {
            return "40%";
          } else if (atributo == "Chance de Ressurreição") {
            return "45%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 5) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -1;
          } else if (atributo == "Colapso") {
            return "45%";
          } else if (atributo == "Chance de Ressurreição") {
            return "50%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 6) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -1;
          } else if (atributo == "Colapso") {
            return "50%";
          } else if (atributo == "Chance de Ressurreição") {
            return "55%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 7) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "55%";
          } else if (atributo == "Chance de Ressurreição") {
            return "60%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 8) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "60%";
          } else if (atributo == "Chance de Ressurreição") {
            return "65%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 9) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "65%";
          } else if (atributo == "Chance de Ressurreição") {
            return "70%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 10) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "70%";
          } else if (atributo == "Chance de Ressurreição") {
            return "75%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 11) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "75%";
          } else if (atributo == "Chance de Ressurreição") {
            return "80%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 12) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "80%";
          } else if (atributo == "Chance de Ressurreição") {
            return "85%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 13) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "85%";
          } else if (atributo == "Chance de Ressurreição") {
            return "90%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 14) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "88%";
          } else if (atributo == "Chance de Ressurreição") {
            return "92%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 15) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 1;
          } else if (atributo == "Colapso") {
            return "90%";
          } else if (atributo == "Chance de Ressurreição") {
            return "94%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 16) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 2;
          } else if (atributo == "Colapso") {
            return "95%";
          } else if (atributo == "Chance de Ressurreição") {
            return "96%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 17) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 3;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "97%";
          } else if (atributo == "Chance de Ressurreição") {
            return "98%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 18) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 4;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 19) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 5;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 1;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 20) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 5;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 1;
          } else if (atributo == "Regeneração") {
            return "1/6 turnos";
          }
        } else if (constituicao == 21) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 6;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 2;
          } else if (atributo == "Regeneração") {
            return "1/5 turnos";
          }
        } else if (constituicao == 22) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 6;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 2;
          } else if (atributo == "Regeneração") {
            return "1/4 turnos";
          }
        } else if (constituicao == 23) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 6;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 3;
          } else if (atributo == "Regeneração") {
            return "1/3 turnos";
          }
        } else if (constituicao == 24) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 7;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 3;
          } else if (atributo == "Regeneração") {
            return "1/2 turnos";
          }
        } else if (constituicao == 25) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 7;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "100%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 4;
          } else if (atributo == "Regeneração") {
            return "1/1 turnos";
          }
        }
      }

      function atributos_inteligencia(atributo, inteligencia) {
        if (inteligencia == 1) {
          if (atributo == "Número de Línguas") {
            return 0;
          } else if (atributo == "Círculo de Magia") {
            return 'Nenhum';
          } else if (atributo == "Chance de Aprender Magia") {
            return "Nenhuma";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Nenhuma";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( (inteligencia >= 2) && (inteligencia <= 8) ) {
          if (atributo == "Número de Línguas") {
            return 1;
          } else if (atributo == "Círculo de Magia") {
            return 'Nenhum';
          } else if (atributo == "Chance de Aprender Magia") {
            return "Nenhuma";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Nenhuma";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 9 ) {
          if (atributo == "Número de Línguas") {
            return 2;
          } else if (atributo == "Círculo de Magia") {
            return '4º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "35%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "6";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 10 ) {
          if (atributo == "Número de Línguas") {
            return 2;
          } else if (atributo == "Círculo de Magia") {
            return '5º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "40%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "7";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 11 ) {
          if (atributo == "Número de Línguas") {
            return 2;
          } else if (atributo == "Círculo de Magia") {
            return '5º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "45%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "7";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 12 ) {
          if (atributo == "Número de Línguas") {
            return 3;
          } else if (atributo == "Círculo de Magia") {
            return '6º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "50%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "7";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 13 ) {
          if (atributo == "Número de Línguas") {
            return 3;
          } else if (atributo == "Círculo de Magia") {
            return '6º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "55%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "9";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 14 ) {
          if (atributo == "Número de Línguas") {
            return 4;
          } else if (atributo == "Círculo de Magia") {
            return '7º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "60%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "9";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 15 ) {
          if (atributo == "Número de Línguas") {
            return 4;
          } else if (atributo == "Círculo de Magia") {
            return '7º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "65%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "11";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 16 ) {
          if (atributo == "Número de Línguas") {
            return 5;
          } else if (atributo == "Círculo de Magia") {
            return '8º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "70%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "11";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 17 ) {
          if (atributo == "Número de Línguas") {
            return 6;
          } else if (atributo == "Círculo de Magia") {
            return '8º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "75%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "14";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 18 ) {
          if (atributo == "Número de Línguas") {
            return 7;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "85%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "18";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 19 ) {
          if (atributo == "Número de Línguas") {
            return 8;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "95%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 1º Círculo";
          }
        } else if ( inteligencia == 20 ) {
          if (atributo == "Número de Línguas") {
            return 9;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "96%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 2º Círculo";
          }
        } else if ( inteligencia == 21 ) {
          if (atributo == "Número de Línguas") {
            return 10;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "97%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 3º Círculo";
          }
        } else if ( inteligencia == 22 ) {
          if (atributo == "Número de Línguas") {
            return 11;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "98%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 4º Círculo";
          }
        } else if ( inteligencia == 23 ) {
          if (atributo == "Número de Línguas") {
            return 12;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "99%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 5º Círculo";
          }
        } else if ( inteligencia == 24 ) {
          if (atributo == "Número de Línguas") {
            return 15;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "100%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 6º Círculo";
          }
        } else if ( inteligencia == 25 ) {
          if (atributo == "Número de Línguas") {
            return 20;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "100%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 7º Círculo";
          }
        }
      }

      function atributos_sabedoria(atributo, sabedoria) {
        if (sabedoria == 1) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -6;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "80%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 2) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -4;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "60%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 3) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -3;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "50%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 4) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -2;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "45%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 5) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -1;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "40%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 6) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -1;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "35%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 7) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -1;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "30%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 8) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "25%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 9) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "20%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 10) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "15%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 11) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "10%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 12) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "5%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 13) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "1º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 14) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "1º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 15) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 1;
          } else if (atributo == "Magias Extras") {
            return "2º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 16) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 2;
          } else if (atributo == "Magias Extras") {
            return "2º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 17) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 3;
          } else if (atributo == "Magias Extras") {
            return "3º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 18) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "4º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 19) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "1º, 4º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Causar Medo", "Encantar Pessoa", "Comanda", "Amigos", "Hipnose"];
          }
        } else if (sabedoria == 20) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "2º, 4º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Esquecer", "Paralisar Pessoa", "Raio de Esquecimanto", "Assustar"];
          }
        } else if (sabedoria == 21) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "3º, 5º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Medo"];
          }
        } else if (sabedoria == 22) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "4º, 5º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Encantar Monstro", "Confusão", "Emoção", "Falha", "Sugestão"];
          }
        } else if (sabedoria == 23) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "5º, 5º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Caos", "Debilitar Mente", "Paralisar Monstro", "Jarro Arcano", "Busca"];
          }
        } else if (sabedoria == 24) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "6º, 6º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Tarefa", "Sugestão em Massa", "Cetro do Poder"];
          }
        } else if (sabedoria == 25) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "6º, 7º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Antipatia/Simpatia", "Morte", "Encantar as Massas"];
          }
        }
      }

      function atributos_carisma(atributo, carisma) {
        if (carisma == 1) {
          if (atributo == "Nº Máximo de aliados") {
            return 0;
          } else if (atributo == "Fator de Lealdade") {
            return -8;
          } else if (atributo == "Ajuste de reação") {
            return -7;
          }
        } else if (carisma == 2) {
          if (atributo == "Nº Máximo de aliados") {
            return 1;
          } else if (atributo == "Fator de Lealdade") {
            return -7;
          } else if (atributo == "Ajuste de reação") {
            return -6;
          }
        } else if (carisma == 3) {
          if (atributo == "Nº Máximo de aliados") {
            return 1;
          } else if (atributo == "Fator de Lealdade") {
            return -6;
          } else if (atributo == "Ajuste de reação") {
            return -5;
          }
        } else if (carisma == 4) {
          if (atributo == "Nº Máximo de aliados") {
            return 1;
          } else if (atributo == "Fator de Lealdade") {
            return -5;
          } else if (atributo == "Ajuste de reação") {
            return -4;
          }
        } else if (carisma == 5) {
          if (atributo == "Nº Máximo de aliados") {
            return 2;
          } else if (atributo == "Fator de Lealdade") {
            return -4;
          } else if (atributo == "Ajuste de reação") {
            return -3;
          }
        } else if (carisma == 6) {
          if (atributo == "Nº Máximo de aliados") {
            return 2;
          } else if (atributo == "Fator de Lealdade") {
            return -3;
          } else if (atributo == "Ajuste de reação") {
            return -2;
          }
        } else if (carisma == 7) {
          if (atributo == "Nº Máximo de aliados") {
            return 3;
          } else if (atributo == "Fator de Lealdade") {
            return -2;
          } else if (atributo == "Ajuste de reação") {
            return -1;
          }
        } else if (carisma == 8) {
          if (atributo == "Nº Máximo de aliados") {
            return 3;
          } else if (atributo == "Fator de Lealdade") {
            return -1;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 9) {
          if (atributo == "Nº Máximo de aliados") {
            return 4;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 10) {
          if (atributo == "Nº Máximo de aliados") {
            return 4;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 11) {
          if (atributo == "Nº Máximo de aliados") {
            return 4;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 12) {
          if (atributo == "Nº Máximo de aliados") {
            return 5;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 13) {
          if (atributo == "Nº Máximo de aliados") {
            return 5;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 1;
          }
        } else if (carisma == 14) {
          if (atributo == "Nº Máximo de aliados") {
            return 6;
          } else if (atributo == "Fator de Lealdade") {
            return 1;
          } else if (atributo == "Ajuste de reação") {
            return 2;
          }
        } else if (carisma == 15) {
          if (atributo == "Nº Máximo de aliados") {
            return 7;
          } else if (atributo == "Fator de Lealdade") {
            return 3;
          } else if (atributo == "Ajuste de reação") {
            return 3;
          }
        } else if (carisma == 16) {
          if (atributo == "Nº Máximo de aliados") {
            return 8;
          } else if (atributo == "Fator de Lealdade") {
            return 4;
          } else if (atributo == "Ajuste de reação") {
            return 5;
          }
        } else if (carisma == 17) {
          if (atributo == "Nº Máximo de aliados") {
            return 10;
          } else if (atributo == "Fator de Lealdade") {
            return 6;
          } else if (atributo == "Ajuste de reação") {
            return 6;
          }
        } else if (carisma == 18) {
          if (atributo == "Nº Máximo de aliados") {
            return 15;
          } else if (atributo == "Fator de Lealdade") {
            return 8;
          } else if (atributo == "Ajuste de reação") {
            return 7;
          }
        } else if (carisma == 19) {
          if (atributo == "Nº Máximo de aliados") {
            return 20;
          } else if (atributo == "Fator de Lealdade") {
            return 10;
          } else if (atributo == "Ajuste de reação") {
            return 8;
          }
        } else if (carisma == 20) {
          if (atributo == "Nº Máximo de aliados") {
            return 25;
          } else if (atributo == "Fator de Lealdade") {
            return 12;
          } else if (atributo == "Ajuste de reação") {
            return 9;
          }
        } else if (carisma == 21) {
          if (atributo == "Nº Máximo de aliados") {
            return 30;
          } else if (atributo == "Fator de Lealdade") {
            return 14;
          } else if (atributo == "Ajuste de reação") {
            return 10;
          }
        } else if (carisma == 22) {
          if (atributo == "Nº Máximo de aliados") {
            return 35;
          } else if (atributo == "Fator de Lealdade") {
            return 16;
          } else if (atributo == "Ajuste de reação") {
            return 11;
          }
        } else if (carisma == 23) {
          if (atributo == "Nº Máximo de aliados") {
            return 40;
          } else if (atributo == "Fator de Lealdade") {
            return 18;
          } else if (atributo == "Ajuste de reação") {
            return 12;
          }
        } else if (carisma == 24) {
          if (atributo == "Nº Máximo de aliados") {
            return 45;
          } else if (atributo == "Fator de Lealdade") {
            return 20;
          } else if (atributo == "Ajuste de reação") {
            return 13;
          }
        } else if (carisma == 25) {
          if (atributo == "Nº Máximo de aliados") {
            return 50;
          } else if (atributo == "Fator de Lealdade") {
            return 20;
          } else if (atributo == "Ajuste de reação") {
            return 14;
          }
        }
      }

      function obter_dados_json_personagem(forca, destreza, constituicao, inteligencia, sabedoria, carisma) {
        return {
          "Raça": '',
          "Classe": '',
          "Tendência": '',
          "Dados Básicos": {
            "Gênero": '',
            "Idade": 0,
            "Altura": 0,
            "Peso": 0,
            "Pontos de Vida": 0,
            "Categoria de Armadura": 10,
            "Iniciativa": '1d10 (menor primeiro)',
            "Teste de Surpresa": '',
            "Infravisão": '0 metros no escuro',
            "Peso dos Equipamentos": 0,
            "Moedas": 0
          },
          "Movimentação": {
            "Taxa-Base": 0,
            "Em campo aberto": '',
            "Correndo": '',
            "Em dungeons": '',
            "Em combates": '',
            "Investida": '',
            "Natação": '',
            "Escalada (Irregular, Seca)": ''
          },
          "Habilidades": {
            "Força": {
              "Valor da Habilidade": forca,
              "Chance de Acertar": 0,
              "Ajuste de Dano": 0,
              "Carga Permitida": 0,
              "Sustentação": 0,
              "Abrir Portas": 0,
              "Barras/Portais": "0%"
            },
            "Destreza": {
              "Valor da Habilidade": destreza,
              "Ajuste de Reação": 0,
              "Ataque à Distância": 0,
              "Ajuste Defensivo": 0
            },
            "Constituição": {
              "Valor da Habilidade": constituicao,
              "Ajuste dos Pontos de Vida": 0,
              "Colapso": "0%",
              "Chance de Ressurreição": "0%",
              "Resistência contra Veneno": 0,
              "Regeneração": "Não há"
            },
            "Inteligência": {
              "Valor da Habilidade": inteligencia,
              "Número de Línguas": 0,
              "Círculo de Magia": "Nenhum",
              "Chance de Aprender Magia": "Nenhuma",
              "Número Máx Magias/Círculo": "Nenhuma",
              "Imunidade a Magias": "Nenhuma"
            },
            "Sabedoria": {
              "Valor da Habilidade": sabedoria,
              "Ajuste de Defesa Contra Magia": 0,
              "Magias Extras": "Nenhuma",
              "Chance da Magia Falhar": "0%",
              "Imunidade à Magia": []
            },
            "Carisma": {
              "Valor da Habilidade": carisma,
              "Nº Máximo de aliados": 0,
              "Fator de Lealdade": 0,
              "Ajuste de reação": 0
            },
          },
          "Resistência": {
            "Paralisação, Veneno ou Morte por Magia": 0,
            "Bastão, Cajado ou Varinha": 0,
            "Petrificação ou Transformação": 0,
            "Sopro-de-Dragão": 0,
            "Magia": 0
          },
          "Idiomas": [],
          "Pontos de Perícia": {
            "Perícias Armas Inicial": 0,
            "Perícias Armas Nº Níveis": 0,
            "Perícias Armas Penalidades": 0,
            "Perícias Comuns Inicial": 0,
            "Perícias Comuns Nº Níveis": 0
          },
          "Perícias": {},
          "Especialização": [],
          "Itens": [],
          "Detalhes": []
        };
      }

      function sortear_atributos(callback) {
        rolar3d6(forca => {
          rolar3d6(destreza => {
            rolar3d6(constituicao => {
              rolar3d6(inteligencia => {
                rolar3d6(sabedoria => {
                  rolar3d6(carisma => {

                    habilidades_sorteadas = {
                      "Força": forca,
                      "Destreza": destreza,
                      "Constituição": constituicao,
                      "Inteligência": inteligencia,
                      "Sabedoria": sabedoria,
                      "Carisma": carisma
                    };

                    if (forcar_classe != 'Todas') {
                      let classe_ajustada = ajustar_nome_classe_variavel(forcar_classe);
                      let keys_habilidades = Object.keys(CLASSES[classe_ajustada]["Habilidades Exigidas"]);
                      keys_habilidades.forEach((habilidade, index_habilidade) => {

                        if (CLASSES[classe_ajustada]["Habilidades Exigidas"][habilidade] > habilidades_sorteadas[habilidade]) {
                          habilidades_sorteadas[habilidade] = CLASSES[classe_ajustada]["Habilidades Exigidas"][habilidade];
                        }

                        if (index_habilidade == (keys_habilidades.length - 1)) {
                          callback(obter_dados_json_personagem(habilidades_sorteadas["Força"], habilidades_sorteadas["Destreza"], habilidades_sorteadas["Constituição"], habilidades_sorteadas["Inteligência"], habilidades_sorteadas["Sabedoria"], habilidades_sorteadas["Carisma"]));
                        }
                      });
                    } else {
                      callback(obter_dados_json_personagem(habilidades_sorteadas["Força"], habilidades_sorteadas["Destreza"], habilidades_sorteadas["Constituição"], habilidades_sorteadas["Inteligência"], habilidades_sorteadas["Sabedoria"], habilidades_sorteadas["Carisma"]));
                    }
                  });
                });
              });
            });
          });
        });
      }

      function validar_habilidades(personagem, callback) {

        let keys_racas = Object.keys(RACAS);
        let keys_habilidades = Object.keys(personagem["Habilidades"]);

        let racas = [];

        keys_racas.forEach((raca,index_racas) => {

          let habilidade_valida = true;
          keys_habilidades.forEach((habilidade,index_habilidades) => {
              let valor = personagem["Habilidades"][habilidade]["Valor da Habilidade"];
              let limites = RACAS[raca][habilidade];
              if ( (valor < limites["minimo"]) || (valor > limites["maximo"]) ) {
                habilidade_valida = false;
              }

              if (index_habilidades == (keys_habilidades.length - 1)) {
                if (habilidade_valida) {
                  racas.push(raca);
                }
              }
          });

          if (index_racas == (keys_racas.length - 1)) {
            callback(racas);
          }
        });

      }

      function ajustar_nome_raca(personagem) {
        let raca = personagem["Raça"];
        if ( (raca.indexOf('Elfo') > -1) || (raca.indexOf('Drow') > -1) ) {
          raca = 'Elfo';
        }
        if (raca.indexOf('Halfling') > -1) {
          raca = 'Halfling';
        }
        return raca;
      }

      function sortear_raca(personagem, callback) {
        validar_habilidades(personagem, racas => {

          let raca = '';

          if (forcar_classe == 'Todas') {
            let index = Math.floor(Math.random() * racas.length);
            raca = racas[index];
          } else {
            let classe_ajustada = ajustar_nome_classe_variavel(forcar_classe);
            let index = Math.floor(Math.random() * CLASSES[classe_ajustada]["Raças Permitidas"].length);
            raca = CLASSES[classe_ajustada]["Raças Permitidas"][index];
          }

          personagem["Raça"] = raca;

          if (raca == "Elfo") {
            let racas_elficas = [
              'Elfo (Alto-Elfo)', 'Elfo (Alto-Elfo)', 'Elfo (Alto-Elfo)', 'Elfo (Alto-Elfo),',
              'Elfo Aquático', 'Elfo Cinzento', 'Elfo da Floresta', 'Drow'
            ];
            personagem["Raça"] = racas_elficas[Math.floor(Math.random() * racas_elficas.length)];
          }

          if (raca == "Halfling") {
            let racas_halflings = [ 'Halfling Pespeludos', 'Halfling Tiposaltos', 'Halfling Robustos' ];
            personagem["Raça"] = racas_halflings[Math.floor(Math.random() * racas_halflings.length)];
          }

          let ajustes = Object.keys(RACAS[raca].ajustes);
          if (ajustes.length == 0) {
            callback();
          } else {
            ajustes.forEach((habilidade, i) => {

              let valor = personagem["Habilidades"][habilidade]["Valor da Habilidade"];
              let ajuste = RACAS[raca].ajustes[habilidade];
              personagem["Habilidades"][habilidade]["Valor da Habilidade"] = valor + ajuste;

              if (i == (ajustes.length - 1)) {
                callback();
              }
            });
          }

        });
      }

      function validar_classes_por_habilidades(classes, personagem, callback) {
        let keys_classes = classes;
        let keys_habilidades = Object.keys(personagem["Habilidades"]);
        let classes_permitidas = [];

        keys_classes.forEach((classe,index_classes) => {

          let habilidade_valida = true;
          keys_habilidades.forEach((habilidade,index_habilidades) => {
              let valor = personagem["Habilidades"][habilidade]["Valor da Habilidade"];
              let limite = CLASSES[classe]["Habilidades Exigidas"][habilidade];
              if (valor < limite) {
                habilidade_valida = false;
              }

              if (index_habilidades == (keys_habilidades.length - 1)) {
                if (habilidade_valida) {
                  classes_permitidas.push(classe);
                }
              }
          });

          if (index_classes == (keys_classes.length - 1)) {
            callback(classes_permitidas);
          }
        });
      }

      function validar_classes_por_raca(personagem, callback) {
        let keys_classes = Object.keys(CLASSES);
        let classes_permitidas = [];

        keys_classes.forEach((classe,index_classes) => {
          let keys_racas = CLASSES[classe]["Raças Permitidas"];
          let classe_permitida = false;

          keys_racas.forEach((raca, index_classe_permitida) => {
            if (ajustar_nome_raca(personagem) == raca) {
              classe_permitida = true;
            }

            if (index_classe_permitida == (keys_racas.length - 1)) {
              if (classe_permitida) {
                classes_permitidas.push(classe);
              }
            }
          });

          if (index_classes == (keys_classes.length - 1)) {
            callback(classes_permitidas);
          }
        });
      }

      function sortear_classe(personagem, callback) {
        validar_classes_por_raca(personagem, classes => {
          validar_classes_por_habilidades(classes, personagem, classes_permitidas => {
            if (classes_permitidas.length == 0) {
              callback({ valores_invalidos: true });
            } else {
              let classes_fortes = ["Paladino", "Ranger", "Abjurante", "Conjurador", "Adivinho", "Feiticeiro", "Ilusionista", "Invocador", "Necromante", "Transmutador", "Druida", "Bardo"];
              let classes_selecionadas = [];
              classes_fortes.forEach((classe_forte, index_classes_fortes) => {

                /*
                classes_permitidas.forEach((classe_permitida, index_classe_permitida) => {
                  if (classe_permitida == classe_forte) {
                    classes_selecionadas.push(classe_permitida);
                  }
                });
                */

                for (let index_classe_permitida = 0; index_classe_permitida < classes_permitidas.length; index_classe_permitida++) {
                  if (classes_permitidas[index_classe_permitida] == classe_forte) {
                    classes_selecionadas.push(classes_permitidas[index_classe_permitida]);
                  }
                }

                if (index_classes_fortes == (classes_fortes.length - 1)) {

                  let classe_final = '';

                  if (forcar_classe != "Todas") {
                    classe_final = forcar_classe;
                  } else if (classes_selecionadas.length > 0) {
                    let index = Math.floor(Math.random() * classes_selecionadas.length);
                    classe_final = classes_selecionadas[index];
                  } else {
                    let index = Math.floor(Math.random() * classes_permitidas.length);
                    classe_final = classes_permitidas[index];
                  }

                  if (classe_final == "Ranger") {
                    personagem["Perícias"]["Rastrear"] = PERICIAS["Rastrear"];
                  }

                  if ( (classe_final == "Clérigo") && (forcar_classe == "Todas") ) {
                    let lista_clerigos = [
                      "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                      "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                      "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                      "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                      "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                      "Clérigo da Agricultura",
                      "Clérigo dos Ferreiros",
                      "Clérigo da Morte",
                      "Clérigo da Doença",
                      "Clérigo da Terra",
                      "Clérigo da Cura",
                      "Clérigo da Caça",
                      "Clérigo do Relâmpago",
                      "Clérigo do Amor",
                      "Clérigo da Natureza",
                      "Clérigo dos Oceanos",
                      "Clérigo da Paz",
                      "Clérigo da Força",
                      "Clérigo do Trovão",
                      "Clérigo da Guerra",
                      "Clérigo dos Ventos"
                    ];
                    let index_clerigo = Math.floor(Math.random() * lista_clerigos.length);
                    classe_final = lista_clerigos[index_clerigo];
                  }

                  if (classe_final == "Clérigo da Agricultura") {
                    CLASSES['Clérigo'].armas_divindade = ["Podão", "Foice", "Mangual"];
                  } else if (classe_final == "Clérigo dos Ferreiros") {
                    CLASSES['Clérigo'].armas_divindade = ["Martelo de Batalha"];
                  } else if (classe_final == "Clérigo da Morte") {
                    CLASSES['Clérigo'].armas_divindade = ["Foice"];
                  } else if (classe_final == "Clérigo da Doença") {
                    CLASSES['Clérigo'].armas_divindade = ["Açoite", "Chicote"];
                  } else if (classe_final == "Clérigo da Terra") {
                    CLASSES['Clérigo'].armas_divindade = ["Alvião"];
                  } else if (classe_final == "Clérigo da Cura") {
                    CLASSES['Clérigo'].armas_divindade = ["Aprisionador", "Bordão"];
                  } else if (classe_final == "Clérigo da Caça") {
                    CLASSES['Clérigo'].armas_divindade = ["Arco Curto", "Azagaia", "Lança de Cavalaria", "Funda"];
                  } else if (classe_final == "Clérigo do Relâmpago") {
                    CLASSES['Clérigo'].armas_divindade = ["Dardo", "Lança", "Azagaia"];
                  } else if (classe_final == "Clérigo do Amor") {
                    CLASSES['Clérigo'].armas_divindade = ["Arco Curto", "Aprisionador"];
                  } else if (classe_final == "Clérigo da Natureza") {
                    CLASSES['Clérigo'].armas_divindade = ["Clava", "Cimitarra", "Foice"];
                  } else if (classe_final == "Clérigo dos Oceanos") {
                    CLASSES['Clérigo'].armas_divindade = ["Arpão", "Lança", "Tridente"];
                  } else if (classe_final == "Clérigo da Paz") {
                    CLASSES['Clérigo'].armas_divindade = ["Bordão"];
                  } else if (classe_final == "Clérigo da Força") {
                    CLASSES['Clérigo'].armas_divindade = ["Martelo"];
                  } else if (classe_final == "Clérigo do Trovão") {
                    CLASSES['Clérigo'].armas_divindade = ["Clava", "Maça", "Martelo de Batalha"];
                  } else if (classe_final == "Clérigo da Guerra") {
                    CLASSES['Clérigo'].armas_divindade = ["Machado de Batalha", "Maça", "Maça-Estrela", "Montante", "Espada"];
                  } else if (classe_final == "Clérigo dos Ventos") {
                    CLASSES['Clérigo'].armas_divindade = ["Zarabatana", "Dardo"];
                  }

                  personagem["Classe"] = classe_final;

                  callback({ valores_invalidos: false });
                }
              });
            }
          });
        });
      }

      function render() {
        obter_dados_personagem(personagem => {
          let output = document.getElementById('ficha');
          output.innerHTML = "";
          var node = prettyPrint(personagem);
          document.getElementById('ficha').appendChild(node);
        });
      }

      function sortear_personagem(callback) {
        sortear_atributos(personagem => {
          sortear_raca(personagem, () => {
            sortear_classe(personagem, resultado => {
              if (resultado.valores_invalidos) {
                sortear_personagem(personagem => {
                  console.log("Foi necessário outro lance de dados pois não foi possível escolher uma classe.");
                  sortear_tendencia(personagem, () => {
                    sortear_dados_basicos(personagem, () => {
                      callback(personagem);
                    });
                  });
                });
              } else {
                sortear_tendencia(personagem, () => {
                  sortear_dados_basicos(personagem, () => {
                    callback(personagem);
                  });
                });
              }
            });
          });
        });
      }

      function ajustar_nome_classe_variavel(classe) {
        if (classe.indexOf('Clérigo') > -1) {
          classe = 'Clérigo';
        }
        return classe;
      }

      function ajustar_nome_classe(personagem) {
        let classe = personagem["Classe"];
        return ajustar_nome_classe_variavel(classe);
      }

      function sortear_tendencia(personagem, callback) {
        let classe = ajustar_nome_classe(personagem);
        let tendencias = CLASSES[classe].tendencias;
        let index = Math.floor(Math.random() * tendencias.length);
        personagem["Tendência"] = tendencias[index];
        callback();
      }

      function acrescentar_novas_linguas(personagem, raca, numero_de_linguas, callback) {
        let linguas = [ 'élfico', 'do anões', 'dos gnomos', 'dos halflings', 'dos goblins', 'dos robgoblins', 'dos orcs', 'dos gnolls' ];

        if (numero_de_linguas == 0) {
          personagem["Detalhes"].push("Mesmo incapaz de falar qualquer língua, o personagem ainda pode se comunicar através de gestos e grunhidos.");
        } else if (numero_de_linguas == 1) {
          let linguas_importantes = [ RACAS[raca].linguas_importantes[0] ];
          personagem["Idiomas"] = linguas_importantes;
          numero_de_linguas = numero_de_linguas - 1;
        } else {
          personagem["Idiomas"] = RACAS[raca].linguas_importantes;
          numero_de_linguas = numero_de_linguas - RACAS[raca].linguas_importantes.length;
        }

        let idiomas_do_personagem = personagem["Idiomas"].slice();

        if (numero_de_linguas > 0) {

          linguas.forEach((idioma_disponivel, index_externo) => {
            let possui_idioma = false;
            idiomas_do_personagem.forEach((idioma_aprendido, index_interno) => {
              if (idioma_disponivel == idioma_aprendido) {
                possui_idioma = true;
              }

              if (index_interno == (idiomas_do_personagem.length - 1)) {
                if ( (!possui_idioma) && (numero_de_linguas > 0) ) {
                  let acrescentar_nova_lingua = Math.floor(Math.random() * 100) + 1;
                  if (acrescentar_nova_lingua <= 5) {
                    personagem["Idiomas"].push(idioma_disponivel);
                    numero_de_linguas = numero_de_linguas - 1;
                  }
                }
              }
            });

            if (index_externo == (linguas.length - 1)) {
              callback(numero_de_linguas);
            }
          });
        } else {
          callback(numero_de_linguas);
        }
      }

      function sortear_pontos_talentos(classe, personagem, callback) {
        let pontos_extras = 60;
        let limites = {
          'Furtar Bolsos': 30,
          'Abrir Fechaduras': 30,
          'Achar/Desarmar Armadilhas': 30,
          'Mover-se em Silêncio': 30,
          'Esconder-se nas Sombras': 30,
          'Ouvir Ruídos': 30,
          'Escalar Muros': 30,
          'Decifrar Linguagens': 30,
          'Ataque pelas Costas': 0,
          'Gíria dos ladrões': 0,
          'Usar Pergaminhos': 30,
          'Identificar Item Mágico': 30
        };

        if (personagem['Classe'] == "Bardo") {
          pontos_extras = 20;
        }

        let keys_talentos = Object.keys(CLASSES[classe].talentos);
        while (pontos_extras > 0) {
          let index = Math.floor(Math.random() * keys_talentos.length);
          let talento = keys_talentos[index];
          if (limites[talento] > 0) {

              let extra = 1000;
              while (extra > pontos_extras) {
                extra = Math.floor(Math.random() * limites[talento]) + 1;
              }

              limites[talento] = limites[talento] - extra;
              pontos_extras = pontos_extras - extra;
              personagem["Talentos"][talento] = personagem["Talentos"][talento] + extra;

          }
          if (pontos_extras == 0) {
            callback();
          }
        }
      }

      function definir_talentos(classe, personagem, callback) {
        if (CLASSES[classe]["Grupo"] == "Ladino") {
          personagem["Talentos"] = {};
          let keys_talentos = Object.keys(CLASSES[classe].talentos);
          keys_talentos.forEach((talento, index_talento) => {
            let destreza = personagem["Habilidades"]["Destreza"]["Valor da Habilidade"];
            let raca = ajustar_nome_raca(personagem);
            personagem["Talentos"][talento] =
              CLASSES[classe].talentos[talento] +
              ajustar_talentos_pela_destreza(destreza,talento) +
              RACAS[raca].talentos[talento];

            if (index_talento == (keys_talentos.length - 1)) {
              sortear_pontos_talentos(classe, personagem, () => {
                callback();
              });
            }
          });
        } else {
          callback();
        }
      }

      function ajustar_talentos_pela_destreza(destreza,talento) {
        if ( (talento == 'Ataque pelas Costas') || (talento == 'Gíria dos ladrões') ) {
          return '';
        } else if ( talento == 'Usar Pergaminhos' ) {
          return 0;
        } else if (talento == 'Furtar Bolsos') {
          if (destreza == 9) { return -15; }
          else if (destreza == 10) { return -10; }
          else if (destreza == 11) { return -5; }
          else if (destreza == 12) { return 0; }
          else if ( (destreza >= 13) && (destreza <= 15) ) { return 0; }
          else if (destreza == 16) { return 0; }
          else if (destreza == 17) { return 5; }
          else if (destreza == 18) { return 10; }
          else if (destreza == 19) { return 15; }
          else { return 0; }
        } else if (talento == 'Abrir Fechaduras') {
          if (destreza == 9) { return -10; }
          else if (destreza == 10) { return -5; }
          else if (destreza == 11) { return 0; }
          else if (destreza == 12) { return 0; }
          else if ( (destreza >= 13) && (destreza <= 15) ) { return 0; }
          else if (destreza == 16) { return 5; }
          else if (destreza == 17) { return 10; }
          else if (destreza == 18) { return 15; }
          else if (destreza == 19) { return 20; }
          else { return 0; }
        } else if (talento == 'Achar/Desarmar Armadilhas') {
          if (destreza == 9) { return -10; }
          else if (destreza == 10) { return -10; }
          else if (destreza == 11) { return -5; }
          else if (destreza == 12) { return 0; }
          else if ( (destreza >= 13) && (destreza <= 15) ) { return 0; }
          else if (destreza == 16) { return 0; }
          else if (destreza == 17) { return 0; }
          else if (destreza == 18) { return 5; }
          else if (destreza == 19) { return 10; }
          else { return 0; }
        } else if (talento == 'Mover-se em Silêncio') {
          if (destreza == 9) { return -20; }
          else if (destreza == 10) { return -15; }
          else if (destreza == 11) { return -10; }
          else if (destreza == 12) { return -5; }
          else if ( (destreza >= 13) && (destreza <= 15) ) { return 0; }
          else if (destreza == 16) { return 0; }
          else if (destreza == 17) { return 5; }
          else if (destreza == 18) { return 10; }
          else if (destreza == 19) { return 15; }
          else { return 0; }
        } else if (talento == 'Esconder-se nas Sombras') {
          if (destreza == 9) { return -10; }
          else if (destreza == 10) { return -5; }
          else if (destreza == 11) { return 0; }
          else if (destreza == 12) { return 0; }
          else if ( (destreza >= 13) && (destreza <= 15) ) { return 0; }
          else if (destreza == 16) { return 0; }
          else if (destreza == 17) { return 5; }
          else if (destreza == 18) { return 10; }
          else if (destreza == 19) { return 15; }
          else { return 0; }
        } else if ( talento == 'Ouvir Ruídos' ) {
          return 0;
        } else if ( talento == 'Escalar Muros' ) {
          return 0;
        } else if ( talento == 'Decifrar Linguagens' ) {
          return 0;
        } else { return 0; }
      }

      function converter_po_em_moedas(moedas) {
        let moedas_po = Math.floor(moedas);
        let moedas_pc = Math.round((moedas - moedas_po) * 100);
        return moedas_po + " po, " + moedas_pc + " pc";
      }

      function reduzir_moedas(moedas, preco) {
        // preco: { quantidade: 10, moeda: 'po' }
        let final = 0;
        if (preco.moeda == "pc") {
          let preco_po = preco.quantidade / 100;
          final = moedas - preco_po;
        } else if (preco.moeda == "pp") {
          let preco_po = preco.quantidade / 10;
          final = moedas - preco_po;
        } else if (preco.moeda == "pe") {
          let preco_po = preco.quantidade / 2;
          final = moedas - preco_po;
        } else if (preco.moeda == "po") {
          final = moedas - preco.quantidade;
        } else if (preco.moeda == "pl") {
          let preco_po = preco.quantidade * 5;
          final = moedas - preco_po;
        } else {
          debug("Erro ao calcular moedas:");
          debug(preco);
        }
        return { moedas: final, valido: (final >= 0) };
      }

      function sortear_itens_escudos(moeda_limite, peso_limite, classe, personagem, callback) {
        let ca_escudo = false;
        if (CLASSES[classe].escudos.length > 0) {
          let index_item = Math.floor(Math.random() * (CLASSES[classe].escudos.length + 1));
          if (index_item == CLASSES[classe].escudos.length) {
            callback(moeda_limite, peso_limite, ca_escudo);
          } else {
            let escudo = CLASSES[classe].escudos[index_item];
            /*{
                nome: 'Escudo de Corpo',
                ca: 1,
                preco: { quantidade: 10, moeda: 'po' },
                peso: 7.5,
                ataques_por_rodada: 0,
                detalhes: [ "O Escudo de Corpo fornece +1 de Categoria de Armadura para ataques à distância." ]
              },*/
            let resultado_moedas = reduzir_moedas(moeda_limite, escudo.preco);
            let resultado_peso = peso_limite - escudo.peso;
            if ( (resultado_moedas.valido) && (resultado_peso >= 0) ) {

              ca_escudo = true;
              let ataques_por_rodada = '';
              if (escudo.ataques_por_rodada > 0) {
                ataques_por_rodada = 'Ataques por rodada: ' + escudo.ataques_por_rodada + ', ';
              }
              personagem["Itens"].push(escudo.nome + ', ' + ataques_por_rodada + escudo.peso + 'kg, ' + escudo.preco.quantidade + ' ' + escudo.preco.moeda);
              if (escudo.detalhes.length > 0) {
                personagem["Detalhes"].push.apply(personagem["Detalhes"], escudo.detalhes);
              }
              callback(resultado_moedas.moedas, resultado_peso, ca_escudo);
            } else {
              callback(moeda_limite, peso_limite, ca_escudo);
            }
          }
        } else {
          callback(moeda_limite, peso_limite, ca_escudo);
        }
      }

      function sortear_itens_armaduras(moeda_limite, peso_limite, classe, personagem, callback) {

        let armadura_mais_leve = { peso: 1000, validar: true };
        if (CLASSES[classe]["Grupo"] == "Homem de Armas") {
          armadura_mais_leve.validar = false;
        }

        if (CLASSES[classe].armaduras.length > 0) {

          let sorteio_armadura = [];

          CLASSES[classe].armaduras.forEach((armadura, index_armadura) => {

            /*
              { nome: 'Corselete de Couro Simples', ca: 8, preco: { quantidade: 5, moeda: 'po' }, peso: 7.5 },
            */
            let moeda_descontada = reduzir_moedas(moeda_limite, armadura.preco);
            if ( (moeda_descontada.valido) && (peso_limite >= armadura.peso) ) {
              if (armadura_mais_leve.validar) {
                if (armadura.peso < armadura_mais_leve.peso) {
                  armadura_mais_leve.peso = armadura.peso;
                  sorteio_armadura.push(armadura);
                }
              } else {
                sorteio_armadura.push(armadura);
              }
            }

            if (index_armadura == (CLASSES[classe].armaduras.length - 1)) {
              if (sorteio_armadura.length > 0) {

                let index_sorteio = Math.floor(Math.random() * sorteio_armadura.length);
                let armadura_sorteada = sorteio_armadura[index_sorteio];
                let moeda_descontada_final = reduzir_moedas(moeda_limite, armadura_sorteada.preco);
                let peso_descontado_final = peso_limite - armadura_sorteada.peso;
                personagem["Itens"].push(armadura_sorteada.nome + ', ' + armadura_sorteada.peso + 'kg, ' + armadura_sorteada.preco.quantidade + ' ' + armadura_sorteada.preco.moeda);
                callback(moeda_descontada_final.moedas, peso_descontado_final, armadura_sorteada.ca);

              } else {
                callback(moeda_limite, peso_limite, 10);
              }
            }
          });

        } else {
          callback(moeda_limite, peso_limite, 10);
        }
      }

      function restringir_armas(array_completo, array_restrito, callback) {
        let array_final = [];
        if ((array_restrito != undefined) && (array_restrito != null) && (array_restrito.length > 0)) {
          array_completo.forEach((item_completo, index_completo) => {
            array_restrito.forEach((item_restrito, index_restrito) => {

              if (item_completo == item_restrito) {
                array_final.push(item_completo);
              }

              if (index_restrito == (array_restrito.length - 1)) {
                if (index_completo == (array_completo.length - 1)) {
                  callback(array_final);
                }
              }
            });
          });
        } else {
          return callback(array_completo);
        }
      }

      function formatar_misseis(nome_missel, missel) {
        /*
        "Dardo Farpado": { quantidade: 20, preco: { quantidade: 20, moeda: 'pp' }, peso: 0, tamanho: 'Pequeno', tipo: 'Perfurante', velocidade: 0, dano_p: '1d3', dano_mg: '1d3' },
        */
        return missel.quantidade + "x " + nome_missel + ", " +
              (missel.peso * missel.quantidade).toFixed(2) + "kg, " + missel.tamanho + ", " +
              missel.tipo + ", Velocidade " + missel.velocidade + ", Dano (P) " + missel.dano_p + ", Dano (MG) " + missel.dano_mg + ", Disparos/Rodada: " + missel.cadencia;
      }

      function formatar_arma(nome_arma, arma) {
        /*
        "Arcabuz": { preco: { quantidade: 500, moeda: 'po' }, peso: 5, tamanho: 'Médio', tipo: 'Perfurante', velocidade: 15, dano_p: '1d10', dano_mg: '1d10', dano: 10, detalhes: [] },
        */
        let tamanho = '';
        if (arma.tamanho != '') {
          tamanho = arma.tamanho + ", ";
        }
        let tipo = '';
        if (arma.tipo != '') {
          tipo = arma.tipo + ", ";
        }
        let danos = '';
        if (arma.dano_p != '') {
          danos = ", Dano (P) " + arma.dano_p + ", Dano (MG) " + arma.dano_mg;
        }
        return nome_arma + ", " + arma.peso + "kg, " + arma.preco.quantidade + " " + arma.preco.moeda + ", " + tamanho + tipo + "Velocidade " + arma.velocidade + danos;
      }

      function sortear_itens_armas(moeda_limite, peso_limite, classe, raca, personagem, callback) {
        let arma_talento = '';
        let itens_extras = [];
        let keys_armas = Object.keys(ARMAS);
        let arma_mais_forte = { arma: '', dano: 0 };
        let moeda_descontada_final = moeda_limite;
        let peso_descontado_final = peso_limite;
        let armas_ja_sorteadas = [];

        restringir_armas(keys_armas, CLASSES[classe].armas, sorteio_armas_1 => {
          restringir_armas(sorteio_armas_1, RACAS[raca].armas_importantes, sorteio_armas_2 => {
            restringir_armas(sorteio_armas_2, CLASSES[classe].armas_divindade, sorteio_armas_3 => {
              if (sorteio_armas_3.length == 0) {
                if ( (CLASSES[classe].armas_divindade != undefined) && (CLASSES[classe].armas_divindade != null) && (CLASSES[classe].armas_divindade.length > 0) ) {
                  sorteio_armas_3 = CLASSES[classe].armas_divindade.slice();
                } else if (CLASSES[classe].armas.length > 0) {
                  sorteio_armas_3 = CLASSES[classe].armas.slice();
                } else if (RACAS[raca].armas_importantes.length > 0) {
                  sorteio_armas_3 = RACAS[raca].armas_importantes.slice();
                } else {
                  sorteio_armas_3.push("Adaga");
                  sorteio_armas_3.push("Punhal");
                  sorteio_armas_3.push("Faca");
                  sorteio_armas_3.push("Chicote");
                  sorteio_armas_3.push("Cajado");
                }
              }

              /* Sortear arma */
              let quantidade_armas = Math.floor(Math.random() * 4) + 2;
              debug("Quantidade de armas sorteadas: " + quantidade_armas);
              for (let qtde = 0; qtde < quantidade_armas; qtde++) {

                let index_sorteio = Math.floor(Math.random() * sorteio_armas_3.length);
                let nome_arma = sorteio_armas_3[index_sorteio];
                let arma = ARMAS[nome_arma];
                let arma_preco = { quantidade: 10000, moeda: 'po' };

                if ((arma == 'undefined') || (arma == undefined) || (arma == null) || (arma == '')) {
                  console.log('A arma ' + nome_arma + ' não foi encontrada na lista de armas.');
                } else {
                  arma_preco = arma.preco;
                }

                let moeda_descontada = reduzir_moedas(moeda_descontada_final, arma_preco);
                if ( (!armas_ja_sorteadas.includes(nome_arma)) && (moeda_descontada.valido) && (peso_descontado_final >= arma.peso) ) {

                  /*
                    "Arcabuz": { preco: { quantidade: 500, moeda: 'po' }, peso: 5, tamanho: 'Médio', tipo: 'Perfurante', velocidade: 15, dano_p: '1d10', dano_mg: '1d10', dano: 10, detalhes: [] },
                  */

                  if (arma_mais_forte.dano < arma.dano) {
                    arma_mais_forte.arma = nome_arma;
                    arma_mais_forte.dano = arma.dano;
                  }

                  moeda_descontada_final = reduzir_moedas(moeda_descontada_final, arma.preco).moedas;
                  peso_descontado_final = peso_descontado_final - arma.peso;
                  personagem["Itens"].push(formatar_arma(nome_arma, arma));
                  armas_ja_sorteadas.push(nome_arma);

                  if (arma.detalhes.length > 0) {
                    personagem["Detalhes"].push.apply(personagem["Detalhes"], arma.detalhes);
                  }

                  /*
                    "Zarabatana" "Dardo Agulha"
                    "Arco Longo Composto" "Flecha da Guerra"
                    "Arco Curto Composto" "Flecha de Caça"
                    "Arco Longo" "Flecha da Guerra"
                    "Arco Curto" "Flecha de Caça"
                    "Besta de Mão" "Quadrelo de Mão"
                    "Besta Pesada" "Quadrelo Grande"
                    "Besta Leve" "Quadrelo Pequeno"
                    "Funda" "Chumbo de Funda"
                    "Cajado-Funda" "Chumbo de Funda"
                  */
                  if ( (nome_arma == "Arco Longo Composto") || (nome_arma == "Arco Longo") ) {
                    itens_extras.push( "Aljava" );
                    let missel = MISSEIS["Flecha da Guerra"];
                    let nome_formatado = formatar_misseis("Flecha da Guerra", missel);
                    personagem["Itens"].push(nome_formatado);
                    moeda_descontada_final = reduzir_moedas(moeda_descontada_final, missel.preco).moedas;
                    if (moeda_descontada_final < 0) moeda_descontada_final = 0;
                    peso_descontado_final = peso_descontado_final - missel.peso;
                    if (peso_descontado_final < 0) peso_descontado_final = 0;
                  } else if ( (nome_arma == "Arco Curto Composto") || (nome_arma == "Arco Curto") ) {
                    itens_extras.push( "Aljava" );
                    let missel = MISSEIS["Flecha de Caça"];
                    let nome_formatado = formatar_misseis("Flecha de Caça", missel);
                    personagem["Itens"].push(nome_formatado);
                    moeda_descontada_final = reduzir_moedas(moeda_descontada_final, missel.preco).moedas;
                    if (moeda_descontada_final < 0) moeda_descontada_final = 0;
                    peso_descontado_final = peso_descontado_final - missel.peso;
                    if (peso_descontado_final < 0) peso_descontado_final = 0;
                  } else if ( nome_arma == "Zarabatana" ) {
                    let missel = MISSEIS["Dardo Agulha"];
                    let nome_formatado = formatar_misseis("Dardo Agulha", missel);
                    personagem["Itens"].push(nome_formatado);
                    moeda_descontada_final = reduzir_moedas(moeda_descontada_final, missel.preco).moedas;
                    if (moeda_descontada_final < 0) moeda_descontada_final = 0;
                    peso_descontado_final = peso_descontado_final - missel.peso;
                    if (peso_descontado_final < 0) peso_descontado_final = 0;
                  } else if ( nome_arma == "Besta de Mão" ) {
                    itens_extras.push( "Aljava" );
                    let missel = MISSEIS["Quadrelo de Mão"];
                    let nome_formatado = formatar_misseis("Quadrelo de Mão", missel);
                    personagem["Itens"].push(nome_formatado);
                    moeda_descontada_final = reduzir_moedas(moeda_descontada_final, missel.preco).moedas;
                    if (moeda_descontada_final < 0) moeda_descontada_final = 0;
                    peso_descontado_final = peso_descontado_final - missel.peso;
                    if (peso_descontado_final < 0) peso_descontado_final = 0;
                  } else if ( nome_arma == "Besta Pesada" ) {
                    itens_extras.push( "Aljava" );
                    let missel = MISSEIS["Quadrelo Grande"];
                    let nome_formatado = formatar_misseis("Quadrelo Grande", missel);
                    personagem["Itens"].push(nome_formatado);
                    moeda_descontada_final = reduzir_moedas(moeda_descontada_final, missel.preco).moedas;
                    if (moeda_descontada_final < 0) moeda_descontada_final = 0;
                    peso_descontado_final = peso_descontado_final - missel.peso;
                    if (peso_descontado_final < 0) peso_descontado_final = 0;
                  } else if ( nome_arma == "Besta Leve" ) {
                    itens_extras.push( "Aljava" );
                    let missel = MISSEIS["Quadrelo Pequeno"];
                    let nome_formatado = formatar_misseis("Quadrelo Pequeno", missel);
                    personagem["Itens"].push(nome_formatado);
                    moeda_descontada_final = reduzir_moedas(moeda_descontada_final, missel.preco).moedas;
                    if (moeda_descontada_final < 0) moeda_descontada_final = 0;
                    peso_descontado_final = peso_descontado_final - missel.peso;
                    if (peso_descontado_final < 0) peso_descontado_final = 0;
                  } else if ( (nome_arma == "Funda") || (nome_arma == "Cajado-Funda") ) {
                    let missel = MISSEIS["Chumbo de Funda"];
                    let nome_formatado = formatar_misseis("Chumbo de Funda", missel);
                    personagem["Itens"].push(nome_formatado);
                    moeda_descontada_final = reduzir_moedas(moeda_descontada_final, missel.preco).moedas;
                    if (moeda_descontada_final < 0) moeda_descontada_final = 0;
                    peso_descontado_final = peso_descontado_final - missel.peso;
                    if (peso_descontado_final < 0) peso_descontado_final = 0;
                  }
                }

                if (qtde == (quantidade_armas - 1)) {

                  if (arma_mais_forte.dano > 0) {
                    arma_talento = arma_mais_forte.arma;
                  }

                  callback(moeda_descontada_final, peso_descontado_final, arma_talento, itens_extras);
                }
              }

            });
          });
        });
      }

      function sortear_itens(classe, raca, personagem, callback) {

        if (CLASSES[classe]["Grupo"] == "Homem de Armas") {
          personagem["Dados Básicos"]["Moedas"] = (
            (Math.floor(Math.random() * 4) + 1) +
            (Math.floor(Math.random() * 4) + 1) +
            (Math.floor(Math.random() * 4) + 1) +
            (Math.floor(Math.random() * 4) + 1) +
            (Math.floor(Math.random() * 4) + 1)
          ) * 10;
        } else if (CLASSES[classe]["Grupo"] == "Arcano") {
          personagem["Dados Básicos"]["Moedas"] = ((Math.floor(Math.random() * 4) + 1) + 1) * 10;
        } else if (CLASSES[classe]["Grupo"] == "Sacerdote") {
          personagem["Dados Básicos"]["Moedas"] = (
            (Math.floor(Math.random() * 6) + 1) +
            (Math.floor(Math.random() * 6) + 1) +
            (Math.floor(Math.random() * 6) + 1)
          ) * 10;
        } else if (CLASSES[classe]["Grupo"] == "Ladino") {
          personagem["Dados Básicos"]["Moedas"] = (
            (Math.floor(Math.random() * 6) + 1) +
            (Math.floor(Math.random() * 6) + 1)
          ) * 10;
        }

        debug("");
        debug("-------------------------------------------------------------------------");
        debug("Calcular itens para " + raca + " e " + classe);
        debug("Moedas sorteadas: " + personagem["Dados Básicos"]["Moedas"] + " po");
        debug("Peso sorteado: " + personagem["Habilidades"]["Força"]["Carga Permitida"]);

        /* Alocar Mochila */
        let moeda_limite = (personagem["Dados Básicos"]["Moedas"] - 2);
        let peso_limite = personagem["Habilidades"]["Força"]["Carga Permitida"] - 1;
        if (peso_limite < 0) { peso_limite = 0; }
        personagem["Itens"].push("Mochila, 2 po, 1kg");

        debug("Moedas pós mochila: " + moeda_limite + " po");
        debug("Peso pós mochila: " + peso_limite);

        sortear_itens_escudos(moeda_limite, peso_limite, classe, personagem, (resultado_moedas_1, resultado_peso_1, ca_escudo) => {
          debug("Moedas pós escudo: " + resultado_moedas_1 + " po");
          debug("Peso pós escudo: " + resultado_peso_1);
          sortear_itens_armaduras(resultado_moedas_1, resultado_peso_1, classe, personagem, (resultado_moedas_2, resultado_peso_2, ca_armadura) => {
            debug("Moedas pós armadura: " + resultado_moedas_2 + " po");
            debug("Peso pós armadura: " + resultado_peso_2);
            sortear_itens_armas(resultado_moedas_2, resultado_peso_2, classe, raca, personagem, (resultado_moedas_3, resultado_peso_3, arma_talento, itens_extras) => {
              debug("Moedas pós armas: " + resultado_moedas_3 + " po");
              debug("Peso pós armas: " + resultado_peso_3);

              let ajuste_ca = personagem["Habilidades"]["Destreza"]["Ajuste Defensivo"];
              let ca_final = ca_armadura + ajuste_ca;
              if (ca_escudo) {
                ca_final = ca_final - 1;
              }

              personagem["Dados Básicos"]["Categoria de Armadura"] = ca_final;
              personagem["Dados Básicos"]["Moedas"] = converter_po_em_moedas(resultado_moedas_3);
              personagem["Dados Básicos"]["Peso dos Equipamentos"] = (personagem["Habilidades"]["Força"]["Carga Permitida"] - resultado_peso_3).toFixed(2);
              callback(arma_talento);

            });
          });
        });
      }

      function sortear_dados_basicos(personagem, callback) {
        let classe = ajustar_nome_classe(personagem);
        let raca = ajustar_nome_raca(personagem);

        /* Ajustes de Resistências */
        personagem["Detalhes"].push('Aplique o Ajuste Defensivo de Destreza ao lance 1d20 de Resistência contra ataques em que é possível esquivar-se (raios, rochas, etc).');
        if ( (raca == "Elfo") || (raca == "Gnomo") || (raca == "Meio-Elfo") || (raca == "Humano") ) {
          personagem["Detalhes"].push('Aplique a Resistência contra Veneno (Constituição) ao lance 1d20 de Resistência contra venenos.');
        }
        personagem["Detalhes"].push('Aplique o Ajuste de Defesa Contra Magia (Sabedoria) ao lance 1d20 de Resistência contra magias que atacam a mente.');

        let generos = [ 'Masculino' , 'Feminino' ];
        let genero = generos[Math.floor(Math.random() * 2)];
        personagem["Dados Básicos"]["Gênero"] = genero;

        let ajuste_altura = RACAS[raca].altura[genero].maximo - RACAS[raca].altura[genero].minimo;
        let altura = (Math.random() * ajuste_altura) + RACAS[raca].altura[genero].minimo;
        personagem["Dados Básicos"]["Altura"] = altura.toFixed(2);

        let ajuste_idade = RACAS[raca].idade.maximo - RACAS[raca].idade.minimo;
        let idade = Math.floor(Math.random() * ajuste_idade) + RACAS[raca].idade.minimo;
        personagem["Dados Básicos"]["Idade"] = idade;

        let ajuste_peso = RACAS[raca].peso[genero].maximo - RACAS[raca].peso[genero].minimo;
        let peso = (Math.random() * ajuste_peso) + RACAS[raca].peso[genero].minimo;
        personagem["Dados Básicos"]["Peso"] = peso.toFixed(2);

        personagem["Detalhes"].push.apply(personagem["Detalhes"], RACAS[raca].detalhes);

        let base_movimentacao = 0;

        if (personagem["Raça"].indexOf('Halfling') > -1) {

          base_movimentacao = 6;

          let detalheRobusto = 'Qualquer Halfling Robusto puro tem 15% de chance de ter uma infravisão normal, até 20 metros.';
          let detalheNaoRobustos = 'Halflings que não são Robustos puros, tem 25% de chance de ter uma infravisão limitada, até 10 metros.';
          let resultadoDado = 0;

          if (personagem["Raça"] == 'Halfling Robustos') {

            personagem["Detalhes"].push('Halflings com sangue Robusto podem notar o desnível de uma passagem com 75% de precisão (1-3 em 1d4).');
            personagem["Detalhes"].push('Halflings com sangue Robusto podem determinar a direção com 50% de eficiência (1-3 em 1d6).');

            resultadoDado = Math.floor(Math.random() * 100);
            if (resultadoDado < 15) {
              personagem["Detalhes"].push(detalheRobusto);
              personagem["Dados Básicos"]["Infravisão"] = '20 metros no escuro';
            } else {
              resultadoDado = Math.floor(Math.random() * 100);
              if (resultadoDado < 25) {
                personagem["Detalhes"].push(detalheNaoRobustos);
                personagem["Dados Básicos"]["Infravisão"] = '10 metros no escuro';
              }
            }
          } else {
            resultadoDado = Math.floor(Math.random() * 100);
            if (resultadoDado < 25) {
              personagem["Detalhes"].push(detalheNaoRobustos);
              personagem["Dados Básicos"]["Infravisão"] = '10 metros no escuro';
            }
          }
        } else if (raca == "Anão") {
          personagem["Dados Básicos"]["Infravisão"] = '20 metros no escuro';
          base_movimentacao = 6;
        } else if (raca == "Elfo") {
          personagem["Dados Básicos"]["Infravisão"] = '20 metros no escuro';
          base_movimentacao = 12;
        } else if (raca == "Gnomo") {
          personagem["Dados Básicos"]["Infravisão"] = '20 metros no escuro';
          base_movimentacao = 6;
        } else if (raca == "Meio-Elfo") {
          personagem["Dados Básicos"]["Infravisão"] = '20 metros no escuro';
          base_movimentacao = 12;
        } else if (raca == "Humano") {
          base_movimentacao = 12;
        }

        /* Movimentação */
        personagem["Movimentação"]["Taxa-Base"] = base_movimentacao;
        personagem["Movimentação"]["Em campo aberto"] = (base_movimentacao * 9);
        personagem["Movimentação"]["Correndo"] = (personagem["Movimentação"]["Em campo aberto"] * 2);
        personagem["Movimentação"]["Em dungeons"] = Math.floor(personagem["Movimentação"]["Em campo aberto"] / 3);
        personagem["Movimentação"]["Em combates"] = Math.floor(personagem["Movimentação"]["Em dungeons"] / 2);
        personagem["Movimentação"]["Investida"] = Math.floor(personagem["Movimentação"]["Em combates"] * 1.5);
        personagem["Movimentação"]["Natação"] = Math.floor(personagem["Movimentação"]["Em campo aberto"] / 2);
        if (classe == "Ladrão") {
          personagem["Movimentação"]["Escalada (Irregular, Seca)"] = (base_movimentacao * 60);
        } else {
          personagem["Movimentação"]["Escalada (Irregular, Seca)"] = (base_movimentacao * 30);
        }
        personagem["Movimentação"]["Em campo aberto"] = personagem["Movimentação"]["Em campo aberto"] + "m";
        personagem["Movimentação"]["Correndo"] = personagem["Movimentação"]["Correndo"] + "m";
        personagem["Movimentação"]["Em dungeons"] = personagem["Movimentação"]["Em dungeons"] + "m";
        personagem["Movimentação"]["Em combates"] = personagem["Movimentação"]["Em combates"] + "m";
        personagem["Movimentação"]["Investida"] = personagem["Movimentação"]["Investida"] + "m";
        personagem["Movimentação"]["Natação"] = personagem["Movimentação"]["Natação"] + "m";
        personagem["Movimentação"]["Escalada (Irregular, Seca)"] = personagem["Movimentação"]["Escalada (Irregular, Seca)"] + "cm";

        /* Ajustes atributos */

        let forca = personagem["Habilidades"]["Força"]["Valor da Habilidade"];
        let forca_extraordinaria = 0;
        if ( (forca == 18) && (personagem["Raça"].indexOf('Halfling') == -1) ) {
          forca_extraordinaria = Math.floor(Math.random() * 100) + 1;
          personagem["Habilidades"]["Força"]["Força Extraordinária"] = forca_extraordinaria;
        }
        personagem["Habilidades"]["Força"]["Chance de Acertar"] = atributos_forca("Chance de Acertar", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Ajuste de Dano"] = atributos_forca("Ajuste de Dano", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Carga Permitida"] = atributos_forca("Carga Permitida", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Sustentação"] = atributos_forca("Sustentação", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Abrir Portas"] = atributos_forca("Abrir Portas", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Barras/Portais"] = atributos_forca("Barras/Portais", forca, forca_extraordinaria);

        let destreza = personagem["Habilidades"]["Destreza"]["Valor da Habilidade"];
        personagem["Habilidades"]["Destreza"]["Ajuste de Reação"] = atributos_destreza("Ajuste de Reação", destreza);
        personagem["Habilidades"]["Destreza"]["Ataque à Distância"] = atributos_destreza("Ataque à Distância", destreza);
        personagem["Habilidades"]["Destreza"]["Ajuste Defensivo"] = atributos_destreza("Ajuste Defensivo", destreza);
        personagem["Dados Básicos"]["Teste de Surpresa"] = "Até 3 em 1d10";
        if (personagem["Habilidades"]["Destreza"]["Ajuste de Reação"] < 0) {
          personagem["Dados Básicos"]["Teste de Surpresa"] = personagem["Dados Básicos"]["Teste de Surpresa"] + personagem["Habilidades"]["Destreza"]["Ajuste de Reação"];
        } else if (personagem["Habilidades"]["Destreza"]["Ajuste de Reação"] > 0) {
          personagem["Dados Básicos"]["Teste de Surpresa"] = personagem["Dados Básicos"]["Teste de Surpresa"] + "+" + personagem["Habilidades"]["Destreza"]["Ajuste de Reação"];
        }

        let constituicao = personagem["Habilidades"]["Constituição"]["Valor da Habilidade"];
        let ajuste_pontos_de_vida = atributos_constituicao("Ajuste dos Pontos de Vida", constituicao, classe);
        personagem["Habilidades"]["Constituição"]["Ajuste dos Pontos de Vida"] = ajuste_pontos_de_vida;
        personagem["Habilidades"]["Constituição"]["Colapso"] = atributos_constituicao("Colapso", constituicao, classe);
        personagem["Habilidades"]["Constituição"]["Chance de Ressurreição"] = atributos_constituicao("Chance de Ressurreição", constituicao, classe);
        personagem["Habilidades"]["Constituição"]["Resistência contra Veneno"] = atributos_constituicao("Resistência contra Veneno", constituicao, classe);
        personagem["Habilidades"]["Constituição"]["Regeneração"] = atributos_constituicao("Regeneração", constituicao, classe);

        let vida = Math.floor(Math.random() * CLASSES[classe].dado_de_vida) + 1;
        if (constituicao == 20) {
          if (vida == 1) {
            vida = 2;
          }
        } else if ( (constituicao >= 21) && (constituicao <= 22) ) {
          if ( (vida >= 1) && (vida <= 2) ) {
            vida = 3;
          }
        } else if ( (constituicao >= 23) && (constituicao <= 25) ) {
          if ( (vida >= 1) && (vida <= 3) ) {
            vida = 4;
          }
        }
        personagem["Dados Básicos"]["Pontos de Vida"] = vida + ajuste_pontos_de_vida;

        if (constituicao == 20) {
          personagem["Detalhes"].push("Todos os resultados de 1 nos Dados de Vida são considerados como 2.");
        } else if ( (constituicao >= 21) && (constituicao <= 22) ) {
          personagem["Detalhes"].push("Todos os resultados de 1 e 2 nos Dados de Vida são considerados como 3.");
        } else if ( (constituicao >= 23) && (constituicao <= 25) ) {
          personagem["Detalhes"].push("Todos os resultados de 1, 2 e 3 nos Dados de Vida são considerados como 4.");
        }

        let inteligencia = personagem["Habilidades"]["Inteligência"]["Valor da Habilidade"];
        let numero_de_linguas = atributos_inteligencia("Número de Línguas", inteligencia);
        personagem["Habilidades"]["Inteligência"]["Número de Línguas"] = numero_de_linguas;
        personagem["Habilidades"]["Inteligência"]["Círculo de Magia"] = atributos_inteligencia("Círculo de Magia", inteligencia);
        personagem["Habilidades"]["Inteligência"]["Chance de Aprender Magia"] = atributos_inteligencia("Chance de Aprender Magia", inteligencia);
        personagem["Habilidades"]["Inteligência"]["Número Máx Magias/Círculo"] = atributos_inteligencia("Número Máx Magias/Círculo", inteligencia);
        personagem["Habilidades"]["Inteligência"]["Imunidade a Magias"] = atributos_inteligencia("Imunidade a Magias", inteligencia);

        acrescentar_novas_linguas(personagem, raca, numero_de_linguas, (numero_de_linguas) => {

          if (CLASSES[classe]["Grupo"] == "Homem de Armas") {
            personagem["Pontos de Perícia"]["Perícias Armas Inicial"] = 4;
            personagem["Pontos de Perícia"]["Perícias Armas Nº Níveis"] = 3;
            personagem["Pontos de Perícia"]["Perícias Armas Penalidades"] = -2;
            personagem["Pontos de Perícia"]["Perícias Comuns Inicial"] = 3 + numero_de_linguas;
            personagem["Pontos de Perícia"]["Perícias Comuns Nº Níveis"] = 3;

            personagem["Resistência"]["Paralisação, Veneno ou Morte por Magia"] = 14;
            personagem["Resistência"]["Bastão, Cajado ou Varinha"] = 16;
            personagem["Resistência"]["Petrificação ou Transformação"] = 15;
            personagem["Resistência"]["Sopro-de-Dragão"] = 17;
            personagem["Resistência"]["Magia"] = 17;

          } else if (CLASSES[classe]["Grupo"] == "Arcano") {
            personagem["Pontos de Perícia"]["Perícias Armas Inicial"] = 1;
            personagem["Pontos de Perícia"]["Perícias Armas Nº Níveis"] = 6;
            personagem["Pontos de Perícia"]["Perícias Armas Penalidades"] = -5;
            personagem["Pontos de Perícia"]["Perícias Comuns Inicial"] = 4 + numero_de_linguas;
            personagem["Pontos de Perícia"]["Perícias Comuns Nº Níveis"] = 3;

            personagem["Resistência"]["Paralisação, Veneno ou Morte por Magia"] = 14;
            personagem["Resistência"]["Bastão, Cajado ou Varinha"] = 11;
            personagem["Resistência"]["Petrificação ou Transformação"] = 13;
            personagem["Resistência"]["Sopro-de-Dragão"] = 15;
            personagem["Resistência"]["Magia"] = 12;

          } else if (CLASSES[classe]["Grupo"] == "Sacerdote") {
            personagem["Pontos de Perícia"]["Perícias Armas Inicial"] = 2;
            personagem["Pontos de Perícia"]["Perícias Armas Nº Níveis"] = 4;
            personagem["Pontos de Perícia"]["Perícias Armas Penalidades"] = -3;
            personagem["Pontos de Perícia"]["Perícias Comuns Inicial"] = 4 + numero_de_linguas;
            personagem["Pontos de Perícia"]["Perícias Comuns Nº Níveis"] = 3;

            personagem["Resistência"]["Paralisação, Veneno ou Morte por Magia"] = 10;
            personagem["Resistência"]["Bastão, Cajado ou Varinha"] = 14;
            personagem["Resistência"]["Petrificação ou Transformação"] = 13;
            personagem["Resistência"]["Sopro-de-Dragão"] = 16;
            personagem["Resistência"]["Magia"] = 15;

          } else if (CLASSES[classe]["Grupo"] == "Ladino") {
            personagem["Pontos de Perícia"]["Perícias Armas Inicial"] = 2;
            personagem["Pontos de Perícia"]["Perícias Armas Nº Níveis"] = 4;
            personagem["Pontos de Perícia"]["Perícias Armas Penalidades"] = -3;
            personagem["Pontos de Perícia"]["Perícias Comuns Inicial"] = 3 + numero_de_linguas;
            personagem["Pontos de Perícia"]["Perícias Comuns Nº Níveis"] = 4;

            personagem["Resistência"]["Paralisação, Veneno ou Morte por Magia"] = 13;
            personagem["Resistência"]["Bastão, Cajado ou Varinha"] = 14;
            personagem["Resistência"]["Petrificação ou Transformação"] = 12;
            personagem["Resistência"]["Sopro-de-Dragão"] = 16;
            personagem["Resistência"]["Magia"] = 15;
          }

          let sabedoria = personagem["Habilidades"]["Sabedoria"]["Valor da Habilidade"];
          personagem["Habilidades"]["Sabedoria"]["Ajuste de Defesa Contra Magia"] = atributos_sabedoria("Ajuste de Defesa Contra Magia", sabedoria);
          personagem["Habilidades"]["Sabedoria"]["Magias Extras"] = atributos_sabedoria("Magias Extras", sabedoria);
          personagem["Habilidades"]["Sabedoria"]["Chance da Magia Falhar"] = atributos_sabedoria("Chance da Magia Falhar", sabedoria);
          personagem["Habilidades"]["Sabedoria"]["Imunidade à Magia"] = atributos_sabedoria("Imunidade à Magia", sabedoria);

          let carisma = personagem["Habilidades"]["Carisma"]["Valor da Habilidade"];
          personagem["Habilidades"]["Carisma"]["Nº Máximo de aliados"] = atributos_carisma("Nº Máximo de aliados", carisma);
          personagem["Habilidades"]["Carisma"]["Fator de Lealdade"] = atributos_carisma("Fator de Lealdade", carisma);
          personagem["Habilidades"]["Carisma"]["Ajuste de reação"] = atributos_carisma("Ajuste de reação", carisma);

          /* Ajustar talentos dos ladinos */
          definir_talentos(classe, personagem, () => {

            /* Detalhes */
            personagem["Detalhes"].push.apply(personagem["Detalhes"], CLASSES[classe].detalhes);

            sortear_itens(classe, raca, personagem, (arma_talento) => {

              // movimentação
              // calcular CA
              // instrumento musical do bardo, já com a perícia
              // perícia História Local para o bardo

              callback();

            });

          });

        });
      }

      function obter_dados_personagem(callback) {
        let urlParams = new URLSearchParams(window.location.search);
        let h = urlParams.get('h');
        let raca = urlParams.get('r');
        let habilidades = [];

        // ?h=10,11,12,13,14,15&r=Anão
        if ( (h != undefined) && (h != null) && (h != '') && (h.length > 0) && (h.split(',').length == 6) ) {
          let hs = h.split(',');
          let personagem = {
            "Habilidades": {
              "Força": { "Valor da Habilidade": parseInt(hs[0]) },
              "Destreza": { "Valor da Habilidade": parseInt(hs[1]) },
              "Constituição": { "Valor da Habilidade": parseInt(hs[2]) },
              "Inteligência": { "Valor da Habilidade": parseInt(hs[3]) },
              "Sabedoria": { "Valor da Habilidade": parseInt(hs[4]) },
              "Carisma": { "Valor da Habilidade": parseInt(hs[5]) },
            },
            "Raça": raca
          };
          callback(personagem);
        } else {
          sortear_personagem(personagem => {
            callback(personagem);
          });
        }
      }

      render();

    </script>
  </body>
</html>
