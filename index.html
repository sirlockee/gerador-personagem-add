
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <title>Advanced Dungeon & Dragons</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="img/favicon.gif">
    <style>
      html {
        width: 100%;
        box-sizing: border-box;
      }
      body {
        padding: 10px;
        margin: 0;
        border: 0;
        width: 100%;
        box-sizing: border-box;

        font-family: Consolas, "Lucida Console", Courier, mono !important;
        font-size: 12px !important;
        color: rgb(34, 34, 34) !important;
      }
      header {
        width: 100%;
        display: block;
        box-sizing: border-box;
      }
      header img {
        max-width: 300px;
        display: block;
        margin: 0 auto;
      }
      div {
        width: auto !important;
        display: block;
        box-sizing: border-box;
      }
      table {
        width: auto !important;
      }
      thead tr th {
        display: none;
      }
      td {
        font-size: 0.9em !important;
      }
      tbody tr td:first-child {
        font-weight: bold;
        width: auto !important;
        border: 0 !important;
      }
      tbody tr td tbody tr td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
      }
      tbody tr:nth-child(4) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
      }
      tbody tr:nth-child(6) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(7) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(8) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(9) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      tbody tr:nth-child(10) td tbody tr td:last-child {
        background-color: #eee !important;
        border: 0 !important;
        white-space: normal !important;
      }
      td {
        max-width: 320px !important;
      }
      #botao {
        padding: 5px;
        margin-bottom: 10px;
        background-color: #eee;
        width: 100% !important;
      }
      #ficha {
        margin-bottom: 30px;
      }
      button {
        background-color: #ddd;
      }
    </style>
  </head>
  <body>

    <header>
      <img src="img/logo.gif" />
    </header>
    <div id="botao">
      Clique no botão para gerar/copiar a URL deste personagem e compartilhar com outros jogadores. Ela estará salva na área de transferência do seu celular/computador.
      <br /><br />
      <button type="button">Copiar URL para compartilhar personagem</button>
      <span></span>
    </div>
    <div id="ficha"></div>

    <script src="scripts/prettyprint.js"></script>
    <script type="text/javascript">

      function fallbackCopyTextToClipboard(text) {
        var textArea = document.createElement("textarea");
        textArea.value = text;

        // Avoid scrolling to bottom
        textArea.style.top = "0";
        textArea.style.left = "0";
        textArea.style.position = "fixed";

        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();

        try {
          var successful = document.execCommand('copy');
          var msg = successful ? 'successful' : 'unsuccessful';
          console.log('Fallback: Copying text command was ' + msg);
        } catch (err) {
          console.error('Fallback: Oops, unable to copy', err);
        }

        document.body.removeChild(textArea);
      }

      function copyTextToClipboard(text, callback) {
        if (!navigator.clipboard) {
          fallbackCopyTextToClipboard(text);
          return;
        }
        navigator.clipboard.writeText(text).then(function() {
          console.log('Async: Copying to clipboard was successful!');
          callback(true);
        }, function(err) {
          console.error('Async: Could not copy text: ', err);
          callback(false);
        });
      }

      document.querySelector("div#botao > button").addEventListener("click", evento => {
        let url = window.location.href;
        copyTextToClipboard(url, resultado => {
          let msg = "URL copiada!";
          if (!resultado) msg = "Houve um problema para copiar a URL!";
          document.querySelector("div#botao > span").textContent = msg;
        });
      });

      const PERICIAS = {
        "Rastrear": {}
      };

      const RACAS = {
        "Humano": {
          "Força": { minimo: 3, maximo: 18 },
          "Destreza": { minimo: 3, maximo: 18 },
          "Constituição": { minimo: 3, maximo: 18 },
          "Inteligência": { minimo: 3, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 3, maximo: 18 },
          ajustes: {},
          detalhes: [
            'Humanos podem ser de qualquer classe e alcançar qualquer nível na classe escolhida'
          ],
          altura: { "Masculino": { minimo: 1.52, maximo: 2.02 }, "Feminino": { minimo: 1.5, maximo: 2.0 }},
          idade: { minimo: 15, maximo: 130 },
          peso: { "Masculino": { minimo: 70, maximo: 100 }, "Feminino": { minimo: 50, maximo: 80 }},
          linguas_importantes: [ "comum" ],
          linguas: [ 'élfico', 'do anões', 'dos gnomos', 'dos halflings', 'dos goblins', 'dos robgoblins', 'dos orcs', 'dos gnolls' ],
          armas_importantes: []
        },
        "Anão": {
          "Força": { minimo: 8, maximo: 18 },
          "Destreza": { minimo: 3, maximo: 17 },
          "Constituição": { minimo: 11, maximo: 18 },
          "Inteligência": { minimo: 3, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 3, maximo: 17 },
          ajustes: { "Constituição": 1, "Carisma": -1 },
          detalhes: [
            'Possuem um bônus de resistência (+1 para cada 3½ pontos de Constituição) contra ataques de varinhas de condão, bastão mágicos, cajados e outras magias.',
            'Possuem resistência excepcional a substâncias tóxicas. Seus testes de resistência contra veneno possuem bônus +1 para cada 3½ pontos de Constituição.',
            'Itens mágicos que não forem especificamente compatíveis com a classe do personagem têm 20% de chance falhar quando usados por um anão. O teste de falha aplica-se a bastões, varinhas, anéis, amuletos, poções, trombetas e todos os outros tipos de ltens mágicos, exceto armas, escudos, armaduras, manoplas e faixas. Esta penalidade não se aplica a anões clérigos usando itens de sua classe. Se falhar, é possível perceber se o item é amaldiçoado.',
            'Em combate corpo a corpo, os anões adicionam 1 à jogada de ataque feita contra ogros, meio-ogros, goblins e robgoblins.',
            'Quando ogros, trolls, ogros magos, gigantes ou titãs atacam os anões, estes monstros precisam subtrair 4 pontos de suas jogadas de ataque.',
            'A infravisão dos anões tem um alcance de 20 metros no escuro.',
            'Estando a 3 metros, o Anão pode detectar (1-5 em 1d6) desnível ou Inclinação numa passagem.',
            'Estando a 3 metros, o Anão pode detectar (1-5 em 1d6) novo túnel/construção de passagem.',
            'Estando a 3 metros, o Anão pode detectar (1-4 em 1d6) deslizamento/deslocamento de paredes ou salas.',
            'Estando a 3 metros, o Anão pode detectar (1-3 em 1d6) armadilhas de pedra, fossos e fossos camuflados.',
            'O Anão pode determinar (1-3 em 1d6) profundidade aproximada em relação à superficie.'
          ],
          altura: { "Masculino": { minimo: 1.09, maximo: 1.33 }, "Feminino": { minimo: 1.04, maximo: 1.28 }},
          idade: { minimo: 40, maximo: 450 },
          peso: { "Masculino": { minimo: 65, maximo: 85 }, "Feminino": { minimo: 52, maximo: 72 }},
          linguas_importantes: [ "comum", "dos anões" ],
          linguas: [ "dos gnomos", "dos goblins", "dos kobolds", "dos ogros" ],
          armas_importantes: []
        },
        "Elfo": {
          "Força": { minimo: 3, maximo: 18 },
          "Destreza": { minimo: 6, maximo: 18 },
          "Constituição": { minimo: 7, maximo: 18 },
          "Inteligência": { minimo: 8, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 8, maximo: 18 },
          ajustes: { "Destreza": 1, "Constituição": -1 },
          detalhes: [
            'Elfos têm 90% de proteção contra magias relacionadas ao sono e magias de Encantar.',
            'Quando utilizam um arco de qualquer tipo (mas não bestas) ou quando empregam espadas (curtas ou longas) os elfos ganham um bônus de +1 em suas jogadas de ataque.',
            'Um elfo pode obter bônus de Surpresa contra seus oponentes, mas somente se não estiver usando armadura de metal. Mesmo assim, o elfo precisa estar sozinho, ou num grupo formado só de elfos ou halflings (que também não podem usar armaduras de metal), ou, no mínimo, a 30 metros de seus companheiros para ganhar o bônus. Se o elfo cumprir essas condições, os oponentes sofrerão uma penalidade de -4 em testes de Surpresa. Se uma porta ou um obstáculo precisar ser transposto, a penalidade reduz-se para -2.',
            'A infravisão permite aos elfos enxergar a 20 metros no escuro.',
            'Se estiver a 3 mestros, elfos podem localizar (1 em 1d6) portas ocultas (escondidas por uma tela, cortina ou algo parecido).',
            'Se procurar intencionalmente por uma porta secreta (construidas para não serem notadas), o elfo terá uma chance de 1-2 em 1d6 de encontrá-la.',
            'Se procurar intencionalmente por uma porta oculta (escondidas por uma tela, cortina ou algo parecido), o elfo terá uma chance de 1-3 em 1d6 de encontrá-la.'
          ],
          altura: { "Masculino": { minimo: 1.4, maximo: 1.64 }, "Feminino": { minimo: 1.27, maximo: 1.51 }},
          idade: { minimo: 100, maximo: 750 },
          peso: { "Masculino": { minimo: 45, maximo: 61 }, "Feminino": { minimo: 35, maximo: 51 }},
          linguas_importantes: [ "comum", 'élfico' ],
          linguas: [ 'dos gnomos', 'dos halflings', 'dos goblins', 'dos robgoblins', 'dos orcs', 'dos gnolls' ],
          armas_importantes: [ 'Arco longo composto', 'Arco curto composto', 'Arco longo', 'Arco curto', 'Espada longa', 'Espada curta' ]
        },
        "Gnomo": {
          "Força": { minimo: 6, maximo: 18 },
          "Destreza": { minimo: 3, maximo: 18 },
          "Constituição": { minimo: 8, maximo: 18 },
          "Inteligência": { minimo: 6, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 3, maximo: 18 },
          ajustes: { "Inteligência": 1, "Sabedoria": -1 },
          detalhes: [
            'Possuem um bônus de resistência (+1 para cada 3½ pontos de Constituição) contra ataques de varinhas de condão, bastão mágicos, cajados e outras magias.',
            'Gnomos têm 20% de chance de falhar toda vez que usam itens mágicos, exceto armas, armaduras, escudos, instrumentos de ilusionismo e (se o personagem é um ladrão) instrumentos que concedam ou aumentem os talentos para o roubo. Se falhar, é possível perceber se o item é amaldiçoado.',
            'Em corpo a corpo, o personagem gnomo soma 1 à sua jogada de ataque para acertar kobolds ou goblins.',
            'Quando ogros, trolls, ogros magos, gigantes ou titãs atacam os gnomos, estes monstros precisam subtrair 4 pontos de suas jogadas de ataque.',
            'A infravisão permite aos gnomos enxergar a 20 metros no escuro.',
            'Estando a 3 metros, o gnomo pode detectar (1-5 em 1d6) desnível ou Inclinação numa passagem.',
            'Estando a 3 metros, o gnomo pode detectar (1-7 em 1d10) paredes, teto e piso perigosos.',
            'O gnomo pode determinar (1-3 em 1d6) direção aproximada no subsolo.',
            'O gnomo pode determinar (1-4 em 1d6) profundidade aproximada em relação à superficie.'
          ],
          altura: { "Masculino": { minimo: 0.97, maximo: 1.13 }, "Feminino": { minimo: 0.91, maximo: 1.07 }},
          idade: { minimo: 60, maximo: 500 },
          peso: { "Masculino": { minimo: 36, maximo: 56 }, "Feminino": { minimo: 34, maximo: 54 }},
          linguas_importantes: [ "comum", "dos gnomos" ],
          linguas: [ "dos anões", "dos halflings", "dos goblins", "dos kobolds", "linguagem simples dos mamíferos que vivem em tocas (esquilos terrestres, texugos, musaranhos, doninhas, etc.)" ],
          armas_importantes: []
        },
        "Meio-Elfo": {
          "Força": { minimo: 3, maximo: 18 },
          "Destreza": { minimo: 6, maximo: 18 },
          "Constituição": { minimo: 6, maximo: 18 },
          "Inteligência": { minimo: 4, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 18 },
          "Carisma": { minimo: 3, maximo: 18 },
          ajustes: {},
          detalhes: [
            'Meio-elfos tem 30% de proteção contra Sono e magias de Encantar.',
            'A infravisão dos meio-elfos permite-lhes enxergar a 20 metros na escuridão.',
            'Estar a 3 metros de distância de uma porta oculta (escondida por cortinas, etc.) dá ao meio-eito uma chance em seis (1 em 1d6) de localizá-la.',
            'Ao se esforçar para descobrir, ele terá uma chance em três (1-2 em 1d6) de localizar uma porta secreta (construida para ser indetectável) e uma chance em duas (1-3 em 1d6) de encontrar uma porta oculta (escondida por cortinas, etc.).'
          ],
          altura: { "Masculino": { minimo: 1.52, maximo: 1.82 }, "Feminino": { minimo: 1.47, maximo: 1.77 }},
          idade: { minimo: 15, maximo: 185 },
          peso: { "Masculino": { minimo: 55, maximo: 73 }, "Feminino": { minimo: 42, maximo: 60 }},
          linguas_importantes: [ "comum", "élfico" ],
          linguas: [ "dos gnomos", "dos halflings", "dos goblins", "dos hobgloblins", "dos orcs", "dos gnolls" ],
          armas_importantes: []
        },
        "Halfling": {
          "Força": { minimo: 7, maximo: 18 },
          "Destreza": { minimo: 7, maximo: 18 },
          "Constituição": { minimo: 10, maximo: 18 },
          "Inteligência": { minimo: 6, maximo: 18 },
          "Sabedoria": { minimo: 3, maximo: 17 },
          "Carisma": { minimo: 3, maximo: 18 },
          ajustes: { "Destreza": 1, "Força": -1 },
          detalhes: [
            'Halflings não jogam os dados para obter Força Extraordinária.',
            'Halflings têm uma grande resistência à magia. Para cada 33½  pontos de Constituição, o personagem ganha um bônus de resistênaade + 1 contra varinhas de condão, baStões, cajados e magias.',
            'Possuem resistência contra venenos. Seus testes de resistência contra veneno possuem bônus +1 para cada 3½ pontos de Constituição.',
            'Halflings ganham um bônus de +l em suas jogadas de ataque sempre que estiverem usando armas de arremesso e fundas.',
            'Um halfling pode obter bônus de Surpresa contra seus oponentes, mas somente se não estiver usando armadura de metal. Mesmo assim, o halfling precisa estar sozinho, ou num grupo formado só de elfos ou halflings (que também não podem usar armaduras de metal), ou, no mínimo, a 30 metros de seus companheiros para ganhar o bônus. Se o halfling cumprir essas condições, os oponentes sofrerão uma penalidade de -4 em testes de Surpresa. Se uma porta ou um obstáculo precisar ser transposto, a penalidade reduz-se para -2.',
          ],
          altura: { "Masculino": { minimo: 0.81, maximo: 1.21 }, "Feminino": { minimo: 0.76, maximo: 1.16 }},
          idade: { minimo: 20, maximo: 200 },
          peso: { "Masculino": { minimo: 26, maximo: 46 }, "Feminino": { minimo: 24, maximo: 44 }},
          linguas_importantes: [ "comum", "dos halflings" ],
          linguas: [ "dos anões", "élfico", "dos gnomos", "dos goblins", "dos orcs" ],
          armas_importantes: [ 'Funda', 'Dardo', 'Arco curto', 'Zarabatana' ]
        }
      };

      const TENDENCIAS = [
        "Justo (bom e leal)",
        "Ordeiro (neutro e leal)",
        "Vil (maligno e leal)",
        "Bondoso (bom e neutro)",
        "Neutro",
        "Egoista (neutro e maligno)",
        "Honrado (caótico e bom)",
        "Inconstante (neutro e caótico)",
        "Cruel (caótico e maligno)"
      ];

      const CLASSES = {
        "Guerreiro": {
          "Grupo": "Homem de Armas",
          "Habilidades Exigidas": { "Força": 9 },
          "Pré-Requisitos": [ "Força" ],
          "Raças Permitidas": [ "Humano", "Anão", "Elfo", "Gnomo", "Meio-Elfo", "Halfling" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 10,
          detalhes: [
            'Um guerreiro com pontuação de 16 ou mais na Força ganha um bônus de 10% para sua experiência em pontos.',
            'Como um mestre dos diferentes tipos de armamento, o guerreiro é o único capaz de ter uma especialízação em armas'
          ],
          armas: []
        },
        "Paladino": {
          "Grupo": "Homem de Armas",
          "Habilidades Exigidas": { "Força": 12, "Constituição": 9, "Sabedoria": 13, "Carisma": 17 },
          "Pré-Requisitos": [ "Força", "Carisma" ],
          "Raças Permitidas": [ "Humano" ],
          tendencias: [ "Justo (bom e leal)" ],
          dado_de_vida: 10,
          detalhes: [
            'Um paladino que tenha valores de Força e Carisma iguais ou maiores que 16 ganha um bônus de 10% em sua experiência em pontos.',
            'O paladino deve ter e manter tendência justa. Um paladino que mude sua tendência, deliberada ou inadvertidamente, perde todos os poderes especiais.',
            'Um paladino pode detectar uma intenção maligna até a 20 metros de distância, ao se concentrar numa direção específica. Duração: uma rodada. Este poder detecta monstros e personagens malignos.',
            'Um paladino recebe um bônus de +2 em todos os testes de resistência.',
            'Um paladino é imune a todas as formas de doença',
            'Um paladino pode curar pela imposição das mãos. O paladino restaura 2 pontos de vida por nível de experiência. Ele pode curar-se ou a outra pessoa, mas somente uma vez ao dia.',
            'Um paladino pode curar doenças de todos os tipos. Isto só pode ser feito uma vez por semana para cada cinco níveis de experiência.',
            'Um paladino é envolto por uma aura de proteção de 3 metros de raio. Neste espaço, todas as criaturas convocadas por magia, especialmente as malignas, sofrem uma penalidade de -1 em suas jogadas de ataque. Criaturas afetadas por essa aura podem detectar facilmente sua origem, mesmo que o paladino esteja disfarçado.',
            'Um paladino usando uma espada sagrada projeta um círculo de poder de 20 metros de diâmetro quando a espada é desembainhada e erguida. Esse poder neutraliza magias hostis de círculos menores ou iguais ao nível de experiência do paladino.',
            'Um paladino pode usar o poder de sua fé contra mortos-vivos e demônios a partir do 3º nível. Ele afeta esses monstros da mesma forma que um clérigo dois níveis abaixo.',
            'Um paladino pode chamar seu cavalo de batalha a partir do 4º nível.',
            'Um paladino pode lançar magias divinas uma vez que tenha atingido o 9º nível. Ele pode utilizar somente magias das esferas de combate, adivinhação, cura e proteção.',
            'Diferente dos sacerdotes, o paladino não recebe magias extras por um valor alto de Sabedoria.',
            'Este personagem não pode lançar magias de pergaminhos clericais ou druídicos, nem fazer uso de itens mágicos exclusivos de sacerdotes, arcanos ou ladinos.',
            'Um paladino não pode possuir mais de 10 itens mágicos. Além disso, entre os objetos mágicos do paladino não pode haver mais do que uma armadura, um escudo e quatro armas (flechas e dardos não contam), além de outros quatro itens diversos.',
            'Um paladino nunca acumula riquezas.',
            'Um paladino deve pagar o dizimo para a instituição religiosa de tendência justa à qual ele serve. O dízimo representa 10% da renda do paladino.',
            'Um paladino não forma um grupo de seguidores ao alcançar o 9º nível ou construir um castelo. Todavia, ele pode contratar soldados e especialistas, embora esses homens devam ter tendência justa.',
            'Um paladino só pode empregar aliados justos'
          ],
          armas: []
        },
        "Ranger": {
          "Grupo": "Homem de Armas",
          "Habilidades Exigidas": { "Força": 13, "Destreza": 13, "Constituição": 14, "Sabedoria": 14 },
          "Pré-Requisitos": [ "Força", "Destreza", "Sabedoria" ],
          "Raças Permitidas": [ "Humano", "Elfo", "Meio-Elfo" ],
          tendencias: [
            "Justo (bom e leal)",
            "Ordeiro (neutro e leal)",
            "Vil (maligno e leal)",
            "Neutro",
            "Honrado (caótico e bom)"
          ],
          dado_de_vida: 10,
          detalhes: [
            'Um ranger que tenha valores de Força, Destreza e Sabedoria iguais ou maiores que 16 ganha um bônus de 10% na experiência em pontos.',
            'Quando estiver vestindo um corselete de couro batido (ou alguma armadura ainda mais leve) um ranger poderá lutar com ambas as mãos sem sofrer penalidades em sua jogada de ataque.',
            'O ranger possui a perícia rastrear. Além disso, este talento melhora em +1 a cada três níveis',
            'Enquanto estiver usando o corselete de couro batido ou uma armadura mais leve, o ranger pode mover-se silenciosamente e ocultar-se nas sombras. Quando o ranger tenta utilizar esses talentos em ambientes artificiais (numa cripta abafada ou nas ruas da cidade), a chance de sucesso diminui pela metade.',
            'Antes de avançar para o 2º nível, todo ranger deve selecionar uma espécie inimiga (bônus de +4 em sua jogada de ataque; penalidade de -4 nos testes de reação em encontros com essa criatura).',
            'Rangers sabem lídar com criaturas treinadas ou treinadas.',
            'Quando lida com animais domésticos ou pacíficos. o ranger pode se aproximar da criatura e fazer amizade instantaneamente.',
            'Quando o ranger aproxima-se de animais selvagens, ou de animais treinados para atacar, a criatura deve fazer um teste de Resistência contra Bastões contra bastões para resistir à oferta de amizade do ranger. O personagem impõe uma penalidade de -1 ao resuldado para cada três níveis de experiência.',
            'Um ranger pode aprender magias divinas, mas somente aquelas das esferas animal e vegetal, e apenas a partir do 8º nível.',
            'O ranger não ganha magias extras graças a um alto valor de Sabedoria, nem está apto a usar pergaminhos clericais ou itens mágicos, a não ser que a especificação do item diga o contrário.',
            'Rangers podem construir castelos ou fortalezas, mas não ganham seguidores por isso.',
            'No 10º nível, um ranger atrai 2d6 seguidores. Esses seguidores podem ser seres humanos normais, mas geralmente são animais ou estranhos habitantes do lugar.',
            'Um ranger sempre deve manter uma tendência inclinada para o bem.',
            'Rangers tendem a ser figuras solitárias, sempre com o pé na estrada. Eles não podem ter aliados, empregados, mercenários ou mesmo servos até que alcancem o 8º nível.'
          ],
          armas: []
        },
        "Mago": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Inteligência": 9 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Elfo", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um mago com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.',
            'Uma vez que tenha alcançado o 9º nível, um arcano pode escrever pergaminhos e preparar poções. Ele só poderá criar itens de maior poder depois de ter aprendido as magias apropriadas para isso (ou de ter trabalhado com alguém que as conheça).',
            'Todos os arcanos recebem um d4 de vida por nível do personagem, do 1º até o 10º. Depois do 10º, arcanos ganham 1 ponto de vida por nível.',
            ''
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Abjurante": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Inteligência": 9, "Sabedoria": 15 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Abjurante (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Conjurador": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Constituição": 15, "Inteligência": 9 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Conjurador (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Adivinho": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Inteligência": 9, "Sabedoria": 16 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Elfo", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Adivinho (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Feiticeiro": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Inteligência": 9, "Carisma": 16 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Elfo", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Feiticeiro (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Ilusionista": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Destreza": 16, "Inteligência": 9 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Gnomo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Ilusionista (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Invocador": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Constituição": 16, "Inteligência": 9 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Invocador (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Necromante": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Inteligência": 9, "Sabedoria": 16 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Necromante (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Transmutador": {
          "Grupo": "Arcano",
          "Habilidades Exigidas": { "Destreza": 15, "Inteligência": 9 },
          "Pré-Requisitos": [ "Inteligência" ],
          "Raças Permitidas": [ "Humano", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 4,
          detalhes: [
            'Um Transmutador (mago especialista) com Inteligência 16 ou mais ganha um bônus de 10% em sua experiência em pontos.',
            'Arcanos não podem usar nenhum tipo de armadura.',
            'Arcanos podem usar poções, anéis, varinhas de condão, bastões, pergaminhos e a ampla maioria dos demais itens, incluindo a versão mágica de qualquer arma permitida à sua classe, mas não podem usar armaduras mágicas.'
          ],
          armas: ["Cajado", "Adaga", "Punhal", "Dardo", "Faca", "Funda"]
        },
        "Clérigo": {
          "Grupo": "Sacerdote",
          "Habilidades Exigidas": { "Sabedoria": 9 },
          "Pré-Requisitos": [ "Sabedoria" ],
          "Raças Permitidas": [ "Humano", "Anão", "Elfo", "Gnomo", "Meio-Elfo", "Halfling" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 8,
          detalhes: [
            'O clérigo com 16 ou mais de Sabedoria ganha um bônus de 10% em sua experiência.',
            'Um clérigo de um mito específico deve possuir uma tendência aceitável para a divindade'
          ],
          armas: []
        },
        "Druida": {
          "Grupo": "Sacerdote",
          "Habilidades Exigidas": { "Sabedoria": 12, "Carisma": 15 },
          "Pré-Requisitos": [ "Sabedoria", "Carisma" ],
          "Raças Permitidas": [ "Humano", "Meio-Elfo" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 8,
          detalhes: [
            'Um druida com pontuação de 16 ou mais em Sabedoria e Carisma ganha um bônus de 10% para sua experiência em pontos.'
          ],
          armas: []
        },
        "Ladrão": {
          "Grupo": "Ladino",
          "Habilidades Exigidas": { "Destreza": 9 },
          "Pré-Requisitos": [ "Destreza" ],
          "Raças Permitidas": [ "Humano", "Anão", "Elfo", "Gnomo", "Meio-Elfo", "Halfling" ],
          tendencias: TENDENCIAS,
          dado_de_vida: 6,
          detalhes: [
            'O ladrão com 16 ou mais de Destreza ganha um bônus de 10% em sua experiência.'
          ],
          armas: []
        },
        "Bardo": {
          "Grupo": "Ladino",
          "Habilidades Exigidas": { "Destreza": 12, "Inteligência": 13, "Carisma": 15 },
          "Pré-Requisitos": [ "Destreza", "Carisma" ],
          "Raças Permitidas": [ "Humano", "Meio-Elfo" ],
          tendencias: [
            "Ordeiro (neutro e leal)",
            "Bondoso (bom e neutro)",
            "Neutro",
            "Egoista (neutro e maligno)",
            "Inconstante (neutro e caótico)"
          ],
          dado_de_vida: 6,
          detalhes: [
            'O bardo com 16 ou mais de Destreza e Carisma ganha um bônus de 10% em sua experiência.'
          ],
          armas: []
        }
      };

      function rolar1d6(callback) {
        let resultado = Math.floor(Math.random() * 6) + 1;
        callback(resultado);
      }

      function rolar1d100(callback) {
        let resultado = Math.floor(Math.random() * 100) + 1;
        callback(resultado);
      }

      function rolar3d6(callback) {
        rolar1d6(dado1 => {
          rolar1d6(dado2 => {
            rolar1d6(dado3 => {
              let resultado = dado1 + dado2 + dado3;
              callback(resultado);
            })
          })
        })
      }

      function atributos_forca(atributo, forca, forca_extraordinaria) {
        if ( forca == 1 ) {
          if (atributo == "Chance de Acertar") {
            return -5;
          } else if (atributo == "Ajuste de Dano") {
            return -4;
          } else if (atributo == "Carga Permitida") {
            return (0.5).toFixed(2);
          } else if (atributo == "Sustentação") {
            return (1.5).toFixed(2);
          } else if (atributo == "Abrir Portas") {
            return 1;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( forca == 2 ) {
          if (atributo == "Chance de Acertar") {
            return -3;
          } else if (atributo == "Ajuste de Dano") {
            return -2;
          } else if (atributo == "Carga Permitida") {
            return (0.5).toFixed(2);
          } else if (atributo == "Sustentação") {
            return (2.5).toFixed(2);
          } else if (atributo == "Abrir Portas") {
            return 1;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( forca == 3 ) {
          if (atributo == "Chance de Acertar") {
            return -3;
          } else if (atributo == "Ajuste de Dano") {
            return -1;
          } else if (atributo == "Carga Permitida") {
            return (2.5).toFixed(2);
          } else if (atributo == "Sustentação") {
            return 5;
          } else if (atributo == "Abrir Portas") {
            return 2;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( (forca >= 4) && (forca <= 5) ) {
          if (atributo == "Chance de Acertar") {
            return -2;
          } else if (atributo == "Ajuste de Dano") {
            return -1;
          } else if (atributo == "Carga Permitida") {
            return 5;
          } else if (atributo == "Sustentação") {
            return 13;
          } else if (atributo == "Abrir Portas") {
            return 3;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( (forca >= 6) && (forca <= 7) ) {
          if (atributo == "Chance de Acertar") {
            return -1;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 10;
          } else if (atributo == "Sustentação") {
            return 28;
          } else if (atributo == "Abrir Portas") {
            return 4;
          } else if (atributo == "Barras/Portais") {
            return "0%";
          }
        } else if ( (forca >= 8) && (forca <= 9) ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 18;
          } else if (atributo == "Sustentação") {
            return 45;
          } else if (atributo == "Abrir Portas") {
            return 5;
          } else if (atributo == "Barras/Portais") {
            return "1%";
          }
        } else if ( (forca >= 10) && (forca <= 11) ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 20;
          } else if (atributo == "Sustentação") {
            return 58;
          } else if (atributo == "Abrir Portas") {
            return 6;
          } else if (atributo == "Barras/Portais") {
            return "2%";
          }
        } else if ( (forca >= 12) && (forca <= 13) ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 23;
          } else if (atributo == "Sustentação") {
            return 70;
          } else if (atributo == "Abrir Portas") {
            return 7;
          } else if (atributo == "Barras/Portais") {
            return "4%";
          }
        } else if ( (forca >= 14) && (forca <= 15) ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 0;
          } else if (atributo == "Carga Permitida") {
            return 28;
          } else if (atributo == "Sustentação") {
            return 85;
          } else if (atributo == "Abrir Portas") {
            return 8;
          } else if (atributo == "Barras/Portais") {
            return "7%";
          }
        } else if ( forca == 16 ) {
          if (atributo == "Chance de Acertar") {
            return 0;
          } else if (atributo == "Ajuste de Dano") {
            return 1;
          } else if (atributo == "Carga Permitida") {
            return 35;
          } else if (atributo == "Sustentação") {
            return 98;
          } else if (atributo == "Abrir Portas") {
            return 9;
          } else if (atributo == "Barras/Portais") {
            return "10%";
          }
        } else if ( forca == 17 ) {
          if (atributo == "Chance de Acertar") {
            return 1;
          } else if (atributo == "Ajuste de Dano") {
            return 1;
          } else if (atributo == "Carga Permitida") {
            return 43;
          } else if (atributo == "Sustentação") {
            return 110;
          } else if (atributo == "Abrir Portas") {
            return 10;
          } else if (atributo == "Barras/Portais") {
            return "13%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria == 0) ) {
          if (atributo == "Chance de Acertar") {
            return 1;
          } else if (atributo == "Ajuste de Dano") {
            return 2;
          } else if (atributo == "Carga Permitida") {
            return 55;
          } else if (atributo == "Sustentação") {
            return 128;
          } else if (atributo == "Abrir Portas") {
            return 11;
          } else if (atributo == "Barras/Portais") {
            return "16%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria >= 1) && (forca_extraordinaria <= 50) ) {
          if (atributo == "Chance de Acertar") {
            return 1;
          } else if (atributo == "Ajuste de Dano") {
            return 3;
          } else if (atributo == "Carga Permitida") {
            return 68;
          } else if (atributo == "Sustentação") {
            return 140;
          } else if (atributo == "Abrir Portas") {
            return 12;
          } else if (atributo == "Barras/Portais") {
            return "20%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria >= 51) && (forca_extraordinaria <= 75) ) {
          if (atributo == "Chance de Acertar") {
            return 2;
          } else if (atributo == "Ajuste de Dano") {
            return 3;
          } else if (atributo == "Carga Permitida") {
            return 80;
          } else if (atributo == "Sustentação") {
            return 153;
          } else if (atributo == "Abrir Portas") {
            return 13;
          } else if (atributo == "Barras/Portais") {
            return "25%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria >= 76) && (forca_extraordinaria <= 90) ) {
          if (atributo == "Chance de Acertar") {
            return 2;
          } else if (atributo == "Ajuste de Dano") {
            return 4;
          } else if (atributo == "Carga Permitida") {
            return 93;
          } else if (atributo == "Sustentação") {
            return 165;
          } else if (atributo == "Abrir Portas") {
            return 14;
          } else if (atributo == "Barras/Portais") {
            return "30%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria >= 91) && (forca_extraordinaria <= 99) ) {
          if (atributo == "Chance de Acertar") {
            return 2;
          } else if (atributo == "Ajuste de Dano") {
            return 5;
          } else if (atributo == "Carga Permitida") {
            return 118;
          } else if (atributo == "Sustentação") {
            return 190;
          } else if (atributo == "Abrir Portas") {
            return "15(3)";
          } else if (atributo == "Barras/Portais") {
            return "35%";
          }
        } else if ( (forca == 18) && (forca_extraordinaria == 100) ) {
          if (atributo == "Chance de Acertar") {
            return 3;
          } else if (atributo == "Ajuste de Dano") {
            return 6;
          } else if (atributo == "Carga Permitida") {
            return 168;
          } else if (atributo == "Sustentação") {
            return 240;
          } else if (atributo == "Abrir Portas") {
            return "16(6)";
          } else if (atributo == "Barras/Portais") {
            return "40%";
          }
        } else if ( forca == 19 ) {
          if (atributo == "Chance de Acertar") {
            return 3;
          } else if (atributo == "Ajuste de Dano") {
            return 7;
          } else if (atributo == "Carga Permitida") {
            return 243;
          } else if (atributo == "Sustentação") {
            return 320;
          } else if (atributo == "Abrir Portas") {
            return "16(8)";
          } else if (atributo == "Barras/Portais") {
            return "50%";
          }
        } else if ( forca == 20 ) {
          if (atributo == "Chance de Acertar") {
            return 3;
          } else if (atributo == "Ajuste de Dano") {
            return 8;
          } else if (atributo == "Carga Permitida") {
            return 268;
          } else if (atributo == "Sustentação") {
            return 350;
          } else if (atributo == "Abrir Portas") {
            return "17(10)";
          } else if (atributo == "Barras/Portais") {
            return "60%";
          }
        } else if ( forca == 21 ) {
          if (atributo == "Chance de Acertar") {
            return 4;
          } else if (atributo == "Ajuste de Dano") {
            return 9;
          } else if (atributo == "Carga Permitida") {
            return 318;
          } else if (atributo == "Sustentação") {
            return 405;
          } else if (atributo == "Abrir Portas") {
            return "17(12)";
          } else if (atributo == "Barras/Portais") {
            return "70%";
          }
        } else if ( forca == 22 ) {
          if (atributo == "Chance de Acertar") {
            return 4;
          } else if (atributo == "Ajuste de Dano") {
            return 10;
          } else if (atributo == "Carga Permitida") {
            return 393;
          } else if (atributo == "Sustentação") {
            return 485;
          } else if (atributo == "Abrir Portas") {
            return "18(14)";
          } else if (atributo == "Barras/Portais") {
            return "80%";
          }
        } else if ( forca == 23 ) {
          if (atributo == "Chance de Acertar") {
            return 5;
          } else if (atributo == "Ajuste de Dano") {
            return 11;
          } else if (atributo == "Carga Permitida") {
            return 468;
          } else if (atributo == "Sustentação") {
            return 565;
          } else if (atributo == "Abrir Portas") {
            return "18(16)";
          } else if (atributo == "Barras/Portais") {
            return "90%";
          }
        } else if ( forca == 24 ) {
          if (atributo == "Chance de Acertar") {
            return 6;
          } else if (atributo == "Ajuste de Dano") {
            return 12;
          } else if (atributo == "Carga Permitida") {
            return 618;
          } else if (atributo == "Sustentação") {
            return 720;
          } else if (atributo == "Abrir Portas") {
            return "19(17)";
          } else if (atributo == "Barras/Portais") {
            return "95%";
          }
        } else if ( forca == 25 ) {
          if (atributo == "Chance de Acertar") {
            return 7;
          } else if (atributo == "Ajuste de Dano") {
            return 14;
          } else if (atributo == "Carga Permitida") {
            return 768;
          } else if (atributo == "Sustentação") {
            return 875;
          } else if (atributo == "Abrir Portas") {
            return "19(18)";
          } else if (atributo == "Barras/Portais") {
            return "99%";
          }
        }
      }

      function atributos_destreza(atributo, destreza) {
        if ( destreza == 1 ) {
          if (atributo == "Ajuste de Reação") {
            return -6;
          } else if (atributo == "Ataque à Distância") {
            return -6;
          } else if (atributo == "Ajuste Defensivo") {
            return 5;
          }
        } else if ( destreza == 2 ) {
          if (atributo == "Ajuste de Reação") {
            return -4;
          } else if (atributo == "Ataque à Distância") {
            return -4;
          } else if (atributo == "Ajuste Defensivo") {
            return 5;
          }
        } else if ( destreza == 3 ) {
          if (atributo == "Ajuste de Reação") {
            return -3;
          } else if (atributo == "Ataque à Distância") {
            return -3;
          } else if (atributo == "Ajuste Defensivo") {
            return 4;
          }
        } else if ( destreza == 4 ) {
          if (atributo == "Ajuste de Reação") {
            return -2;
          } else if (atributo == "Ataque à Distância") {
            return -2;
          } else if (atributo == "Ajuste Defensivo") {
            return 3;
          }
        } else if ( destreza == 5 ) {
          if (atributo == "Ajuste de Reação") {
            return -1;
          } else if (atributo == "Ataque à Distância") {
            return -1;
          } else if (atributo == "Ajuste Defensivo") {
            return 2;
          }
        } else if ( destreza == 6 ) {
          if (atributo == "Ajuste de Reação") {
            return 0;
          } else if (atributo == "Ataque à Distância") {
            return 0;
          } else if (atributo == "Ajuste Defensivo") {
            return 1;
          }
        } else if ( (destreza >= 7) && (destreza <= 14) ) {
          if (atributo == "Ajuste de Reação") {
            return 0;
          } else if (atributo == "Ataque à Distância") {
            return 0;
          } else if (atributo == "Ajuste Defensivo") {
            return 0;
          }
        } else if ( destreza == 15 ) {
          if (atributo == "Ajuste de Reação") {
            return 0;
          } else if (atributo == "Ataque à Distância") {
            return 0;
          } else if (atributo == "Ajuste Defensivo") {
            return -1;
          }
        } else if ( destreza == 16 ) {
          if (atributo == "Ajuste de Reação") {
            return 1;
          } else if (atributo == "Ataque à Distância") {
            return 1;
          } else if (atributo == "Ajuste Defensivo") {
            return -2;
          }
        } else if ( destreza == 17 ) {
          if (atributo == "Ajuste de Reação") {
            return 2;
          } else if (atributo == "Ataque à Distância") {
            return 2;
          } else if (atributo == "Ajuste Defensivo") {
            return -3;
          }
        } else if ( destreza == 18 ) {
          if (atributo == "Ajuste de Reação") {
            return 2;
          } else if (atributo == "Ataque à Distância") {
            return 2;
          } else if (atributo == "Ajuste Defensivo") {
            return -4;
          }
        } else if ( destreza == 19 ) {
          if (atributo == "Ajuste de Reação") {
            return 3;
          } else if (atributo == "Ataque à Distância") {
            return 3;
          } else if (atributo == "Ajuste Defensivo") {
            return -4;
          }
        } else if ( destreza == 20 ) {
          if (atributo == "Ajuste de Reação") {
            return 3;
          } else if (atributo == "Ataque à Distância") {
            return 3;
          } else if (atributo == "Ajuste Defensivo") {
            return -4;
          }
        } else if ( destreza == 21 ) {
          if (atributo == "Ajuste de Reação") {
            return 4;
          } else if (atributo == "Ataque à Distância") {
            return 4;
          } else if (atributo == "Ajuste Defensivo") {
            return -5;
          }
        } else if ( destreza == 22 ) {
          if (atributo == "Ajuste de Reação") {
            return 4;
          } else if (atributo == "Ataque à Distância") {
            return 4;
          } else if (atributo == "Ajuste Defensivo") {
            return -5;
          }
        } else if ( destreza == 23 ) {
          if (atributo == "Ajuste de Reação") {
            return 4;
          } else if (atributo == "Ataque à Distância") {
            return 4;
          } else if (atributo == "Ajuste Defensivo") {
            return -5;
          }
        } else if ( destreza == 24 ) {
          if (atributo == "Ajuste de Reação") {
            return 5;
          } else if (atributo == "Ataque à Distância") {
            return 5;
          } else if (atributo == "Ajuste Defensivo") {
            return -6;
          }
        } else if ( destreza == 25 ) {
          if (atributo == "Ajuste de Reação") {
            return 5;
          } else if (atributo == "Ataque à Distância") {
            return 5;
          } else if (atributo == "Ajuste Defensivo") {
            return -6;
          }
        }
      }

      function atributos_constituicao(atributo, constituicao, classe) {
        if (constituicao == 1) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -3;
          } else if (atributo == "Colapso") {
            return "25%";
          } else if (atributo == "Chance de Ressurreição") {
            return "30%";
          } else if (atributo == "Resistência contra Veneno") {
            return -2;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 2) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -2;
          } else if (atributo == "Colapso") {
            return "30%";
          } else if (atributo == "Chance de Ressurreição") {
            return "35%";
          } else if (atributo == "Resistência contra Veneno") {
            return -1;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 3) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -2;
          } else if (atributo == "Colapso") {
            return "35%";
          } else if (atributo == "Chance de Ressurreição") {
            return "40%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 4) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -1;
          } else if (atributo == "Colapso") {
            return "40%";
          } else if (atributo == "Chance de Ressurreição") {
            return "45%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 5) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -1;
          } else if (atributo == "Colapso") {
            return "45%";
          } else if (atributo == "Chance de Ressurreição") {
            return "50%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 6) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return -1;
          } else if (atributo == "Colapso") {
            return "50%";
          } else if (atributo == "Chance de Ressurreição") {
            return "55%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 7) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "55%";
          } else if (atributo == "Chance de Ressurreição") {
            return "60%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 8) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "60%";
          } else if (atributo == "Chance de Ressurreição") {
            return "65%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 9) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "65%";
          } else if (atributo == "Chance de Ressurreição") {
            return "70%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 10) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "70%";
          } else if (atributo == "Chance de Ressurreição") {
            return "75%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 11) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "75%";
          } else if (atributo == "Chance de Ressurreição") {
            return "80%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 12) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "80%";
          } else if (atributo == "Chance de Ressurreição") {
            return "85%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 13) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "85%";
          } else if (atributo == "Chance de Ressurreição") {
            return "90%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 14) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 0;
          } else if (atributo == "Colapso") {
            return "88%";
          } else if (atributo == "Chance de Ressurreição") {
            return "92%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 15) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 1;
          } else if (atributo == "Colapso") {
            return "90%";
          } else if (atributo == "Chance de Ressurreição") {
            return "94%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 16) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            return 2;
          } else if (atributo == "Colapso") {
            return "95%";
          } else if (atributo == "Chance de Ressurreição") {
            return "96%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 17) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 3;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "97%";
          } else if (atributo == "Chance de Ressurreição") {
            return "98%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 18) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 4;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 0;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 19) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 5;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 1;
          } else if (atributo == "Regeneração") {
            return "Não há";
          }
        } else if (constituicao == 20) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 5;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 1;
          } else if (atributo == "Regeneração") {
            return "1/6 turnos";
          }
        } else if (constituicao == 21) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 6;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 2;
          } else if (atributo == "Regeneração") {
            return "1/5 turnos";
          }
        } else if (constituicao == 22) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 6;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 2;
          } else if (atributo == "Regeneração") {
            return "1/4 turnos";
          }
        } else if (constituicao == 23) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 6;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 3;
          } else if (atributo == "Regeneração") {
            return "1/3 turnos";
          }
        } else if (constituicao == 24) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 7;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "99%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 3;
          } else if (atributo == "Regeneração") {
            return "1/2 turnos";
          }
        } else if (constituicao == 25) {
          if (atributo == "Ajuste dos Pontos de Vida") {
            if ( (classe == "Guerreiro") || (classe == "Paladino") || (classe == "Ranger") ) {
              return 7;
            } else {
              return 2;
            }
          } else if (atributo == "Colapso") {
            return "100%";
          } else if (atributo == "Chance de Ressurreição") {
            return "100%";
          } else if (atributo == "Resistência contra Veneno") {
            return 4;
          } else if (atributo == "Regeneração") {
            return "1/1 turnos";
          }
        }
      }

      function atributos_inteligencia(atributo, inteligencia) {
        if (inteligencia == 1) {
          if (atributo == "Número de Línguas") {
            return 0;
          } else if (atributo == "Círculo de Magia") {
            return 'Nenhum';
          } else if (atributo == "Chance de Aprender Magia") {
            return "Nenhuma";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Nenhuma";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( (inteligencia >= 2) && (inteligencia <= 8) ) {
          if (atributo == "Número de Línguas") {
            return 1;
          } else if (atributo == "Círculo de Magia") {
            return 'Nenhum';
          } else if (atributo == "Chance de Aprender Magia") {
            return "Nenhuma";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Nenhuma";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 9 ) {
          if (atributo == "Número de Línguas") {
            return 2;
          } else if (atributo == "Círculo de Magia") {
            return '4º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "35%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "6";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 10 ) {
          if (atributo == "Número de Línguas") {
            return 2;
          } else if (atributo == "Círculo de Magia") {
            return '5º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "40%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "7";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 11 ) {
          if (atributo == "Número de Línguas") {
            return 2;
          } else if (atributo == "Círculo de Magia") {
            return '5º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "45%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "7";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 12 ) {
          if (atributo == "Número de Línguas") {
            return 3;
          } else if (atributo == "Círculo de Magia") {
            return '6º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "50%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "7";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 13 ) {
          if (atributo == "Número de Línguas") {
            return 3;
          } else if (atributo == "Círculo de Magia") {
            return '6º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "55%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "9";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 14 ) {
          if (atributo == "Número de Línguas") {
            return 4;
          } else if (atributo == "Círculo de Magia") {
            return '7º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "60%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "9";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 15 ) {
          if (atributo == "Número de Línguas") {
            return 4;
          } else if (atributo == "Círculo de Magia") {
            return '7º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "65%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "11";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 16 ) {
          if (atributo == "Número de Línguas") {
            return 5;
          } else if (atributo == "Círculo de Magia") {
            return '8º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "70%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "11";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 17 ) {
          if (atributo == "Número de Línguas") {
            return 6;
          } else if (atributo == "Círculo de Magia") {
            return '8º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "75%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "14";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 18 ) {
          if (atributo == "Número de Línguas") {
            return 7;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "85%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "18";
          } else if (atributo == "Imunidade a Magias") {
            return "Nenhuma";
          }
        } else if ( inteligencia == 19 ) {
          if (atributo == "Número de Línguas") {
            return 8;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "95%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 1º Círculo";
          }
        } else if ( inteligencia == 20 ) {
          if (atributo == "Número de Línguas") {
            return 9;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "96%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 2º Círculo";
          }
        } else if ( inteligencia == 21 ) {
          if (atributo == "Número de Línguas") {
            return 10;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "97%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 3º Círculo";
          }
        } else if ( inteligencia == 22 ) {
          if (atributo == "Número de Línguas") {
            return 11;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "98%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 4º Círculo";
          }
        } else if ( inteligencia == 23 ) {
          if (atributo == "Número de Línguas") {
            return 12;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "99%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 5º Círculo";
          }
        } else if ( inteligencia == 24 ) {
          if (atributo == "Número de Línguas") {
            return 15;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "100%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 6º Círculo";
          }
        } else if ( inteligencia == 25 ) {
          if (atributo == "Número de Línguas") {
            return 20;
          } else if (atributo == "Círculo de Magia") {
            return '9º';
          } else if (atributo == "Chance de Aprender Magia") {
            return "100%";
          } else if (atributo == "Número Máx Magias/Círculo") {
            return "Todas";
          } else if (atributo == "Imunidade a Magias") {
            return "Ilusões do 7º Círculo";
          }
        }
      }

      function atributos_sabedoria(atributo, sabedoria) {
        if (sabedoria == 1) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -6;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "80%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 2) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -4;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "60%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 3) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -3;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "50%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 4) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -2;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "45%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 5) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -1;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "40%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 6) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -1;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "35%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 7) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return -1;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "30%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 8) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "25%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 9) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "20%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 10) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "15%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 11) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "10%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 12) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "Nenhuma";
          } else if (atributo == "Chance da Magia Falhar") {
            return "5%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 13) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "1º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 14) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 0;
          } else if (atributo == "Magias Extras") {
            return "1º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 15) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 1;
          } else if (atributo == "Magias Extras") {
            return "2º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 16) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 2;
          } else if (atributo == "Magias Extras") {
            return "2º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 17) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 3;
          } else if (atributo == "Magias Extras") {
            return "3º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 18) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "4º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return [];
          }
        } else if (sabedoria == 19) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "1º, 4º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Causar Medo", "Encantar Pessoa", "Comanda", "Amigos", "Hipnose"];
          }
        } else if (sabedoria == 20) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "2º, 4º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Esquecer", "Paralisar Pessoa", "Raio de Esquecimanto", "Assustar"];
          }
        } else if (sabedoria == 21) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "3º, 5º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Medo"];
          }
        } else if (sabedoria == 22) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "4º, 5º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Encantar Monstro", "Confusão", "Emoção", "Falha", "Sugestão"];
          }
        } else if (sabedoria == 23) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "5º, 5º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Caos", "Debilitar Mente", "Paralisar Monstro", "Jarro Arcano", "Busca"];
          }
        } else if (sabedoria == 24) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "6º, 6º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Tarefa", "Sugestão em Massa", "Cetro do Poder"];
          }
        } else if (sabedoria == 25) {
          if (atributo == "Ajuste de Defesa Contra Magia") {
            return 4;
          } else if (atributo == "Magias Extras") {
            return "6º, 7º";
          } else if (atributo == "Chance da Magia Falhar") {
            return "0%";
          } else if (atributo == "Imunidade à Magia") {
            return ["Antipatia/Simpatia", "Morte", "Encantar as Massas"];
          }
        }
      }

      function atributos_carisma(atributo, carisma) {
        if (carisma == 1) {
          if (atributo == "Nº Máximo de aliados") {
            return 0;
          } else if (atributo == "Fator de Lealdade") {
            return -8;
          } else if (atributo == "Ajuste de reação") {
            return -7;
          }
        } else if (carisma == 2) {
          if (atributo == "Nº Máximo de aliados") {
            return 1;
          } else if (atributo == "Fator de Lealdade") {
            return -7;
          } else if (atributo == "Ajuste de reação") {
            return -6;
          }
        } else if (carisma == 3) {
          if (atributo == "Nº Máximo de aliados") {
            return 1;
          } else if (atributo == "Fator de Lealdade") {
            return -6;
          } else if (atributo == "Ajuste de reação") {
            return -5;
          }
        } else if (carisma == 4) {
          if (atributo == "Nº Máximo de aliados") {
            return 1;
          } else if (atributo == "Fator de Lealdade") {
            return -5;
          } else if (atributo == "Ajuste de reação") {
            return -4;
          }
        } else if (carisma == 5) {
          if (atributo == "Nº Máximo de aliados") {
            return 2;
          } else if (atributo == "Fator de Lealdade") {
            return -4;
          } else if (atributo == "Ajuste de reação") {
            return -3;
          }
        } else if (carisma == 6) {
          if (atributo == "Nº Máximo de aliados") {
            return 2;
          } else if (atributo == "Fator de Lealdade") {
            return -3;
          } else if (atributo == "Ajuste de reação") {
            return -2;
          }
        } else if (carisma == 7) {
          if (atributo == "Nº Máximo de aliados") {
            return 3;
          } else if (atributo == "Fator de Lealdade") {
            return -2;
          } else if (atributo == "Ajuste de reação") {
            return -1;
          }
        } else if (carisma == 8) {
          if (atributo == "Nº Máximo de aliados") {
            return 3;
          } else if (atributo == "Fator de Lealdade") {
            return -1;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 9) {
          if (atributo == "Nº Máximo de aliados") {
            return 4;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 10) {
          if (atributo == "Nº Máximo de aliados") {
            return 4;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 11) {
          if (atributo == "Nº Máximo de aliados") {
            return 4;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 12) {
          if (atributo == "Nº Máximo de aliados") {
            return 5;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 0;
          }
        } else if (carisma == 13) {
          if (atributo == "Nº Máximo de aliados") {
            return 5;
          } else if (atributo == "Fator de Lealdade") {
            return 0;
          } else if (atributo == "Ajuste de reação") {
            return 1;
          }
        } else if (carisma == 14) {
          if (atributo == "Nº Máximo de aliados") {
            return 6;
          } else if (atributo == "Fator de Lealdade") {
            return 1;
          } else if (atributo == "Ajuste de reação") {
            return 2;
          }
        } else if (carisma == 15) {
          if (atributo == "Nº Máximo de aliados") {
            return 7;
          } else if (atributo == "Fator de Lealdade") {
            return 3;
          } else if (atributo == "Ajuste de reação") {
            return 3;
          }
        } else if (carisma == 16) {
          if (atributo == "Nº Máximo de aliados") {
            return 8;
          } else if (atributo == "Fator de Lealdade") {
            return 4;
          } else if (atributo == "Ajuste de reação") {
            return 5;
          }
        } else if (carisma == 17) {
          if (atributo == "Nº Máximo de aliados") {
            return 10;
          } else if (atributo == "Fator de Lealdade") {
            return 6;
          } else if (atributo == "Ajuste de reação") {
            return 6;
          }
        } else if (carisma == 18) {
          if (atributo == "Nº Máximo de aliados") {
            return 15;
          } else if (atributo == "Fator de Lealdade") {
            return 8;
          } else if (atributo == "Ajuste de reação") {
            return 7;
          }
        } else if (carisma == 19) {
          if (atributo == "Nº Máximo de aliados") {
            return 20;
          } else if (atributo == "Fator de Lealdade") {
            return 10;
          } else if (atributo == "Ajuste de reação") {
            return 8;
          }
        } else if (carisma == 20) {
          if (atributo == "Nº Máximo de aliados") {
            return 25;
          } else if (atributo == "Fator de Lealdade") {
            return 12;
          } else if (atributo == "Ajuste de reação") {
            return 9;
          }
        } else if (carisma == 21) {
          if (atributo == "Nº Máximo de aliados") {
            return 30;
          } else if (atributo == "Fator de Lealdade") {
            return 14;
          } else if (atributo == "Ajuste de reação") {
            return 10;
          }
        } else if (carisma == 22) {
          if (atributo == "Nº Máximo de aliados") {
            return 35;
          } else if (atributo == "Fator de Lealdade") {
            return 16;
          } else if (atributo == "Ajuste de reação") {
            return 11;
          }
        } else if (carisma == 23) {
          if (atributo == "Nº Máximo de aliados") {
            return 40;
          } else if (atributo == "Fator de Lealdade") {
            return 18;
          } else if (atributo == "Ajuste de reação") {
            return 12;
          }
        } else if (carisma == 24) {
          if (atributo == "Nº Máximo de aliados") {
            return 45;
          } else if (atributo == "Fator de Lealdade") {
            return 20;
          } else if (atributo == "Ajuste de reação") {
            return 13;
          }
        } else if (carisma == 25) {
          if (atributo == "Nº Máximo de aliados") {
            return 50;
          } else if (atributo == "Fator de Lealdade") {
            return 20;
          } else if (atributo == "Ajuste de reação") {
            return 14;
          }
        }
      }

      function sortear_atributos(callback) {
        rolar3d6(forca => {
          rolar3d6(destreza => {
            rolar3d6(constituicao => {
              rolar3d6(inteligencia => {
                rolar3d6(sabedoria => {
                  rolar3d6(carisma => {
                    callback({
                      "Raça": '',
                      "Classe": '',
                      "Tendência": '',
                      "Dados Básicos": {
                        "Pontos de Vida": 0,
                        "Gênero": '',
                        "Idade": 0,
                        "Altura": 0,
                        "Peso": 0
                      },
                      "Habilidades": {
                        "Força": {
                          "Valor da Habilidade": forca,
                          "Chance de Acertar": 0,
                          "Ajuste de Dano": 0,
                          "Carga Permitida": 0,
                          "Sustentação": 0,
                          "Abrir Portas": 0,
                          "Barras/Portais": "0%"
                        },
                        "Destreza": {
                          "Valor da Habilidade": destreza,
                          "Ajuste de Reação": 0,
                          "Ataque à Distância": 0,
                          "Ajuste Defensivo": 0
                        },
                        "Constituição": {
                          "Valor da Habilidade": constituicao,
                          "Ajuste dos Pontos de Vida": 0,
                          "Colapso": "0%",
                          "Chance de Ressurreição": "0%",
                          "Resistência contra Veneno": 0,
                          "Regeneração": "Não há"
                        },
                        "Inteligência": {
                          "Valor da Habilidade": inteligencia,
                          "Número de Línguas": 0,
                          "Círculo de Magia": "Nenhum",
                          "Chance de Aprender Magia": "Nenhuma",
                          "Número Máx Magias/Círculo": "Nenhuma",
                          "Imunidade a Magias": "Nenhuma"
                        },
                        "Sabedoria": {
                          "Valor da Habilidade": sabedoria,
                          "Ajuste de Defesa Contra Magia": 0,
                          "Magias Extras": "Nenhuma",
                          "Chance da Magia Falhar": "0%",
                          "Imunidade à Magia": []
                        },
                        "Carisma": {
                          "Valor da Habilidade": carisma,
                          "Nº Máximo de aliados": 0,
                          "Fator de Lealdade": 0,
                          "Ajuste de reação": 0
                        },
                      },
                      "Idiomas": [],
                      "Pontos de Perícia": {
                        "Perícias Armas Inicial": 0,
                        "Perícias Armas Nº Níveis": 0,
                        "Perícias Armas Penalidades": 0,
                        "Perícias Comuns Inicial": 0,
                        "Perícias Comuns Nº Níveis": 0
                      },
                      "Perícias": {},
                      "Especialização": [],
                      "Detalhes": []
                    });
                  });
                });
              });
            });
          });
        });
      }

      function validar_habilidades(personagem, callback) {

        let keys_racas = Object.keys(RACAS);
        let keys_habilidades = Object.keys(personagem["Habilidades"]);

        let racas = [];

        keys_racas.forEach((raca,index_racas) => {

          let habilidade_valida = true;
          keys_habilidades.forEach((habilidade,index_habilidades) => {
              let valor = personagem["Habilidades"][habilidade]["Valor da Habilidade"];
              let limites = RACAS[raca][habilidade];
              if ( (valor < limites["minimo"]) || (valor > limites["maximo"]) ) {
                habilidade_valida = false;
              }

              if (index_habilidades == (keys_habilidades.length - 1)) {
                if (habilidade_valida) {
                  racas.push(raca);
                }
              }
          });

          if (index_racas == (keys_racas.length - 1)) {
            callback(racas);
          }
        });

      }

      function ajustar_nome_raca(personagem) {
        let raca = personagem["Raça"];
        if ( (raca.indexOf('Elfo') > -1) || (raca.indexOf('Drow') > -1) ) {
          raca = 'Elfo';
        }
        if (raca.indexOf('Halfling') > -1) {
          raca = 'Halfling';
        }
        return raca;
      }

      function sortear_raca(personagem, callback) {
        validar_habilidades(personagem, racas => {
          let index = Math.floor(Math.random() * racas.length);
          let raca = racas[index];
          personagem["Raça"] = raca;

          if (raca == "Elfo") {
            let racas_elficas = [
              'Elfo (Alto-Elfo)', 'Elfo (Alto-Elfo)', 'Elfo (Alto-Elfo)', 'Elfo (Alto-Elfo),',
              'Elfo Aquático', 'Elfo Cinzento', 'Elfo da Floresta', 'Drow'
            ];
            personagem["Raça"] = racas_elficas[Math.floor(Math.random() * racas_elficas.length)];
          }

          if (raca == "Halfling") {
            let racas_halflings = [ 'Halfling Pespeludos', 'Halfling Tiposaltos', 'Halfling Robustos' ];
            personagem["Raça"] = racas_halflings[Math.floor(Math.random() * racas_halflings.length)];
          }

          let ajustes = Object.keys(RACAS[raca].ajustes);
          if (ajustes.length == 0) {
            callback();
          } else {
            ajustes.forEach((habilidade, i) => {

              let valor = personagem["Habilidades"][habilidade]["Valor da Habilidade"];
              let ajuste = RACAS[raca].ajustes[habilidade];
              personagem["Habilidades"][habilidade]["Valor da Habilidade"] = valor + ajuste;

              if (i == (ajustes.length - 1)) {
                callback();
              }
            });
          }

        });
      }

      function validar_classes_por_habilidades(classes, personagem, callback) {
        let keys_classes = classes;
        let keys_habilidades = Object.keys(personagem["Habilidades"]);
        let classes_permitidas = [];

        keys_classes.forEach((classe,index_classes) => {

          let habilidade_valida = true;
          keys_habilidades.forEach((habilidade,index_habilidades) => {
              let valor = personagem["Habilidades"][habilidade]["Valor da Habilidade"];
              let limite = CLASSES[classe]["Habilidades Exigidas"][habilidade];
              if (valor < limite) {
                habilidade_valida = false;
              }

              if (index_habilidades == (keys_habilidades.length - 1)) {
                if (habilidade_valida) {
                  classes_permitidas.push(classe);
                }
              }
          });

          if (index_classes == (keys_classes.length - 1)) {
            callback(classes_permitidas);
          }
        });
      }

      function validar_classes_por_raca(personagem, callback) {
        let keys_classes = Object.keys(CLASSES);
        let classes_permitidas = [];

        keys_classes.forEach((classe,index_classes) => {
          let keys_racas = CLASSES[classe]["Raças Permitidas"];
          let classe_permitida = false;

          keys_racas.forEach((raca, index_classe_permitida) => {
            if (ajustar_nome_raca(personagem) == raca) {
              classe_permitida = true;
            }

            if (index_classe_permitida == (keys_racas.length - 1)) {
              if (classe_permitida) {
                classes_permitidas.push(classe);
              }
            }
          });

          if (index_classes == (keys_classes.length - 1)) {
            callback(classes_permitidas);
          }
        });
      }

      function sortear_classe(personagem, callback) {
        validar_classes_por_raca(personagem, classes => {
          validar_classes_por_habilidades(classes, personagem, classes_permitidas => {
            if (classes_permitidas.length == 0) {
              callback({ valores_invalidos: true });
            } else {
              let classes_fortes = ["Paladino", "Ranger", "Abjurante", "Conjurador", "Adivinho", "Feiticeiro", "Ilusionista", "Invocador", "Necromante", "Transmutador", "Druida", "Bardo"];
              let classes_selecionadas = [];
              classes_fortes.forEach((classe_forte, index_classes_fortes) => {
                classes_permitidas.forEach((classe_permitida, index_classe_permitida) => {
                  if (classe_permitida == classe_forte) {
                    classes_selecionadas.push(classe_permitida);
                  }
                });

                if (index_classes_fortes == (classes_fortes.length - 1)) {

                  if (classes_selecionadas.length > 0) {

                    let index = Math.floor(Math.random() * classes_selecionadas.length);
                    personagem["Classe"] = classes_selecionadas[index];

                  } else {

                    let index = Math.floor(Math.random() * classes_permitidas.length);
                    let classe_final = classes_permitidas[index];

                    if (classe_final == "Ranger") {
                      personagem["Perícias"]["Rastrear"] = PERICIAS["Rastrear"];
                    }

                    if (classe_final == "Clérigo") {
                      let lista_clerigos = [
                        "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                        "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                        "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                        "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                        "Clérigo", "Clérigo", "Clérigo", "Clérigo",
                        "Clérigo da Agricultura",
                        "Clérigo dos Ferreiros",
                        "Clérigo da Morte",
                        "Clérigo da Doença",
                        "Clérigo da Terra",
                        "Clérigo da Cura",
                        "Clérigo da Caça",
                        "Clérigo do Relâmpago",
                        "Clérigo do Amor",
                        "Clérigo da Natureza",
                        "Clérigo dos Oceanos",
                        "Clérigo da Paz",
                        "Clérigo da Força",
                        "Clérigo do Trovão",
                        "Clérigo da Guerra",
                        "Clérigo dos Ventos"
                      ];
                      let index_clerigo = Math.floor(Math.random() * lista_clerigos.length);
                      classe_final = lista_clerigos[index_clerigo];
                    }

                    personagem["Classe"] = classe_final;
                  }

                  callback({ valores_invalidos: false });
                }
              });
            }
          });
        });
      }

      function render() {
        obter_dados_personagem(personagem => {
          let output = document.getElementById('ficha');
          var node = prettyPrint(personagem);
          document.getElementById('ficha').appendChild(node);
        });
      }

      function sortear_personagem(callback) {
        sortear_atributos(personagem => {
          sortear_raca(personagem, () => {
            sortear_classe(personagem, resultado => {
              if (resultado.valores_invalidos) {
                sortear_personagem(personagem => {
                  console.log("Foi necessário outro lance de dados pois não foi possível escolher uma classe.");
                  sortear_tendencia(personagem, () => {
                    sortear_dados_basicos(personagem, () => {
                      callback(personagem);
                    });
                  });
                });
              } else {
                sortear_tendencia(personagem, () => {
                  sortear_dados_basicos(personagem, () => {
                    callback(personagem);
                  });
                });
              }
            });
          });
        });
      }

      function ajustar_nome_classe(personagem) {
        let classe = personagem["Classe"];
        if (classe.indexOf('Clérigo') > -1) {
          classe = 'Clérigo';
        }
        return classe;
      }

      function sortear_tendencia(personagem, callback) {
        let classe = ajustar_nome_classe(personagem);
        let tendencias = CLASSES[classe].tendencias;
        let index = Math.floor(Math.random() * tendencias.length);
        personagem["Tendência"] = tendencias[index];
        callback();
      }

      function acrescentar_novas_linguas(personagem, raca, numero_de_linguas, callback) {
        let linguas = [ 'élfico', 'do anões', 'dos gnomos', 'dos halflings', 'dos goblins', 'dos robgoblins', 'dos orcs', 'dos gnolls' ];

        if (numero_de_linguas == 0) {
          personagem["Detalhes"].push("Mesmo incapaz de falar qualquer língua, o personagem ainda pode se comunicar através de gestos e grunhidos.");
        } else if (numero_de_linguas == 1) {
          let linguas_importantes = [ RACAS[raca].linguas_importantes[0] ];
          personagem["Idiomas"] = linguas_importantes;
          numero_de_linguas = numero_de_linguas - 1;
        } else {
          personagem["Idiomas"] = RACAS[raca].linguas_importantes;
          numero_de_linguas = numero_de_linguas - RACAS[raca].linguas_importantes.length;
        }

        let idiomas_do_personagem = personagem["Idiomas"].slice();

        if (numero_de_linguas > 0) {

          linguas.forEach((idioma_disponivel, index_externo) => {
            let possui_idioma = false;
            idiomas_do_personagem.forEach((idioma_aprendido, index_interno) => {
              if (idioma_disponivel == idioma_aprendido) {
                possui_idioma = true;
              }

              if (index_interno == (idiomas_do_personagem.length - 1)) {
                if ( (!possui_idioma) && (numero_de_linguas > 0) ) {
                  let acrescentar_nova_lingua = Math.floor(Math.random() * 100) + 1;
                  if (acrescentar_nova_lingua <= 5) {
                    personagem["Idiomas"].push(idioma_disponivel);
                    numero_de_linguas = numero_de_linguas - 1;
                  }
                }
              }
            });

            if (index_externo == (linguas.length - 1)) {
              callback(numero_de_linguas);
            }
          });
        } else {
          callback(numero_de_linguas);
        }
      }

      function sortear_dados_basicos(personagem, callback) {
        let classe = ajustar_nome_classe(personagem);
        let raca = ajustar_nome_raca(personagem);

        let generos = [ 'Masculino' , 'Feminino' ];
        let genero = generos[Math.floor(Math.random() * 2)];
        personagem["Dados Básicos"]["Gênero"] = genero;

        let ajuste_altura = RACAS[raca].altura[genero].maximo - RACAS[raca].altura[genero].minimo;
        let altura = (Math.random() * ajuste_altura) + RACAS[raca].altura[genero].minimo;
        personagem["Dados Básicos"]["Altura"] = altura.toFixed(2);

        let ajuste_idade = RACAS[raca].idade.maximo - RACAS[raca].idade.minimo;
        let idade = Math.floor(Math.random() * ajuste_idade) + RACAS[raca].idade.minimo;
        personagem["Dados Básicos"]["Idade"] = idade;

        let ajuste_peso = RACAS[raca].peso[genero].maximo - RACAS[raca].peso[genero].minimo;
        let peso = (Math.random() * ajuste_peso) + RACAS[raca].peso[genero].minimo;
        personagem["Dados Básicos"]["Peso"] = peso.toFixed(2);

        personagem["Detalhes"] = RACAS[raca].detalhes;

        if (personagem["Raça"].indexOf('Halfling') > -1) {

          let detalheRobusto = 'Qualquer Halfling Robusto puro tem 15% de chance de ter uma infravisão normal, até 20 metros.';
          let detalheNaoRobustos = 'Halflings que não são Robustos puros, tem 25% de chance de ter uma infravisão limitada, até 10 metros.';
          let resultadoDado = 0;

          if (personagem["Raça"] == 'Halfling Robustos') {

            personagem["Detalhes"].push('Halflings com sangue Robusto podem notar o desnível de uma passagem com 75% de precisão (1-3 em 1d4).');
            personagem["Detalhes"].push('Halflings com sangue Robusto podem determinar a direção com 50% de eficiência (1-3 em 1d6).');

            resultadoDado = Math.floor(Math.random() * 100);
            if (resultadoDado < 15) {
              personagem["Detalhes"].push(detalheRobusto);
            } else {
              resultadoDado = Math.floor(Math.random() * 100);
              if (resultadoDado < 25) {
                personagem["Detalhes"].push(detalheNaoRobustos);
              }
            }
          } else {
            resultadoDado = Math.floor(Math.random() * 100);
            if (resultadoDado < 25) {
              personagem["Detalhes"].push(detalheNaoRobustos);
            }
          }
        }

        /* Ajustes atributos */

        let forca = personagem["Habilidades"]["Força"]["Valor da Habilidade"];
        let forca_extraordinaria = 0;
        if ( (forca == 18) && (personagem["Raça"].indexOf('Halfling') == -1) ) {
          forca_extraordinaria = Math.floor(Math.random() * 100) + 1;
          personagem["Habilidades"]["Força"]["Força Extraordinária"] = forca_extraordinaria;
        }
        personagem["Habilidades"]["Força"]["Chance de Acertar"] = atributos_forca("Chance de Acertar", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Ajuste de Dano"] = atributos_forca("Ajuste de Dano", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Carga Permitida"] = atributos_forca("Carga Permitida", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Sustentação"] = atributos_forca("Sustentação", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Abrir Portas"] = atributos_forca("Abrir Portas", forca, forca_extraordinaria);
        personagem["Habilidades"]["Força"]["Barras/Portais"] = atributos_forca("Barras/Portais", forca, forca_extraordinaria);

        let destreza = personagem["Habilidades"]["Destreza"]["Valor da Habilidade"];
        personagem["Habilidades"]["Destreza"]["Ajuste de Reação"] = atributos_destreza("Ajuste de Reação", destreza);
        personagem["Habilidades"]["Destreza"]["Ataque à Distância"] = atributos_destreza("Ataque à Distância", destreza);
        personagem["Habilidades"]["Destreza"]["Ajuste Defensivo"] = atributos_destreza("Ajuste Defensivo", destreza);

        let constituicao = personagem["Habilidades"]["Constituição"]["Valor da Habilidade"];
        let ajuste_pontos_de_vida = atributos_constituicao("Ajuste dos Pontos de Vida", constituicao, classe);
        personagem["Habilidades"]["Constituição"]["Ajuste dos Pontos de Vida"] = ajuste_pontos_de_vida;
        personagem["Habilidades"]["Constituição"]["Colapso"] = atributos_constituicao("Colapso", constituicao, classe);
        personagem["Habilidades"]["Constituição"]["Chance de Ressurreição"] = atributos_constituicao("Chance de Ressurreição", constituicao, classe);
        personagem["Habilidades"]["Constituição"]["Resistência contra Veneno"] = atributos_constituicao("Resistência contra Veneno", constituicao, classe);
        personagem["Habilidades"]["Constituição"]["Regeneração"] = atributos_constituicao("Regeneração", constituicao, classe);

        let vida = Math.floor(Math.random() * CLASSES[classe].dado_de_vida) + 1;
        if (constituicao == 20) {
          if (vida == 1) {
            vida = 2;
          }
        } else if ( (constituicao >= 21) && (constituicao <= 22) ) {
          if ( (vida >= 1) && (vida <= 2) ) {
            vida = 3;
          }
        } else if ( (constituicao >= 23) && (constituicao <= 25) ) {
          if ( (vida >= 1) && (vida <= 3) ) {
            vida = 4;
          }
        }
        personagem["Dados Básicos"]["Pontos de Vida"] = vida + ajuste_pontos_de_vida;

        if (constituicao == 20) {
          personagem["Detalhes"].push("Todos os resultados de 1 nos Dados de Vida são considerados como 2.");
        } else if ( (constituicao >= 21) && (constituicao <= 22) ) {
          personagem["Detalhes"].push("Todos os resultados de 1 e 2 nos Dados de Vida são considerados como 3.");
        } else if ( (constituicao >= 23) && (constituicao <= 25) ) {
          personagem["Detalhes"].push("Todos os resultados de 1, 2 e 3 nos Dados de Vida são considerados como 4.");
        }

        let inteligencia = personagem["Habilidades"]["Inteligência"]["Valor da Habilidade"];
        let numero_de_linguas = atributos_inteligencia("Número de Línguas", inteligencia);
        personagem["Habilidades"]["Inteligência"]["Número de Línguas"] = numero_de_linguas;
        personagem["Habilidades"]["Inteligência"]["Círculo de Magia"] = atributos_inteligencia("Círculo de Magia", inteligencia);
        personagem["Habilidades"]["Inteligência"]["Chance de Aprender Magia"] = atributos_inteligencia("Chance de Aprender Magia", inteligencia);
        personagem["Habilidades"]["Inteligência"]["Número Máx Magias/Círculo"] = atributos_inteligencia("Número Máx Magias/Círculo", inteligencia);
        personagem["Habilidades"]["Inteligência"]["Imunidade a Magias"] = atributos_inteligencia("Imunidade a Magias", inteligencia);

        acrescentar_novas_linguas(personagem, raca, numero_de_linguas, (numero_de_linguas) => {

          if (CLASSES[classe]["Grupo"] == "Homem de Armas") {
            personagem["Pontos de Perícia"]["Perícias Armas Inicial"] = 4;
            personagem["Pontos de Perícia"]["Perícias Armas Nº Níveis"] = 3;
            personagem["Pontos de Perícia"]["Perícias Armas Penalidades"] = -2;
            personagem["Pontos de Perícia"]["Perícias Comuns Inicial"] = 3 + numero_de_linguas;
            personagem["Pontos de Perícia"]["Perícias Comuns Nº Níveis"] = 3;
          } else if (CLASSES[classe]["Grupo"] == "Arcano") {
            personagem["Pontos de Perícia"]["Perícias Armas Inicial"] = 1;
            personagem["Pontos de Perícia"]["Perícias Armas Nº Níveis"] = 6;
            personagem["Pontos de Perícia"]["Perícias Armas Penalidades"] = -5;
            personagem["Pontos de Perícia"]["Perícias Comuns Inicial"] = 4 + numero_de_linguas;
            personagem["Pontos de Perícia"]["Perícias Comuns Nº Níveis"] = 3;
          } else if (CLASSES[classe]["Grupo"] == "Sacerdote") {
            personagem["Pontos de Perícia"]["Perícias Armas Inicial"] = 2;
            personagem["Pontos de Perícia"]["Perícias Armas Nº Níveis"] = 4;
            personagem["Pontos de Perícia"]["Perícias Armas Penalidades"] = -3;
            personagem["Pontos de Perícia"]["Perícias Comuns Inicial"] = 4 + numero_de_linguas;
            personagem["Pontos de Perícia"]["Perícias Comuns Nº Níveis"] = 3;
          } else if (CLASSES[classe]["Grupo"] == "Ladino") {
            personagem["Pontos de Perícia"]["Perícias Armas Inicial"] = 2;
            personagem["Pontos de Perícia"]["Perícias Armas Nº Níveis"] = 4;
            personagem["Pontos de Perícia"]["Perícias Armas Penalidades"] = -3;
            personagem["Pontos de Perícia"]["Perícias Comuns Inicial"] = 3 + numero_de_linguas;
            personagem["Pontos de Perícia"]["Perícias Comuns Nº Níveis"] = 4;
          }

          let sabedoria = personagem["Habilidades"]["Sabedoria"]["Valor da Habilidade"];
          personagem["Habilidades"]["Sabedoria"]["Ajuste de Defesa Contra Magia"] = atributos_sabedoria("Ajuste de Defesa Contra Magia", sabedoria);
          personagem["Habilidades"]["Sabedoria"]["Magias Extras"] = atributos_sabedoria("Magias Extras", sabedoria);
          personagem["Habilidades"]["Sabedoria"]["Chance da Magia Falhar"] = atributos_sabedoria("Chance da Magia Falhar", sabedoria);
          personagem["Habilidades"]["Sabedoria"]["Imunidade à Magia"] = atributos_sabedoria("Imunidade à Magia", sabedoria);

          let carisma = personagem["Habilidades"]["Carisma"]["Valor da Habilidade"];
          personagem["Habilidades"]["Carisma"]["Nº Máximo de aliados"] = atributos_carisma("Nº Máximo de aliados", carisma);
          personagem["Habilidades"]["Carisma"]["Fator de Lealdade"] = atributos_carisma("Fator de Lealdade", carisma);
          personagem["Habilidades"]["Carisma"]["Ajuste de reação"] = atributos_carisma("Ajuste de reação", carisma);

          callback();

        });
      }

      function obter_dados_personagem(callback) {
        let urlParams = new URLSearchParams(window.location.search);
        let h = urlParams.get('h');
        let raca = urlParams.get('r');
        let habilidades = [];

        // ?h=10,11,12,13,14,15&r=Anão
        if ( (h != undefined) && (h != null) && (h != '') && (h.length > 0) && (h.split(',').length == 6) ) {
          let hs = h.split(',');
          let personagem = {
            "Habilidades": {
              "Força": { "Valor da Habilidade": parseInt(hs[0]) },
              "Destreza": { "Valor da Habilidade": parseInt(hs[1]) },
              "Constituição": { "Valor da Habilidade": parseInt(hs[2]) },
              "Inteligência": { "Valor da Habilidade": parseInt(hs[3]) },
              "Sabedoria": { "Valor da Habilidade": parseInt(hs[4]) },
              "Carisma": { "Valor da Habilidade": parseInt(hs[5]) },
            },
            "Raça": raca
          };
          callback(personagem);
        } else {
          sortear_personagem(personagem => {
            callback(personagem);
          });
        }
      }

      render();

    </script>
  </body>
</html>
